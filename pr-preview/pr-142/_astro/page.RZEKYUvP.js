const w=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,D=globalThis,Et="10.38.0";function xt(){return $r(D),D}function $r(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Et,t[Et]=t[Et]||{}}function tr(e,t,n=D){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Et]=r[Et]||{};return s[e]||(s[e]=t())}const wa=["debug","info","warn","error","log","assert","trace"],Bm="Sentry Logger ",zs={};function Yt(e){if(!("console"in D))return e();const t=D.console,n={},r=Object.keys(zs);r.forEach(s=>{const o=zs[s];n[s]=t[s],t[s]=o});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Hm(){Ca().enabled=!0}function Wm(){Ca().enabled=!1}function Td(){return Ca().enabled}function jm(...e){ka("log",...e)}function qm(...e){ka("warn",...e)}function zm(...e){ka("error",...e)}function ka(e,...t){w&&Td()&&Yt(()=>{D.console[e](`${Bm}[${e}]:`,...t)})}function Ca(){return w?tr("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const m={enable:Hm,disable:Wm,isEnabled:Td,log:jm,warn:qm,error:zm},vd=50,ft="?",Yc=/\(error: (.*)\)/,Kc=/captureMessage|captureException/;function Id(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const o=[],i=n.split(`
`);for(let a=r;a<i.length;a++){let c=i[a];c.length>1024&&(c=c.slice(0,1024));const u=Yc.test(c)?c.replace(Yc,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){o.push(l);break}}if(o.length>=vd+s)break}}return Vm(o.slice(s))}}function Gm(e){return Array.isArray(e)?Id(...e):e}function Vm(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(as(t).function||"")&&t.pop(),t.reverse(),Kc.test(as(t).function||"")&&(t.pop(),Kc.test(as(t).function||"")&&t.pop()),t.slice(0,vd).map(n=>({...n,filename:n.filename||as(t).filename,function:n.function||ft}))}function as(e){return e[e.length-1]||{}}const ai="<anonymous>";function kt(e){try{return!e||typeof e!="function"?ai:e.name||ai}catch{return ai}}function Di(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function wd(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}function Jm(e){let t=e?.startsWith("file://")?e.slice(7):e;return t?.match(/\/[A-Z]:/)&&(t=t.slice(1)),t}const ws={},Xc={};function Kt(e,t){ws[e]=ws[e]||[],ws[e].push(t)}function Xt(e,t){if(!Xc[e]){Xc[e]=!0;try{t()}catch(n){w&&m.error(`Error while instrumenting ${e}`,n)}}}function Ke(e,t){const n=e&&ws[e];if(n)for(const r of n)try{r(t)}catch(s){w&&m.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${kt(r)}
Error:`,s)}}let ci=null;function kd(e){const t="error";Kt(t,e),Xt(t,Ym)}function Ym(){ci=D.onerror,D.onerror=function(e,t,n,r,s){return Ke("error",{column:r,error:s,line:n,msg:e,url:t}),ci?ci.apply(this,arguments):!1},D.onerror.__SENTRY_INSTRUMENTED__=!0}let ui=null;function Cd(e){const t="unhandledrejection";Kt(t,e),Xt(t,Km)}function Km(){ui=D.onunhandledrejection,D.onunhandledrejection=function(e){return Ke("unhandledrejection",e),ui?ui.apply(this,arguments):!0},D.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Rd=Object.prototype.toString;function Tt(e){switch(Rd.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Ct(e,Error)}}function nr(e,t){return Rd.call(e)===`[object ${t}]`}function Ad(e){return nr(e,"ErrorEvent")}function Qc(e){return nr(e,"DOMError")}function Xm(e){return nr(e,"DOMException")}function rt(e){return nr(e,"String")}function wo(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Gt(e){return e===null||wo(e)||typeof e!="object"&&typeof e!="function"}function Ge(e){return nr(e,"Object")}function ko(e){return typeof Event<"u"&&Ct(e,Event)}function Qm(e){return typeof Element<"u"&&Ct(e,Element)}function Zm(e){return nr(e,"RegExp")}function rr(e){return!!(e?.then&&typeof e.then=="function")}function eg(e){return Ge(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Ct(e,t){try{return e instanceof t}catch{return!1}}function Md(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function Ra(e){return typeof Request<"u"&&Ct(e,Request)}const Aa=D,tg=80;function Be(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||tg;for(;n&&o++<r&&(u=ng(n,d),!(u==="html"||o>1&&i+s.length*c+u.length>=l));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function ng(e,t){const n=e,r=[];if(!n?.tagName)return"";if(Aa.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter(i=>n.getAttribute(i)).map(i=>[i,n.getAttribute(i)]):null;if(s?.length)s.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const i=n.className;if(i&&rt(i)){const a=i.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const o=["aria-label","type","name","title","alt"];for(const i of o){const a=n.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function Tn(){try{return Aa.document.location.href}catch{return""}}function xd(e){if(!Aa.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Ce(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&Nd(s,r);try{e[t]=s}catch{w&&m.log(`Failed to replace method "${t}" in object`,e)}}function Le(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{w&&m.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Nd(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Le(e,"__sentry_original__",t)}catch{}}function Ma(e){return e.__sentry_original__}function Od(e){if(Tt(e))return{message:e.message,name:e.name,stack:e.stack,...eu(e)};if(ko(e)){const t={type:e.type,target:Zc(e.target),currentTarget:Zc(e.currentTarget),...eu(e)};return typeof CustomEvent<"u"&&Ct(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Zc(e){try{return Qm(e)?Be(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function eu(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function rg(e){const t=Object.keys(Od(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}let Cn;function Ur(e){if(Cn!==void 0)return Cn?Cn(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=D;return t in n&&typeof n[t]=="function"?(Cn=n[t],Cn(e)):(Cn=null,e())}function vt(){return Ur(()=>Math.random())}function Br(){return Ur(()=>Date.now())}function Cr(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function li(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let o=Math.min(s+140,r);return o>r-5&&(o=r),o===r&&(s=Math.max(o-140,0)),n=n.slice(s,o),s>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function Gs(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Md(s)?n.push(wd(s)):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function ks(e,t,n=!1){return rt(e)?Zm(t)?t.test(e):rt(t)?n?e===t:e.includes(t):!1:!1}function st(e,t=[],n=!1){return t.some(r=>ks(e,r,n))}function sg(){const e=D;return e.crypto||e.msCrypto}let di;function og(){return vt()*16}function Ie(e=sg()){try{if(e?.randomUUID)return Ur(()=>e.randomUUID()).replace(/-/g,"")}catch{}return di||(di="10000000100040008000"+1e11),di.replace(/[018]/g,t=>(t^(og()&15)>>t/4).toString(16))}function Ld(e){return e.exception?.values?.[0]}function rn(e){const{message:t,event_id:n}=e;if(t)return t;const r=Ld(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Fi(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function Rt(e,t){const n=Ld(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const o={...s?.data,...t.data};n.mechanism.data=o}}function ig(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(i=>li(i,0));const o=Math.min(r-1,s);t.context_line=li(e[o],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(i=>li(i,0))}function tu(e){if(ag(e))return!0;try{Le(e,"__sentry_captured__",!0)}catch{}return!1}function ag(e){try{return e.__sentry_captured__}catch{}}const Pd=1e3;function vn(){return Br()/Pd}function cg(){const{performance:e}=D;if(!e?.now||!e.timeOrigin)return vn;const t=e.timeOrigin;return()=>(t+Ur(()=>e.now()))/Pd}let nu;function he(){return(nu??(nu=cg()))()}let fi=null;function ug(){const{performance:e}=D;if(!e?.now)return;const t=3e5,n=Ur(()=>e.now()),r=Br(),s=e.timeOrigin;if(typeof s=="number"&&Math.abs(s+n-r)<t)return s;const o=e.timing?.navigationStart;return typeof o=="number"&&Math.abs(o+n-r)<t?o:r-n}function Re(){return fi===null&&(fi=ug()),fi}function lg(e){const t=he(),n={sid:Ie(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>fg(n)};return e&&Wn(n,e),n}function Wn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||he(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Ie()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function dg(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),Wn(e,n)}function fg(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Hr(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Hr(r[s],t[s],n-1));return r}function pt(){return Ie()}function It(){return Ie().substring(16)}const $i="_sentrySpan";function ht(e,t){t?Le(e,$i,t):delete e[$i]}function jn(e){return e[$i]}const pg=100;class ot{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:pt(),sampleRand:vt()}}clone(){const t=new ot;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,t._conversationId=this._conversationId,ht(t,jn(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Wn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(t){return this._conversationId=t||void 0,this._notifyScopeListeners(),this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof ot?n.getScopeData():Ge(n)?t:void 0,{tags:s,attributes:o,extra:i,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l,conversationId:f}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),f&&(this._conversationId=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,ht(this,void 0),this._attachments=[],this.setPropagationContext({traceId:pt(),sampleRand:vt()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:pg;if(r<=0)return this;const s={timestamp:vn(),...t,message:t.message?Cr(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:jn(this),conversationId:this._conversationId}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Hr(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||Ie();if(!this._client)return w&&m.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||Ie();if(!this._client)return w&&m.warn("No client configured on scope - will not capture message!"),s;const o=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||Ie();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(w&&m.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function hg(){return tr("defaultCurrentScope",()=>new ot)}function mg(){return tr("defaultIsolationScope",()=>new ot)}class gg{constructor(t,n){let r;t?r=t:r=new ot;let s;n?s=n:s=new ot,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return rr(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function qn(){const e=xt(),t=$r(e);return t.stack=t.stack||new gg(hg(),mg())}function _g(e){return qn().withScope(e)}function yg(e,t){const n=qn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function ru(e){return qn().withScope(()=>e(qn().getIsolationScope()))}function Sg(){return{withIsolationScope:ru,withScope:_g,withSetScope:yg,withSetIsolationScope:(e,t)=>ru(t),getCurrentScope:()=>qn().getScope(),getIsolationScope:()=>qn().getIsolationScope()}}function Qt(e){const t=$r(e);return t.acs?t.acs:Sg()}function z(){const e=xt();return Qt(e).getCurrentScope()}function Ee(){const e=xt();return Qt(e).getIsolationScope()}function Un(){return tr("globalScope",()=>new ot)}function Ze(...e){const t=xt(),n=Qt(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function bg(...e){const t=xt(),n=Qt(t);if(e.length===2){const[r,s]=e;return r?n.withSetIsolationScope(r,s):n.withIsolationScope(s)}return n.withIsolationScope(e[0])}function C(){return z().getClient()}function Dd(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,o={trace_id:n,span_id:s||It()};return r&&(o.parent_span_id=r),o}const $e="sentry.source",Co="sentry.sample_rate",Fd="sentry.previous_trace_sample_rate",ve="sentry.op",re="sentry.origin",Rr="sentry.idle_span_finish_reason",Wr="sentry.measurement_unit",jr="sentry.measurement_value",Ui="sentry.custom_span_name",xa="sentry.profile_id",sr="sentry.exclusive_time",Eg="http.request.method",Tg="url.full",vg="sentry.link.type",Ig="gen_ai.conversation.id",wg=0,Ro=1,Q=2;function $d(e){if(e<400&&e>=100)return{code:Ro};if(e>=400&&e<500)switch(e){case 401:return{code:Q,message:"unauthenticated"};case 403:return{code:Q,message:"permission_denied"};case 404:return{code:Q,message:"not_found"};case 409:return{code:Q,message:"already_exists"};case 413:return{code:Q,message:"failed_precondition"};case 429:return{code:Q,message:"resource_exhausted"};case 499:return{code:Q,message:"cancelled"};default:return{code:Q,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:Q,message:"unimplemented"};case 503:return{code:Q,message:"unavailable"};case 504:return{code:Q,message:"deadline_exceeded"};default:return{code:Q,message:"internal_error"}}return{code:Q,message:"internal_error"}}function Ar(e,t){e.setAttribute("http.response.status_code",t);const n=$d(t);n.message!=="unknown_error"&&e.setStatus(n)}const Ud="_sentryScope",Bd="_sentryIsolationScope";function kg(e){try{const t=D.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function Cg(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Rg(e,t,n){e&&(Le(e,Bd,kg(n)),Le(e,Ud,t))}function Vs(e){const t=e;return{scope:t[Ud],isolationScope:Cg(t[Bd])}}const Na="sentry-",Ag=/^sentry-/,Mg=8192;function Oa(e){const t=xg(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,o])=>{if(s.match(Ag)){const i=s.slice(Na.length);r[i]=o}return r},{});if(Object.keys(n).length>0)return n}function Hd(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${Na}${r}`]=s),n),{});return Ng(t)}function xg(e){if(!(!e||!rt(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=su(n);return Object.entries(r).forEach(([s,o])=>{t[s]=o}),t},{}):su(e)}function su(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),s=t.slice(n+1);return[r,s].map(o=>{try{return decodeURIComponent(o.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function Ng(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,i=s===0?o:`${t},${o}`;return i.length>Mg?(w&&m.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):i},"")}const Og=/^o(\d+)\./,Lg=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function Pg(e){return e==="http"||e==="https"}function Nt(e,t=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${i}`}function Wd(e){const t=Lg.exec(e);if(!t){Yt(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",o="",i="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return jd({host:o,pass:s,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function jd(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Dg(e){if(!w)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(m.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:n.match(/^\d+$/)?Pg(r)?t&&isNaN(parseInt(t,10))?(m.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(m.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(m.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Fg(e){return e.match(Og)?.[1]}function qd(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=Fg(n)),r}function zd(e){const t=typeof e=="string"?Wd(e):jd(e);if(!(!t||!Dg(t)))return t}function fn(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Gd=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function $g(e){if(!e)return;const t=e.match(Gd);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Vd(e,t){const n=$g(e),r=Oa(t);if(!n?.traceId)return{traceId:pt(),sampleRand:vt()};const s=Ug(n,r);r&&(r.sample_rand=s.toString());const{traceId:o,parentSpanId:i,parentSampled:a}=n;return{traceId:o,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:s}}function Jd(e=pt(),t=It(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Yd(e=pt(),t=It(),n){return`00-${e}-${t}-${n?"01":"00"}`}function Ug(e,t){const n=fn(t?.sample_rand);if(n!==void 0)return n;const r=fn(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?vt()*r:r+vt()*(1-r):vt()}function Bg(e,t){const n=qd(e);return t&&n&&t!==n?(m.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(m.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}const Kd=0,La=1;let ou=!1;function Hg(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:o,status:i,origin:a,links:c}=j(e);return{parent_span_id:o,span_id:t,trace_id:n,data:r,op:s,status:i,origin:a,links:c}}function Xd(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:j(e).parent_span_id,o=Vs(e).scope,i=r?o?.getPropagationContext().propagationSpanId||It():t;return{parent_span_id:s,span_id:i,trace_id:n}}function Qd(e){const{traceId:t,spanId:n}=e.spanContext(),r=Zt(e);return Jd(t,n,r)}function Wg(e){const{traceId:t,spanId:n}=e.spanContext(),r=Zt(e);return Yd(t,n,r)}function Zd(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:o})=>({span_id:t,trace_id:n,sampled:r===La,attributes:o,...s}))}function un(e){return typeof e=="number"?iu(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?iu(e.getTime()):he()}function iu(e){return e>9999999999?e/1e3:e}function j(e){if(qg(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(jg(e)){const{attributes:r,startTime:s,name:o,endTime:i,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:o,parent_span_id:u,start_timestamp:un(s),timestamp:un(i)||void 0,status:ef(a),op:r[ve],origin:r[re],links:Zd(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function jg(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function qg(e){return typeof e.getSpanJSON=="function"}function Zt(e){const{traceFlags:t}=e.spanContext();return t===La}function ef(e){if(!(!e||e.code===wg))return e.code===Ro?"ok":e.message||"internal_error"}const ln="_sentryChildSpans",Bi="_sentryRootSpan";function tf(e,t){const n=e[Bi]||e;Le(t,Bi,n),e[ln]?e[ln].add(t):Le(e,ln,new Set([t]))}function zg(e,t){e[ln]&&e[ln].delete(t)}function Er(e){const t=new Set;function n(r){if(!t.has(r)&&Zt(r)){t.add(r);const s=r[ln]?Array.from(r[ln]):[];for(const o of s)n(o)}}return n(e),Array.from(t)}function Se(e){return e[Bi]||e}function be(){const e=xt(),t=Qt(e);return t.getActiveSpan?t.getActiveSpan():jn(z())}function Hi(){ou||(Yt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),ou=!0)}function Gg(e,t){e.updateName(t),e.setAttributes({[$e]:"custom",[Ui]:t})}let au=!1;function nf(){if(au)return;function e(){const t=be(),n=t&&Se(t);if(n){const r="internal_error";w&&m.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:Q,message:r})}}e.tag="sentry_tracingErrorCallback",au=!0,kd(e),Cd(e)}function Xe(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||C()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function cu(e){m.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Js(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(Jg(n)){if(ks(e.description,n))return w&&cu(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?ks(e.description,n.name):!0,s=n.op?e.op&&ks(e.op,n.op):!0;if(r&&s)return w&&cu(e),!0}return!1}function Vg(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const s of e)s.parent_span_id===r&&(s.parent_span_id=n)}function Jg(e){return typeof e=="string"||e instanceof RegExp}const Ao="production",rf="_frozenDsc";function Cs(e,t){Le(e,rf,t)}function sf(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||Ao,release:n.release,public_key:r,trace_id:e,org_id:qd(t)};return t.emit("createDsc",s),s}function Pa(e,t){const n=t.getPropagationContext();return n.dsc||sf(n.traceId,e)}function it(e){const t=C();if(!t)return{};const n=Se(e),r=j(n),s=r.data,o=n.spanContext().traceState,i=o?.get("sentry.sample_rate")??s[Co]??s[Fd];function a(h){return(typeof i=="number"||typeof i=="string")&&(h.sample_rate=`${i}`),h}const c=n[rf];if(c)return a(c);const u=o?.get("sentry.dsc"),d=u&&Oa(u);if(d)return a(d);const l=sf(e.spanContext().traceId,t),f=s[$e],p=r.description;return f!=="url"&&p&&(l.transaction=p),Xe()&&(l.sampled=String(Zt(n)),l.sample_rand=o?.get("sentry.sample_rand")??Vs(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function Yg(e){const t=it(e);return Hd(t)}class At{constructor(t={}){this._traceId=t.traceId||pt(),this._spanId=t.spanId||It()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Kd}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function je(e,t=100,n=1/0){try{return Wi("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function of(e,t=3,n=100*1024){const r=je(e,t);return Zg(r)>n?of(e,t-1,n):r}function Wi(e,t,n=1/0,r=1/0,s=e_()){const[o,i]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Kg(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Wi("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=Od(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=Wi(p,h,c-1,r,s),l++}return i(t),d}function Kg(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Md(t))return wd(t);if(eg(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${kt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Xg(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Xg(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function Qg(e){return~-encodeURI(e).split(/%..|./).length}function Zg(e){return Qg(JSON.stringify(e))}function e_(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function at(e,t=[]){return[e,t]}function t_(e,t){const[n,r]=e;return[n,[...r,t]]}function pn(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function ji(e,t){return pn(e,(n,r)=>t.includes(r))}function Ys(e){const t=$r(D);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function n_(e){const t=$r(D);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Ks(e){const[t,n]=e;let r=JSON.stringify(t);function s(o){typeof r=="string"?r=typeof o=="string"?r+o:[Ys(r),o]:r.push(typeof o=="string"?Ys(o):o)}for(const o of n){const[i,a]=o;if(s(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(je(a))}s(c)}}return typeof r=="string"?r:r_(r)}function r_(e){const t=e.reduce((s,o)=>s+o.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function s_(e){let t=typeof e=="string"?Ys(e):e;function n(i){const a=t.subarray(0,i);return t=t.subarray(i+1),a}function r(){let i=t.indexOf(10);return i<0&&(i=t.length),JSON.parse(n_(n(i)))}const s=r(),o=[];for(;t.length;){const i=r(),a=typeof i.length=="number"?i.length:void 0;o.push([i,a?n(a):r()])}return[s,o]}function o_(e){return[{type:"span"},e]}function i_(e){const t=typeof e.data=="string"?Ys(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const a_={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function uu(e){return a_[e]}function Mo(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function af(e,t,n,r){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Nt(r)},...s&&{trace:s}}}function c_(e,t){if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function u_(e,t,n,r){const s=Mo(n),o={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Nt(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return at(o,[i])}function l_(e,t,n,r){const s=Mo(n),o=e.type&&e.type!=="replay_event"?e.type:"event";c_(e,n?.sdk);const i=af(e,s,r,t);return delete e.sdkProcessingMetadata,at(i,[[{type:o},e]])}function d_(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=it(e[0]),s=t?.getDsn(),o=t?.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!o&&s&&{dsn:Nt(s)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(p=>!Js(j(p),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);const l=a?p=>{const h=j(p),g=a(h);return g||(Hi(),h)}:j,f=[];for(const p of u){const h=l(p);h&&f.push(o_(h))}return at(i,f)}function f_(e){if(!w)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=j(e),{spanId:s}=e.spanContext(),o=Zt(e),i=Se(e),a=i===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=j(i);u.push(`root ID: ${i.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}m.log(`${c}
  ${u.join(`
  `)}`)}function p_(e){if(!w)return;const{description:t="< unknown name >",op:n="< unknown op >"}=j(e),{spanId:r}=e.spanContext(),o=Se(e)===e,i=`[Tracing] Finishing "${n}" ${o?"root ":""}span "${t}" with ID ${r}`;m.log(i)}function cf(e,t,n,r=be()){const s=r&&Se(r);s&&(w&&m.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[jr]:t,[Wr]:n}))}function lu(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Wr],o=r[jr];typeof s=="string"&&typeof o=="number"&&(t[n.name]={value:o,unit:s})}),t}const du=1e3;class xo{constructor(t={}){this._traceId=t.traceId||pt(),this._spanId=t.spanId||It(),this._startTime=t.startTimestamp||he(),this._links=t.links,this._attributes={},this.setAttributes({[re]:"manual",[ve]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?La:Kd}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=un(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute($e,"custom"),this}end(t){this._endTime||(this._endTime=un(t),p_(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[ve],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:ef(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[re],profile_id:this._attributes[xa],exclusive_time:this._attributes[sr],measurements:lu(this._events),is_segment:this._isStandaloneSpan&&Se(this)===this||void 0,segment_id:this._isStandaloneSpan?Se(this).spanContext().spanId:void 0,links:Zd(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){w&&m.log("[Tracing] Adding an event to span:",t);const s=fu(n)?n:r||he(),o=fu(n)?{}:n||{},i={name:t,time:un(s),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=C();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Se(this)))return;if(this._isStandaloneSpan){this._sampled?m_(d_([this],t)):(w&&m.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Vs(this).scope||z()).captureEvent(r)}_convertSpanToTransaction(){if(!pu(j(this)))return;this._name||(w&&m.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Vs(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const o=Er(this).filter(d=>d!==this&&!h_(d)).map(d=>j(d)).filter(pu),i=this._attributes[$e];delete this._attributes[Ui],o.forEach(d=>{delete d.data[Ui]});const a={contexts:{trace:Hg(this)},spans:o.length>du?o.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,du):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:it(this)},request:r,...i&&{transaction_info:{source:i}}},c=lu(this._events);return c&&Object.keys(c).length&&(w&&m.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function fu(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function pu(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function h_(e){return e instanceof xo&&e.isStandaloneSpan()}function m_(e){const t=C();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function No(e,t,n=()=>{},r=()=>{}){let s;try{s=e()}catch(o){throw t(o),n(),o}return g_(s,t,n,r)}function g_(e,t,n,r){return rr(e)?e.then(s=>(n(),r(s),s),s=>{throw t(s),n(),s}):(n(),r(e),e)}function __(e,t,n){if(!Xe(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const o=fn(s);if(o===void 0)return w&&m.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!o)return w&&m.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,r];const i=n<o;return i||w&&m.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[i,o,r]}const Xs="__SENTRY_SUPPRESS_TRACING__";function Ot(e,t){const n=zr();if(n.startSpan)return n.startSpan(e,t);const r=Fa(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i?.clone();return Ze(a,()=>df(o)(()=>{const u=z(),d=$a(u,o),f=e.onlyIfParent&&!d?new At:Da({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return ht(u,f),No(()=>t(f),()=>{const{status:p}=j(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Q,message:"internal_error"})},()=>{f.end()})}))}function St(e,t){const n=zr();if(n.startSpanManual)return n.startSpanManual(e,t);const r=Fa(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i?.clone();return Ze(a,()=>df(o)(()=>{const u=z(),d=$a(u,o),f=e.onlyIfParent&&!d?new At:Da({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return ht(u,f),No(()=>t(f,()=>f.end()),()=>{const{status:p}=j(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Q,message:"internal_error"})})}))}function In(e){const t=zr();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=Fa(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?i=>Ze(e.scope,i):s!==void 0?i=>qr(s,i):i=>i())(()=>{const i=z(),a=$a(i,s);return e.onlyIfParent&&!a?new At:Da({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}const y_=(e,t)=>{const n=xt(),r=Qt(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:o}=e,i=C(),a=Oa(o);return i&&!Bg(i,a?.org_id)?lf(t):Ze(c=>{const u=Vd(s,o);return c.setPropagationContext(u),ht(c,void 0),t()})};function qr(e,t){const n=zr();return n.withActiveSpan?n.withActiveSpan(e,t):Ze(r=>(ht(r,e||void 0),t(r)))}function uf(e){const t=zr();return t.suppressTracing?t.suppressTracing(e):Ze(n=>{n.setSDKProcessingMetadata({[Xs]:!0});const r=e();return n.setSDKProcessingMetadata({[Xs]:void 0}),r})}function lf(e){return Ze(t=>(t.setPropagationContext({traceId:pt(),sampleRand:vt()}),w&&m.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),qr(null,e)))}function Da({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Xe()){const i=new At;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...it(i)};Cs(i,a)}return i}const s=Ee();let o;if(e&&!n)o=S_(e,r,t),tf(e,o);else if(e){const i=it(e),{traceId:a,spanId:c}=e.spanContext(),u=Zt(e);o=hu({traceId:a,parentSpanId:c,...t},r,u),Cs(o,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};o=hu({traceId:i,parentSpanId:c,...t},r,u),a&&Cs(o,a)}return f_(o),Rg(o,r,s),o}function Fa(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=un(e.startTime),delete r.startTime,r}return n}function zr(){const e=xt();return Qt(e)}function hu(e,t,n){const r=C(),s=r?.getOptions()||{},{name:o=""}=e,i={spanAttributes:{...e.attributes},spanName:o,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??n,c=i.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[Xs]?[!1]:__(s,{name:o,parentSampled:a,attributes:c,parentSampleRate:fn(u.dsc?.sample_rate)},u.sampleRand),p=new xo({...e,attributes:{[$e]:"custom",[Co]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(w&&m.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function S_(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[Xs]?!1:Zt(e),i=o?new xo({...n,parentSpanId:r,traceId:s,sampled:o}):new At({traceId:s});tf(e,i);const a=C();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function $a(e,t){if(t)return t;if(t===null)return;const n=jn(e);if(!n)return;const r=C();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Se(n):n}function df(e){return e!==void 0?t=>qr(e,t):t=>t()}const Rs={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},b_="heartbeatFailed",E_="idleTimeout",T_="finalTimeout",v_="externalFinish";function ff(e,t={}){const n=new Map;let r=!1,s,o=v_,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=Rs.idleTimeout,finalTimeout:u=Rs.finalTimeout,childSpanTimeout:d=Rs.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=C();if(!p||!Xe()){const S=new At,A={sample_rate:"0",sampled:"false",...it(S)};return Cs(S,A),S}const h=z(),g=be(),_=I_(e);_.end=new Proxy(_.end,{apply(S,A,F){if(l&&l(_),A instanceof At)return;const[E,...M]=F,k=E||he(),x=un(k),P=Er(_).filter(I=>I!==_),Z=j(_);if(!P.length||!f)return L(x),Reflect.apply(S,A,[x,...M]);const Y=p.getOptions().ignoreSpans,te=P?.reduce((I,G)=>{const oe=j(G);return!oe.timestamp||Y&&Js(oe,Y)?I:I?Math.max(I,oe.timestamp):oe.timestamp},void 0),T=Z.start_timestamp,W=Math.min(T?T+u/1e3:1/0,Math.max(T||-1/0,Math.min(x,te||1/0)));return L(W),Reflect.apply(S,A,[W,...M])}});function y(){s&&(clearTimeout(s),s=void 0)}function b(S){y(),s=setTimeout(()=>{!r&&n.size===0&&i&&(o=E_,_.end(S))},c)}function N(S){s=setTimeout(()=>{!r&&i&&(o=b_,_.end(S))},d)}function R(S){y(),n.set(S,!0);const A=he();N(A+d/1e3)}function $(S){if(n.has(S)&&n.delete(S),n.size===0){const A=he();b(A+c/1e3)}}function L(S){r=!0,n.clear(),a.forEach(P=>P()),ht(h,g);const A=j(_),{start_timestamp:F}=A;if(!F)return;A.data[Rr]||_.setAttribute(Rr,o);const M=A.status;(!M||M==="unknown")&&_.setStatus({code:Ro}),m.log(`[Tracing] Idle span "${A.op}" finished`);const k=Er(_).filter(P=>P!==_);let x=0;k.forEach(P=>{P.isRecording()&&(P.setStatus({code:Q,message:"cancelled"}),P.end(S),w&&m.log("[Tracing] Cancelling span since span ended early",JSON.stringify(P,void 0,2)));const Z=j(P),{timestamp:Y=0,start_timestamp:te=0}=Z,T=te<=S,W=(u+c)/1e3,I=Y-te<=W;if(w){const G=JSON.stringify(P,void 0,2);T?I||m.log("[Tracing] Discarding span since it finished after idle span final timeout",G):m.log("[Tracing] Discarding span since it happened after idle span was finished",G)}(!I||!T)&&(zg(_,P),x++)}),x>0&&_.setAttribute("sentry.idle_span_discarded_spans",x)}return a.push(p.on("spanStart",S=>{if(r||S===_||j(S).timestamp||S instanceof xo&&S.isStandaloneSpan())return;Er(_).includes(S)&&R(S.spanContext().spanId)})),a.push(p.on("spanEnd",S=>{r||$(S.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",S=>{S===_&&(i=!0,b(),n.size&&N())})),t.disableAutoFinish||b(),setTimeout(()=>{r||(_.setStatus({code:Q,message:"deadline_exceeded"}),o=T_,_.end())},u),_}function I_(e){const t=In(e);return ht(z(),t),w&&m.log("[Tracing] Started span is an idle span"),t}const pi=0,mu=1,gu=2;function Oo(e){return new Mr(t=>{t(e)})}function Ua(e){return new Mr((t,n)=>{n(e)})}class Mr{constructor(t){this._state=pi,this._handlers=[],this._runExecutor(t)}then(t,n){return new Mr((r,s)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(i){s(i)}},o=>{if(!n)s(o);else try{r(n(o))}catch(i){s(i)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Mr((n,r)=>{let s,o;return this.then(i=>{o=!1,s=i,t&&t()},i=>{o=!0,s=i,t&&t()}).then(()=>{if(o){r(s);return}n(s)})})}_executeHandlers(){if(this._state===pi)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===mu&&n[1](this._value),this._state===gu&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(o,i)=>{if(this._state===pi){if(rr(i)){i.then(r,s);return}this._state=o,this._value=i,this._executeHandlers()}},r=o=>{n(mu,o)},s=o=>{n(gu,o)};try{t(r,s)}catch(o){s(o)}}}function w_(e,t,n,r=0){try{const s=qi(t,n,e,r);return rr(s)?s:Oo(s)}catch(s){return Ua(s)}}function qi(e,t,n,r){const s=n[r];if(!e||!s)return e;const o=s({...e},t);return w&&o===null&&m.log(`Event processor "${s.id||"?"}" dropped event`),rr(o)?o.then(i=>qi(i,t,n,r+1)):qi(o,t,n,r+1)}let tn,_u,yu,Ft;function pf(e){const t=D._sentryDebugIds,n=D._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],s=n?Object.keys(n):[];if(Ft&&r.length===_u&&s.length===yu)return Ft;_u=r.length,yu=s.length,Ft={},tn||(tn={});const o=(i,a)=>{for(const c of i){const u=a[c],d=tn?.[c];if(d&&Ft&&u)Ft[d[0]]=u,tn&&(tn[c]=[d[0],u]);else if(u){const l=e(c);for(let f=l.length-1;f>=0;f--){const h=l[f]?.filename;if(h&&Ft&&tn){Ft[h]=u,tn[c]=[h,u];break}}}}};return t&&o(r,t),n&&o(s,n),Ft}function k_(e,t){const n=pf(e);if(!n)return[];const r=[];for(const s of t){const o=Jm(s);o&&n[o]&&r.push({type:"sourcemap",code_file:s,debug_id:n[o]})}return r}function C_(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=t;R_(e,t),r&&x_(e,r),N_(e,n),A_(e,s),M_(e,o)}function Su(e,t){const{extra:n,tags:r,attributes:s,user:o,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:l,attachments:f,propagationContext:p,transactionName:h,span:g}=t;hr(e,"extra",n),hr(e,"tags",r),hr(e,"attributes",s),hr(e,"user",o),hr(e,"contexts",i),e.sdkProcessingMetadata=Hr(e.sdkProcessingMetadata,c,2),a&&(e.level=a),h&&(e.transactionName=h),g&&(e.span=g),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...p}}function hr(e,t,n){e[t]=Hr(e[t],n,1)}function Ba(e,t){const n=Un().getScopeData();return e&&Su(n,e.getScopeData()),t&&Su(n,t.getScopeData()),n}function R_(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(o).length&&(e.contexts={...o,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function A_(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function M_(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function x_(e,t){e.contexts={trace:Xd(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:it(t),...e.sdkProcessingMetadata};const n=Se(t),r=j(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function N_(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function hf(e,t,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Ie(),timestamp:t.timestamp||vn()},u=n.integrations||e.integrations.map(_=>_.name);O_(c,e),D_(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&L_(c,e.stackParser);const d=$_(r,n.captureContext);n.mechanism&&Rt(c,n.mechanism);const l=s?s.getEventProcessors():[],f=Ba(o,d),p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),C_(c,f);const h=[...l,...f.eventProcessors];return w_(h,c,n).then(_=>(_&&P_(_),typeof i=="number"&&i>0?F_(_,i,a):_))}function O_(e,t){const{environment:n,release:r,dist:s,maxValueLength:o}=t;e.environment=e.environment||n||Ao,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const i=e.request;i?.url&&o&&(i.url=Cr(i.url,o)),o&&e.exception?.values?.forEach(a=>{a.value&&(a.value=Cr(a.value,o))})}function L_(e,t){const n=pf(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=n[s.filename])})})}function P_(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function D_(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function F_(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:je(s.data,t,n)}}))},...e.user&&{user:je(e.user,t,n)},...e.contexts&&{contexts:je(e.contexts,t,n)},...e.extra&&{extra:je(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=je(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:je(s.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=je(e.contexts.flags,3,n)),r}function $_(e,t){if(!t)return e;const n=e?e.clone():new ot;return n.update(t),n}function U_(e){if(e)return B_(e)?{captureContext:e}:W_(e)?{captureContext:e}:e}function B_(e){return e instanceof ot||typeof e=="function"}const H_=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function W_(e){return Object.keys(e).some(t=>H_.includes(t))}function me(e,t){return z().captureException(e,U_(t))}function mf(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return z().captureMessage(e,n,r)}function or(e,t){return z().captureEvent(e,t)}function gf(e,t){Ee().setContext(e,t)}function j_(e){Ee().setExtras(e)}function q_(e,t){Ee().setExtra(e,t)}function z_(e){Ee().setTags(e)}function G_(e,t){Ee().setTag(e,t)}function V_(e){Ee().setUser(e)}function _f(){return Ee().lastEventId()}async function J_(e){const t=C();return t?t.flush(e):(w&&m.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Y_(e){const t=C();return t?t.close(e):(w&&m.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function K_(){return!!C()}function yf(){const e=C();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function Sf(e){Ee().addEventProcessor(e)}function zi(e){const t=Ee(),n=z(),{userAgent:r}=D.navigator||{},s=lg({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return o?.status==="ok"&&Wn(o,{status:"exited"}),Ha(),t.setSession(s),s}function Ha(){const e=Ee(),n=z().getSession()||e.getSession();n&&dg(n),bf(),e.setSession()}function bf(){const e=Ee(),t=C(),n=e.getSession();n&&t&&t.captureSession(n)}function Gi(e=!1){if(e){Ha();return}bf()}const X_="7";function Ef(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Q_(e){return`${Ef(e)}${e.projectId}/envelope/`}function Z_(e,t){const n={sentry_version:X_};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function Tf(e,t,n){return t||`${Q_(e)}?${Z_(e,n)}`}function ey(e,t){const n=zd(e);if(!n)return"";const r=`${Ef(n)}embed/error-page/`;let s=`dsn=${Nt(n)}`;for(const o in t)if(o!=="dsn"&&o!=="onClose")if(o==="user"){const i=t.user;if(!i)continue;i.name&&(s+=`&name=${encodeURIComponent(i.name)}`),i.email&&(s+=`&email=${encodeURIComponent(i.email)}`)}else s+=`&${encodeURIComponent(o)}=${encodeURIComponent(t[o])}`;return`${r}?${s}`}const bu=[];function ty(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function ny(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return ty(r)}function ry(e,t){const n={};return t.forEach(r=>{r&&vf(e,r,n)}),n}function Eu(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function vf(e,t,n){if(n[t.name]){w&&m.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!bu.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),bu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,o)=>r(s,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((o,i)=>r(o,i,e),{id:t.name});e.addEventProcessor(s)}w&&m.log(`Integration installed: ${t.name}`)}function Vi(e){const t=C();if(!t){w&&m.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function sy(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function oy(e,t){const{value:n,unit:r}=sy(e)?e:{value:e,unit:void 0},s=iy(n),o=r&&typeof r=="string"?{unit:r}:{};if(s)return{...s,...o};if(!t||t==="skip-undefined"&&n===void 0)return;let i="";try{i=JSON.stringify(n)??""}catch{}return{value:i,type:"string",...o}}function Qs(e,t=!1){const n={};for(const[r,s]of Object.entries(e??{})){const o=oy(s,t);o&&(n[r]=o)}return n}function iy(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function If(e,t){return t?Ze(t,()=>{const n=be(),r=n?Xd(n):Dd(t);return[n?it(n):Pa(e,t),r]}):[void 0,void 0]}const ay={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function cy(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function uy(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Nt(r)),at(s,[cy(e)])}const ly=100;function lt(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function dy(e,t){const n=ja(),r=wf(e);r===void 0?n.set(e,[t]):r.length>=ly?(Wa(e,r),n.set(e,[t])):n.set(e,[...r,t])}function Zs(e,t=z(),n=dy){const r=t?.getClient()??C();if(!r){w&&m.warn("No client available to capture log.");return}const{release:s,environment:o,enableLogs:i=!1,beforeSendLog:a}=r.getOptions();if(!i){w&&m.warn("logging option not enabled, log will not be captured.");return}const[,c]=If(r,t),u={...e.attributes},{user:{id:d,email:l,username:f},attributes:p={}}=Ba(Ee(),t);lt(u,"user.id",d,!1),lt(u,"user.email",l,!1),lt(u,"user.name",f,!1),lt(u,"sentry.release",s),lt(u,"sentry.environment",o);const{name:h,version:g}=r.getSdkMetadata()?.sdk??{};lt(u,"sentry.sdk.name",h),lt(u,"sentry.sdk.version",g);const _=r.getIntegrationByName("Replay"),y=_?.getReplayId(!0);lt(u,"sentry.replay_id",y),y&&_?.getRecordingMode()==="buffer"&&lt(u,"sentry._internal.replay_is_buffering",!0);const b=e.message;if(wo(b)){const{__sentry_template_string__:M,__sentry_template_values__:k=[]}=b;k?.length&&(u["sentry.message.template"]=M),k.forEach((x,P)=>{u[`sentry.message.parameter.${P}`]=x})}const N=jn(t);lt(u,"sentry.trace.parent_span_id",N?.spanContext().spanId);const R={...e,attributes:u};r.emit("beforeCaptureLog",R);const $=a?Yt(()=>a(R)):R;if(!$){r.recordDroppedEvent("before_send","log_item",1),w&&m.warn("beforeSendLog returned null, log will not be captured.");return}const{level:L,message:S,attributes:A={},severityNumber:F}=$,E={timestamp:he(),level:L,body:S,trace_id:c?.trace_id,severity_number:F??ay[L],attributes:{...Qs(p),...Qs(A,!0)}};n(r,E),r.emit("afterCaptureLog",$)}function Wa(e,t){const n=t??wf(e)??[];if(n.length===0)return;const r=e.getOptions(),s=uy(n,r._metadata,r.tunnel,e.getDsn());ja().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function wf(e){return ja().get(e)}function ja(){return tr("clientToLogBufferMap",()=>new WeakMap)}function fy(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function py(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Nt(r)),at(s,[fy(e)])}const hy=1e3;function _t(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function my(e,t){const n=za(),r=kf(e);r===void 0?n.set(e,[t]):r.length>=hy?(qa(e,r),n.set(e,[t])):n.set(e,[...r,t])}function gy(e,t,n){const{release:r,environment:s}=t.getOptions(),o={...e.attributes};_t(o,"user.id",n.id,!1),_t(o,"user.email",n.email,!1),_t(o,"user.name",n.username,!1),_t(o,"sentry.release",r),_t(o,"sentry.environment",s);const{name:i,version:a}=t.getSdkMetadata()?.sdk??{};_t(o,"sentry.sdk.name",i),_t(o,"sentry.sdk.version",a);const c=t.getIntegrationByName("Replay"),u=c?.getReplayId(!0);return _t(o,"sentry.replay_id",u),u&&c?.getRecordingMode()==="buffer"&&_t(o,"sentry._internal.replay_is_buffering",!0),{...e,attributes:o}}function _y(e,t,n,r){const[,s]=If(t,n),o=jn(n),i=o?o.spanContext().traceId:s?.trace_id,a=o?o.spanContext().spanId:void 0;return{timestamp:he(),trace_id:i??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:{...Qs(r),...Qs(e.attributes,"skip-undefined")}}}function yy(e,t){const n=t?.scope??z(),r=t?.captureSerializedMetric??my,s=n?.getClient()??C();if(!s){w&&m.warn("No client available to capture metric.");return}const{_experiments:o,enableMetrics:i,beforeSendMetric:a}=s.getOptions();if(!(i??o?.enableMetrics??!0)){w&&m.warn("metrics option not enabled, metric will not be captured.");return}const{user:u,attributes:d}=Ba(Ee(),n),l=gy(e,s,u);s.emit("processMetric",l);const f=a||o?.beforeSendMetric,p=f?f(l):l;if(!p){w&&m.log("`beforeSendMetric` returned `null`, will not send metric.");return}const h=_y(p,s,n,d);w&&m.log("[Metric]",h),r(s,h),s.emit("afterCaptureMetric",p)}function qa(e,t){const n=t??kf(e)??[];if(n.length===0)return;const r=e.getOptions(),s=py(n,r._metadata,r.tunnel,e.getDsn());za().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(s)}function kf(e){return za().get(e)}function za(){return tr("clientToMetricBufferMap",()=>new WeakMap)}const Ga=Symbol.for("SentryBufferFullError");function Va(e=100){const t=new Set;function n(){return t.size<e}function r(i){t.delete(i)}function s(i){if(!n())return Ua(Ga);const a=i();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function o(i){if(!t.size)return Oo(!0);const a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!i)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),i))];return Promise.race(c)}return{get $(){return Array.from(t)},add:s,drain:o}}const Sy=60*1e3;function Cf(e,t=Br()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Sy:r-t}function by(e,t){return e[t]||e.all||0}function Rf(e,t,n=Br()){return by(e,t)>n}function Af(e,{statusCode:t,headers:n},r=Br()){const s={...e},o=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(o)for(const a of o.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else i?s.all=r+Cf(i,r):t===429&&(s.all=r+60*1e3);return s}const Mf=64;function xf(e,t,n=Va(e.bufferSize||Mf)){let r={};const s=i=>n.drain(i);function o(i){const a=[];if(pn(i,(l,f)=>{const p=uu(f);Rf(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});const c=at(i[0],a),u=l=>{if(ji(c,["client_report"])){w&&m.warn(`Dropping client report. Will not send outcomes (reason: ${l}).`);return}pn(c,(f,p)=>{e.recordDroppedEvent(l,uu(p))})},d=()=>t({body:Ks(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&w&&m.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Af(r,l),l),l=>{throw u("network_error"),w&&m.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===Ga)return w&&m.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:o,flush:s}}function Ey(e,t,n){const r=[{type:"client_report"},{timestamp:vn(),discarded_events:e}];return at(t?{dsn:t}:{},[r])}function Nf(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Ty(e){const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:o,data:i,op:a}=e.contexts?.trace??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:i?.[xa],exclusive_time:i?.[sr],measurements:e.measurements,is_segment:!0}}function vy(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[xa]:e.profile_id},...e.exclusive_time&&{[sr]:e.exclusive_time}}}},measurements:e.measurements}}const Tu="Not capturing exception because it's already been captured.",vu="Discarded session because of missing or non-string release",Of=Symbol.for("SentryInternalError"),Lf=Symbol.for("SentryDoNotSendEventError"),Iy=5e3;function As(e){return{message:e,[Of]:!0}}function hi(e){return{message:e,[Lf]:!0}}function Iu(e){return!!e&&typeof e=="object"&&Of in e}function wu(e){return!!e&&typeof e=="object"&&Lf in e}function ku(e,t,n,r,s){let o=0,i,a=!1;e.on(n,()=>{o=0,clearTimeout(i),a=!1}),e.on(t,c=>{o+=r(c),o>=8e5?s(e):a||(a=!0,i=setTimeout(()=>{s(e)},Iy))}),e.on("flush",()=>{s(e)})}class wy{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Va(t.transportOptions?.bufferSize??Mf),t.dsn?this._dsn=zd(t.dsn):w&&m.warn("No DSN provided, client will not send events."),this._dsn){const r=Tf(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&ku(this,"afterCaptureLog","flushLogs",Ay,Wa),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&ku(this,"afterCaptureMetric","flushMetrics",Ry,qa)}captureException(t,n,r){const s=Ie();if(tu(t))return w&&m.log(Tu),s;const o={event_id:s,...n};return this._process(()=>this.eventFromException(t,o).then(i=>this._captureEvent(i,o,r)).then(i=>i),"error"),o.event_id}captureMessage(t,n,r,s){const o={event_id:Ie(),...r},i=wo(t)?t:String(t),a=Gt(t),c=a?this.eventFromMessage(i,n,o):this.eventFromException(t,o);return this._process(()=>c.then(u=>this._captureEvent(u,o,s)),a?"unknown":"error"),o.event_id}captureEvent(t,n,r){const s=Ie();if(n?.originalException&&tu(n.originalException))return w&&m.log(Tu),s;const o={event_id:s,...n},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope,u=Cu(t.type);return this._process(()=>this._captureEvent(t,o,a||r,c),u),o.event_id}captureSession(t){this.sendSession(t),Wn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),s=await n.flush(t);return r&&s}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];vf(this,t,this._integrations),n||Eu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=l_(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=t_(r,i_(s));this.sendEnvelope(r).then(s=>this.emit("afterSendEvent",t,s))}sendSession(t){const{release:n,environment:r=Ao}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!n){w&&m.warn(vu);return}o.release=o.release||n,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!n){w&&m.warn(vu);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=u_(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;w&&m.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,s=(...o)=>n(...o);return r.add(s),()=>{r.delete(s)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return w&&m.error("Error while sending envelope:",n),{}}return w&&m.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=ry(this,t),Eu(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",s=!1;const o=n.exception?.values;if(o){s=!0,r=!1;for(const c of o)if(c.mechanism?.handled===!1){r=!0;break}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(Wn(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const o=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i?.length&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),hf(o,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Dd(r),...a.contexts};const c=Pa(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=z(),s=Ee()){return w&&Ji(t)&&m.log(`Captured error event \`${Nf(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(o=>o.event_id,o=>{w&&(wu(o)?m.log(o.message):Iu(o)?m.warn(o.message):m.warn(o))})}_processEvent(t,n,r,s){const o=this.getOptions(),{sampleRate:i}=o,a=Pf(t),c=Ji(t),d=`before send for type \`${t.type||"error"}\``,l=typeof i>"u"?void 0:fn(i);if(c&&typeof l=="number"&&vt()>l)return this.recordDroppedEvent("sample_rate","error"),Ua(hi(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const f=Cu(t.type);return this._prepareEvent(t,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),hi("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const g=Cy(this,o,p,n);return ky(g,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw hi(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const _=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,y=p.spans?p.spans.length:0,b=_-y;b>0&&this.recordDroppedEvent("before_send","span",b)}const g=p.transaction_info;if(a&&g&&p.transaction!==t.transaction){const _="custom";p.transaction_info={...g,source:_}}return this.sendEvent(p,n),p}).then(null,p=>{throw wu(p)||Iu(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),As(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===Ga&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,o]=n.split(":");return{reason:s,category:o,quantity:r}})}_flushOutcomes(){w&&m.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){w&&m.log("No outcomes to send");return}if(!this._dsn){w&&m.log("No dsn provided, will not send outcomes");return}w&&m.log("Sending outcomes:",t);const n=Ey(t,this._options.tunnel&&Nt(this._dsn));this.sendEnvelope(n)}}function Cu(e){return e==="replay_event"?"replay":e||"error"}function ky(e,t){const n=`${t} must return \`null\` or a valid event.`;if(rr(e))return e.then(r=>{if(!Ge(r)&&r!==null)throw As(n);return r},r=>{throw As(`${t} rejected with ${r}`)});if(!Ge(e)&&e!==null)throw As(n);return e}function Cy(e,t,n,r){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:i,ignoreSpans:a}=t;let c=n;if(Ji(c)&&s)return s(c,r);if(Pf(c)){if(i||a){const u=Ty(c);if(a?.length&&Js(u,a))return null;if(i){const d=i(u);d?c=Hr(n,vy(d)):Hi()}if(c.spans){const d=[],l=c.spans;for(const p of l){if(a?.length&&Js(p,a)){Vg(l,p);continue}if(i){const h=i(p);h?d.push(h):(Hi(),d.push(p))}else d.push(p)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(o){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return o(c,r)}}return c}function Ji(e){return e.type===void 0}function Pf(e){return e.type==="transaction"}function Ry(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+Df(e.attributes)}function Ay(e){let t=0;return e.message&&(t+=e.message.length*2),t+Df(e.attributes)}function Df(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*Ru(n[0]):Gt(n)?t+=Ru(n):t+=100}),t}function Ru(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function My(e){return Tt(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function Au(e){return My(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function xy(e,t){t.debug===!0&&(w?m.enable():Yt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),z().update(t.initialScope);const r=new e(t);return Ff(r),r.init(),r}function Ff(e){z().setClient(e)}const mi=100,gi=5e3,Ny=36e5;function Oy(e){function t(...n){w&&m.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let o=gi,i;function a(l,f,p){return ji(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const f=await s.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof i!="number"&&i.unref&&i.unref()}function u(){i||(c(o),o=Math.min(o*2,Ny))}async function d(l,f=!1){if(!f&&ji(l,["replay_event","replay_recording"]))return await s.push(l),c(mi),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const p=await r.send(l);let h=mi;if(p){if(p.headers?.["retry-after"])h=Cf(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])h=6e4;else if((p.statusCode||0)>=400)return p}return c(h),o=gi,p}catch(p){if(await a(l,p,o))return f?await s.unshift(l):await s.push(l),u(),t("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(o=gi,c(mi)),r.flush(l))}}}const Ms="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function $f(e,t){let n;return pn(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function Ly(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const o=$f(s,["event","transaction","profile","replay_event"]);return o&&(o.release=t),r.send(s)}}}}function Py(e,t){return at(t?{...e[0],dsn:t}:e[0],e[1])}function Dy(e,t){return n=>{const r=e(n),s=new Map,o=t||(u=>{const d=u.getEvent();return d?.extra?.[Ms]&&Array.isArray(d.extra[Ms])?d.extra[Ms]:[]});function i(u,d){const l=d?`${u}:${d}`:u;let f=s.get(l);if(!f){const p=Wd(u);if(!p)return;const h=Tf(p,n.tunnel);f=d?Ly(e,d)({...n,url:h}):e({...n,url:h}),s.set(l,f)}return[u,f]}async function a(u){function d(h){const g=h?.length?h:["event"];return $f(u,g)}const l=o({envelope:u,getEvent:d}).map(h=>typeof h=="string"?i(h,void 0):i(h.dsn,h.release)).filter(h=>!!h),f=l.length?l:[["",r]];return(await Promise.all(f.map(([h,g])=>g.send(Py(u,h)))))[0]}async function c(u){const d=[...s.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}const Fy="thismessage:/";function Ja(e){return"isRelative"in e}function Ya(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?Fy:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function $y(e){if(Ja(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function dn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Uf(e){return e.split(/[?#]/,1)[0]}function Wt(e,t=!0){if(e.startsWith("data:")){const n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",s=e.includes(";base64,"),o=e.indexOf(",");let i="";if(t&&o!==-1){const a=e.slice(o+1);i=a.length>10?`${a.slice(0,10)}... [truncated]`:a}return`data:${r}${s?",base64":""}${i?`,${i}`:""}`}return e}function Bf(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return By(e,n)||Uy(e,r)}function Uy(e,t){return t?Mu(e)===Mu(t):!1}function By(e,t){const n=Ya(e);return!n||Ja(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function Mu(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Hf(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const Hy=Hf;function Wy(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Wf(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:Et})),version:Et}),e._metadata=s}function Ka(e={}){const t=e.client||C();if(!yf()||!t)return{};const n=xt(),r=Qt(n);if(r.getTraceData)return r.getTraceData(e);const s=e.scope||z(),o=e.span||be(),i=o?Qd(o):jy(s),a=o?it(o):Pa(t,s),c=Hd(a);if(!Gd.test(i))return m.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const d={"sentry-trace":i,baggage:c};return e.propagateTraceparent&&(d.traceparent=o?Wg(o):qy(s)),d}function jy(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Jd(t,r,n)}function qy(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Yd(t,r,n)}function zy(e,t,n){let r,s,o;const i=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){s!==void 0&&clearTimeout(s),o!==void 0&&clearTimeout(o),s=o=void 0}function d(){return s!==void 0||o!==void 0?c():r}function l(){return s&&clearTimeout(s),s=a(c,t),i&&o===void 0&&(o=a(c,i)),r}return l.cancel=u,l.flush=d,l}const Gy=100;function mt(e,t){const n=C(),r=Ee();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Gy}=n.getOptions();if(o<=0)return;const a={timestamp:vn(),...e},c=s?Yt(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}let xu;const Vy="FunctionToString",Nu=new WeakMap,Jy=(()=>({name:Vy,setupOnce(){xu=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ma(this),n=Nu.has(C())&&t!==void 0?t:this;return xu.apply(n,e)}}catch{}},setup(e){Nu.set(e,!0)}})),jf=Jy,Yy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Ky="EventFilters",qf=(e={})=>{let t;return{name:Ky,setup(n){const r=n.getOptions();t=Ou(e,r)},processEvent(n,r,s){if(!t){const o=s.getOptions();t=Ou(e,o)}return Xy(n,t)?null:n}}},zf=((e={})=>({...qf(e),name:"InboundFilters"}));function Ou(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Yy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Xy(e,t){if(e.type){if(e.type==="transaction"&&Zy(e,t.ignoreTransactions))return w&&m.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${rn(e)}`),!0}else{if(Qy(e,t.ignoreErrors))return w&&m.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${rn(e)}`),!0;if(rS(e))return w&&m.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${rn(e)}`),!0;if(eS(e,t.denyUrls))return w&&m.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${rn(e)}.
Url: ${eo(e)}`),!0;if(!tS(e,t.allowUrls))return w&&m.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${rn(e)}.
Url: ${eo(e)}`),!0}return!1}function Qy(e,t){return t?.length?Nf(e).some(n=>st(n,t)):!1}function Zy(e,t){if(!t?.length)return!1;const n=e.transaction;return n?st(n,t):!1}function eS(e,t){if(!t?.length)return!1;const n=eo(e);return n?st(n,t):!1}function tS(e,t){if(!t?.length)return!0;const n=eo(e);return n?st(n,t):!0}function nS(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function eo(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?nS(n):null}catch{return w&&m.error(`Cannot extract url for event ${rn(e)}`),null}}function rS(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function sS(e,t,n,r,s,o){if(!s.exception?.values||!o||!Ct(o.originalException,Error))return;const i=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;i&&(s.exception.values=Yi(e,t,r,o.originalException,n,s.exception.values,i,0))}function Yi(e,t,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(Ct(r[s],Error)){Lu(i,a,r);const u=e(t,r[s]),d=c.length;Pu(u,s,d,a),c=Yi(e,t,n,r[s],s,[u,...c],u,d)}return Gf(r)&&r.errors.forEach((u,d)=>{if(Ct(u,Error)){Lu(i,a,r);const l=e(t,u),f=c.length;Pu(l,`errors[${d}]`,f,a),c=Yi(e,t,n,u,s,[l,...c],l,f)}}),c}function Gf(e){return Array.isArray(e.errors)}function Lu(e,t,n){e.mechanism={handled:!0,type:"auto.core.linked_errors",...Gf(n)&&{is_exception_group:!0},...e.mechanism,exception_id:t}}function Pu(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const Vf=new Map,Du=new Set;function oS(e){if(D._sentryModuleMetadata)for(const t of Object.keys(D._sentryModuleMetadata)){const n=D._sentryModuleMetadata[t];if(Du.has(t))continue;Du.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){Vf.set(s.filename,n);break}}}function iS(e,t){return oS(e),Vf.get(t)}function Jf(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;const s=iS(e,r.filename);s&&(r.module_metadata=s)})})}function Yf(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}const aS=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{pn(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(Yf(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;Jf(n,t)})}});function Xa(e){const t="console";Kt(t,e),Xt(t,cS)}function cS(){"console"in D&&wa.forEach(function(e){e in D.console&&Ce(D.console,e,function(t){return zs[e]=t,function(...n){Ke("console",{args:n,level:e}),zs[e]?.apply(D.console,n)}})})}function to(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const uS="CaptureConsole",lS=((e={})=>{const t=e.levels||wa,n=e.handled??!0;return{name:uS,setup(r){"console"in D&&Xa(({args:s,level:o})=>{C()!==r||!t.includes(o)||fS(s,o,n)})}}}),dS=lS;function fS(e,t,n){const r=to(t),s=new Error,o={level:to(t),extra:{arguments:e}};Ze(i=>{if(i.addEventProcessor(u=>(u.logger="console",Rt(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){const u=`Assertion failed: ${Gs(e.slice(1)," ")||"console.assert"}`;i.setExtra("arguments",e.slice(1)),i.captureMessage(u,r,{captureContext:o,syntheticException:s})}return}const a=e.find(u=>u instanceof Error);if(a){me(a,o);return}const c=Gs(e," ");i.captureMessage(c,r,{captureContext:o,syntheticException:s})})}const pS="Dedupe",hS=(()=>{let e;return{name:pS,processEvent(t){if(t.type)return t;try{if(mS(t,e))return w&&m.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),Kf=hS;function mS(e,t){return t?!!(gS(e,t)||_S(e,t)):!1}function gS(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Qf(e,t)||!Xf(e,t))}function _S(e,t){const n=Fu(t),r=Fu(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Qf(e,t)||!Xf(e,t))}function Xf(e,t){let n=Di(e),r=Di(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const o=r[s],i=n[s];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function Qf(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Fu(e){return e.exception?.values?.[0]}const yS="ExtraErrorData",SS=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:yS,processEvent(r,s,o){const{maxValueLength:i}=o.getOptions();return ES(r,s,t,n,i)}}}),bS=SS;function ES(e,t={},n,r,s){if(!t.originalException||!Tt(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=Zf(t.originalException,r,s);if(i){const a={...e.contexts},c=je(i,n);return Ge(c)&&(Le(c,"__sentry_skip_normalization__",!0),a[o]=c),{...e,contexts:a}}return e}function Zf(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const o of Object.keys(e)){if(r.indexOf(o)!==-1)continue;const i=e[o];s[o]=Tt(i)||typeof i=="string"?n?Cr(`${i}`,n):`${i}`:i}if(t&&e.cause!==void 0)if(Tt(e.cause)){const o=e.cause.name||e.cause.constructor.name;s.cause={[o]:Zf(e.cause,!1,n)}}else s.cause=e.cause;if(typeof e.toJSON=="function"){const o=e.toJSON();for(const i of Object.keys(o)){const a=o[i];s[i]=Tt(a)?a.toString():a}}return s}catch(r){w&&m.error("Unable to extract extra data from the Error object:",r)}return null}function TS(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const vS=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function IS(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=vS.exec(t);return n?n.slice(1):[]}function $u(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=TS(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Uu(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function wS(e,t){e=$u(e).slice(1),t=$u(t).slice(1);const n=Uu(e.split("/")),r=Uu(t.split("/")),s=Math.min(n.length,r.length);let o=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){o=a;break}let i=[];for(let a=o;a<n.length;a++)i.push("..");return i=i.concat(r.slice(o)),i.join("/")}function kS(e,t){return IS(e)[2]||""}const CS="RewriteFrames",RS=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in D&&!!D.window,s=e.iteratee||AS({isBrowser:r,root:t,prefix:n});function o(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:i(c.stacktrace)}}))}}}catch{return a}}function i(a){return{...a,frames:a?.frames?.map(c=>s(c))}}return{name:CS,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=o(c)),c}}};function AS({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),o=/^\//.test(r.filename);if(e){if(t){const i=r.filename;i.indexOf(t)===0&&(r.filename=i.replace(t,n))}}else if(s||o){const i=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?wS(t,i):kS(i);r.filename=`${n}${a}`}return r}}const MS=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],xS=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],NS={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},ep=["select","insert","upsert","update","delete"];function Lo(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Po(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function OS(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function LS(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return n?.startsWith("fts")?s="textSearch":n?.startsWith("plfts")?s="textSearch[plain]":n?.startsWith("phfts")?s="textSearch[phrase]":n?.startsWith("wfts")?s="textSearch[websearch]":s=n&&NS[n]||"filter",`${s}(${e}, ${r.join(".")})`}function Bu(e,t=!1){return new Proxy(e,{apply(n,r,s){return Ot({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[re]:"auto.db.supabase",[ve]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},o=>Reflect.apply(n,r,s).then(i=>(i&&typeof i=="object"&&"error"in i&&i.error?(o.setStatus({code:Q}),me(i.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):o.setStatus({code:Ro}),o.end(),i)).catch(i=>{throw o.setStatus({code:Q}),o.end(),me(i,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),i}).then(...s))}})}function PS(e){const t=e.auth;if(!(!t||Po(e.auth))){for(const n of MS){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Bu(r))}for(const n of xS){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Bu(r,!0))}Lo(e.auth)}}function DS(e){Po(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const s=Reflect.apply(t,n,r),o=s.constructor;return $S(o),s}}),Lo(e.prototype.from))}function FS(e){Po(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){const s=ep,o=n,i=OS(o.method,o.headers);if(!s.includes(i)||!o?.url?.pathname||typeof o.url.pathname!="string")return Reflect.apply(t,n,r);const a=o.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[p,h]of o.url.searchParams.entries())u.push(LS(p,h));const d=Object.create(null);if(Ge(o.body))for(const[p,h]of Object.entries(o.body))d[p]=h;const l=`${i==="select"?"":`${i}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":o.schema,"db.url":o.url.origin,"db.sdk":o.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[re]:"auto.db.supabase",[ve]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),Ot({name:l,attributes:f},p=>Reflect.apply(t,n,[]).then(h=>{if(p&&(h&&typeof h=="object"&&"status"in h&&Ar(p,h.status||500),p.end()),h.error){const y=new Error(h.error.message);h.error.code&&(y.code=h.error.code),h.error.details&&(y.details=h.error.details);const b={};u.length&&(b.query=u),Object.keys(d).length&&(b.body=d),me(y,N=>(N.addEventProcessor(R=>(Rt(R,{handled:!1,type:"auto.db.supabase.postgres"}),R)),N.setContext("supabase",b),N))}const g={type:"supabase",category:`db.${i}`,message:l},_={};return u.length&&(_.query=u),Object.keys(d).length&&(_.body=d),Object.keys(_).length&&(g.data=_),mt(g),h},h=>{throw p&&(Ar(p,500),p.end()),h}).then(...r))}}),Lo(e.prototype.then))}function $S(e){for(const t of ep)Po(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,s){const o=Reflect.apply(n,r,s),i=o.constructor;return w&&m.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),FS(i),o}}),Lo(e.prototype[t]))}const tp=e=>{if(!e){w&&m.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;DS(t),PS(e)},US="Supabase",BS=(e=>({setupOnce(){tp(e)},name:US})),HS=e=>BS(e.supabaseClient),WS=10,jS="ZodErrors";function qS(e){return Tt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function zS(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function GS(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function VS(e){const t=new Set;for(const r of e.issues){const s=GS(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Cr(n.join(", "),100)}`}function JS(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!qS(r.originalException)||r.originalException.issues.length===0)return n;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(zS);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:VS(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(s){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:s instanceof Error?`${s.name}: ${s.message}
${s.stack}`:"unknown"}}}}}const YS=((e={})=>{const t=e.limit??WS;return{name:jS,processEvent(n,r){return JS(t,e.saveZodIssuesAsAttachment,n,r)}}}),KS=YS,XS=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{pn(n,(r,s)=>{if(s==="event"){const o=Array.isArray(r)?r[1]:void 0;o&&(Yf(o),r[1]=o)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;Jf(r,n)})},processEvent(t){const n=ZS(t,e.ignoreSentryInternalFrames);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](o=>!o.some(i=>e.filterKeys.includes(i)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function QS(e,t){if(t!==0||!e.context_line||!e.filename||!e.filename.includes("sentry")||!e.filename.includes("helpers")||!e.context_line.includes(tb))return!1;if(e.pre_context){const n=e.pre_context.length;for(let r=0;r<n;r++)if(e.pre_context[r]?.includes(eb))return!0}return!1}function ZS(e,t){const n=Di(e);if(n)return n.filter((r,s)=>!r.filename||r.lineno==null&&r.colno==null&&r.instruction_addr==null?!1:!t||!QS(r,s)).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(s=>s.startsWith(Hu)).map(s=>s.slice(Hu.length)):[])}const Hu="_sentryBundlerPluginAppKey:",eb="Attempt to invoke user-land function",tb="fn.apply(this, wrappedArguments)",nb=100,rb=10,cs="flag.evaluation.";function ir(e){const n=z().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function hn(e,t,n=nb){const r=z().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;sb(s,e,t,n)}function sb(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){w&&m.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(o=>o.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function mn(e,t,n=rb){if(typeof t!="boolean")return;const r=be();if(!r)return;const s=j(r).data;if(`${cs}${e}`in s){r.setAttribute(`${cs}${e}`,t);return}Object.keys(s).filter(i=>i.startsWith(cs)).length<n&&r.setAttribute(`${cs}${e}`,t)}const ob=()=>({name:"FeatureFlags",processEvent(e,t,n){return ir(e)},addFeatureFlag(e,t){hn(e,t),mn(e,t)}}),ib=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&Ce(t,"isOn",Wu),typeof t.getFeatureValue=="function"&&Ce(t,"getFeatureValue",Wu)},processEvent(t,n,r){return ir(t)}});function Wu(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(hn(n,r),mn(n,r)),r}}const ab="ConversationId",cb=(()=>({name:ab,setup(e){e.on("spanStart",t=>{const n=z().getScopeData(),r=Ee().getScopeData(),s=n.conversationId||r.conversationId;s&&t.setAttribute(Ig,s)})}})),ub=cb;function lb(e,t,n,r,s){if(!e.fetchData)return;const{method:o,url:i}=e.fetchData,a=Xe()&&t(i);if(e.endTimestamp&&a){const p=e.fetchData.__span;if(!p)return;const h=r[p];h&&(pb(h,e),db(h,e,s),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof s=="object"?s:{spanOrigin:s},d=!!be(),l=a&&d?In(mb(i,o,c)):new At;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){const p=e.args[0],h={...e.args[1]||{}},g=fb(p,h,Xe()&&d?l:void 0,u);g&&(e.args[1]=h,h.headers=g)}const f=C();if(f){const p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function db(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function fb(e,t,n,r){const s=Ka({span:n,propagateTraceparent:r}),o=s["sentry-trace"],i=s.baggage,a=s.traceparent;if(!o)return;const c=t.headers||(Ra(e)?e.headers:void 0);if(c)if(hb(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",o),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),i){const d=u.get("baggage");d?us(d)||u.set("baggage",`${d},${i}`):u.set("baggage",i)}return u}else if(Array.isArray(c)){const u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",o]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);const d=c.find(l=>l[0]==="baggage"&&us(l[1]));return i&&!d&&u.push(["baggage",i]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(g=>us(g)):us(l));i&&!p&&f.push(i);const h={...c,"sentry-trace":u??o,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(h.traceparent=a),h}else return{...s}}function pb(e,t){if(t.response){Ar(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:Q,message:"internal_error"});e.end()}function us(e){return e.split(",").some(t=>t.trim().startsWith(Na))}function hb(e){return typeof Headers<"u"&&Ct(e,Headers)}function mb(e,t,n){if(e.startsWith("data:")){const o=Wt(e);return{name:`${t} ${o}`,attributes:ju(e,void 0,t,n)}}const r=Ya(e),s=r?$y(r):e;return{name:`${t} ${s}`,attributes:ju(e,r,t,n)}}function ju(e,t,n,r){const s={url:Wt(e),type:"fetch","http.method":n,[re]:r,[ve]:"http.client"};return t&&(Ja(t)||(s["http.url"]=Wt(t.href),s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function np(e,t={},n=z()){const{message:r,name:s,email:o,url:i,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:o,name:s,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||C();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function ar(e,t,n,r,s){Zs({level:e,message:t,attributes:n,severityNumber:s},r)}function gb(e,t,{scope:n}={}){ar("trace",e,t,n)}function _b(e,t,{scope:n}={}){ar("debug",e,t,n)}function yb(e,t,{scope:n}={}){ar("info",e,t,n)}function Sb(e,t,{scope:n}={}){ar("warn",e,t,n)}function bb(e,t,{scope:n}={}){ar("error",e,t,n)}function Eb(e,t,{scope:n}={}){ar("fatal",e,t,n)}const Tb=Object.freeze(Object.defineProperty({__proto__:null,debug:_b,error:bb,fatal:Eb,fmt:Hy,info:yb,trace:gb,warn:Sb},Symbol.toStringTag,{value:"Module"}));function Ki(e,t,n){return"util"in D&&typeof D.util.format=="function"?D.util.format(...e):vb(e,t,n)}function vb(e,t,n){return e.map(r=>Gt(r)?String(r):JSON.stringify(je(r,t,n))).join(" ")}function Ib(e){return/%[sdifocO]/.test(e)}function wb(e,t){const n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((s,o)=>{n[`sentry.message.parameter.${o}`]=s}),n}const kb="ConsoleLogs",qu={[re]:"auto.log.console"},Cb=((e={})=>{const t=e.levels||wa;return{name:kb,setup(n){const{enableLogs:r,normalizeDepth:s=3,normalizeMaxBreadth:o=1e3}=n.getOptions();if(!r){w&&m.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Xa(({args:i,level:a})=>{if(C()!==n||!t.includes(a))return;const c=i[0],u=i.slice(1);if(a==="assert"){if(!c){const p=u.length>0?`Assertion failed: ${Ki(u,s,o)}`:"Assertion failed";Zs({level:"error",message:p,attributes:qu})}return}const d=a==="log",l=i.length>1&&typeof i[0]=="string"&&!Ib(i[0]),f={...qu,...l?wb(c,u):{}};Zs({level:d?"info":a,message:Ki(i,s,o),severityNumber:d?10:void 0,attributes:f})})}}}),Rb=Cb;function Qa(e,t,n,r){yy({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function Ab(e,t=1,n){Qa("counter",e,t,n)}function Mb(e,t,n){Qa("gauge",e,t,n)}function xb(e,t,n){Qa("distribution",e,t,n)}const Nb=Object.freeze(Object.defineProperty({__proto__:null,count:Ab,distribution:xb,gauge:Mb},Symbol.toStringTag,{value:"Module"})),Ob=["trace","debug","info","warn","error","fatal"];function Lb(e={}){const t=new Set(e.levels??Ob),n=e.client;return{log(r){const{type:s,level:o,message:i,args:a,tag:c,date:u,...d}=r,l=n||C();if(!l)return;const f=Fb(s,o);if(!t.has(f))return;const{normalizeDepth:p=3,normalizeMaxBreadth:h=1e3}=l.getOptions(),g=[];i&&g.push(i),a&&a.length>0&&g.push(Ki(a,p,h));const _=g.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),s&&(d["consola.type"]=s),o!=null&&typeof o=="number"&&(d["consola.level"]=o),Zs({level:f,message:_,attributes:d})}}}const Pb={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},Db={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function Fb(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const n=Pb[e];if(n)return n}if(typeof t=="number"){const n=Db[t];if(n)return n}return"info"}const $b="gen_ai.prompt",Do="gen_ai.system",Ue="gen_ai.request.model",Za="gen_ai.request.stream",Fo="gen_ai.request.temperature",ec="gen_ai.request.max_tokens",$o="gen_ai.request.frequency_penalty",tc="gen_ai.request.presence_penalty",Uo="gen_ai.request.top_p",rp="gen_ai.request.top_k",Ub="gen_ai.request.encoding_format",Bb="gen_ai.request.dimensions",en="gen_ai.response.finish_reasons",Lt="gen_ai.response.model",wn="gen_ai.response.id",Hb="gen_ai.response.stop_reason",gn="gen_ai.usage.input_tokens",_n="gen_ai.usage.output_tokens",yn="gen_ai.usage.total_tokens",Vt="gen_ai.operation.name",Sn="sentry.sdk_meta.gen_ai.input.messages.original_length",cr="gen_ai.input.messages",Gr="gen_ai.system_instructions",Qe="gen_ai.response.text",Bo="gen_ai.request.available_tools",Ho="gen_ai.response.streaming",gt="gen_ai.response.tool_calls",sp="gen_ai.agent.name",Wb="gen_ai.pipeline.name",nc="gen_ai.conversation.id",jb="gen_ai.usage.cache_creation_input_tokens",qb="gen_ai.usage.cache_read_input_tokens",zb="gen_ai.invoke_agent",Gb="gen_ai.embeddings.input",Vb="gen_ai.tool.name",Jb="gen_ai.tool.input",Yb="gen_ai.tool.output",op="openai.response.id",ip="openai.response.model",ap="openai.response.timestamp",Kb="openai.usage.completion_tokens",Xb="openai.usage.prompt_tokens",_r={CHAT:"chat",EMBEDDINGS:"embeddings"},zu="anthropic.response.timestamp",cp=2e4,no=e=>new TextEncoder().encode(e).length,rc=e=>no(JSON.stringify(e));function Wo(e,t){if(no(e)<=t)return e;let n=0,r=e.length,s="";for(;n<=r;){const o=Math.floor((n+r)/2),i=e.slice(0,o);no(i)<=t?(s=i,n=o+1):r=o-1}return s}function Qb(e){return typeof e=="string"?e:"text"in e?e.text:""}function Gu(e,t){return typeof e=="string"?t:{...e,text:t}}function Zb(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function eE(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function Tr(e){return!e||typeof e!="object"?!1:tE(e)||up(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function tE(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&Tr(e.source)}function up(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function lp(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function nE(e,t){const n={...e,content:""},r=rc(n),s=t-r;if(s<=0)return[];const o=Wo(e.content,s);return[{...e,content:o}]}function rE(e,t){const{parts:n}=e,r=n.map(a=>Gu(a,"")),s=rc({...e,parts:r});let o=t-s;if(o<=0)return[];const i=[];for(const a of n){const c=Qb(a),u=no(c);if(u<=o)i.push(a),o-=u;else if(i.length===0){const d=Wo(c,o);d&&i.push(Gu(a,d));break}else break}return i.length<=0?[]:[{...e,parts:i}]}function sE(e,t){if(!e)return[];if(typeof e=="string"){const n=Wo(e,t);return n?[n]:[]}return typeof e!="object"?[]:Zb(e)?nE(e,t):lp(e)?rE(e,t):[]}const Vu="[Filtered]",oE=["image_url","data","content","b64_json","result","uri"];function xs(e){const t={...e};Tr(t.source)&&(t.source=xs(t.source)),up(e)&&(t.inlineData={...e.inlineData,data:Vu});for(const n of oE)typeof t[n]=="string"&&(t[n]=Vu);return t}function Xi(e){return e.map(n=>{let r;return n&&typeof n=="object"&&(eE(n)?r={...n,content:Xi(n.content)}:"content"in n&&Tr(n.content)&&(r={...n,content:xs(n.content)}),lp(n)&&(r={...r??n,parts:Xi(n.parts)}),Tr(r)?r=xs(r):Tr(n)&&(r=xs(n))),r??n})}function iE(e,t){if(!Array.isArray(e)||e.length===0)return e;const n=e[e.length-1],r=Xi([n]),s=r[0];return rc(s)<=t?r:sE(s,t)}function jo(e){return iE(e,cp)}function aE(e){return Wo(e,cp)}function Vr(e){return e.includes("messages")?"chat":e.includes("completions")?"text_completion":e.includes("generateContent")?"generate_content":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function ro(e){return`gen_ai.${Vr(e)}`}function dp(e,t){return e?`${e}.${t}`:t}function sc(e,t,n,r,s){if(t!==void 0&&e.setAttributes({[gn]:t}),n!==void 0&&e.setAttributes({[_n]:n}),t!==void 0||n!==void 0||r!==void 0||s!==void 0){const o=(t??0)+(n??0)+(r??0)+(s??0);e.setAttributes({[yn]:o})}}function fp(e){if(typeof e=="string")return aE(e);if(Array.isArray(e)){const t=jo(e);return JSON.stringify(t)}return JSON.stringify(e)}function Jr(e){if(!Array.isArray(e))return{systemInstructions:void 0,filteredMessages:e};const t=e.findIndex(i=>i&&typeof i=="object"&&"role"in i&&i.role==="system");if(t===-1)return{systemInstructions:void 0,filteredMessages:e};const n=e[t],r=typeof n.content=="string"?n.content:n.content!==void 0?JSON.stringify(n.content):void 0;if(!r)return{systemInstructions:void 0,filteredMessages:e};const s=JSON.stringify([{type:"text",content:r}]),o=[...e.slice(0,t),...e.slice(t+1)];return{systemInstructions:s,filteredMessages:o}}const cE=["responses.create","chat.completions.create","embeddings.create","conversations.create"],uE=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],lE=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...uE];function oc(e){return e.includes("chat.completions")||e.includes("responses")?_r.CHAT:e.includes("embeddings")?_r.EMBEDDINGS:e.includes("conversations")?_r.CHAT:e.split(".").pop()||"unknown"}function Ju(e){return`gen_ai.${oc(e)}`}function dE(e){return cE.includes(e)}function fE(e,t){return e?`${e}.${t}`:t}function pE(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function hE(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function mE(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function gE(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="conversation"}function _E(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function yE(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function SE(e,t,n){if(ic(e,t.id,t.model,t.created),t.usage&&qo(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const r=t.choices.map(s=>s.finish_reason).filter(s=>s!==null);if(r.length>0&&e.setAttributes({[en]:JSON.stringify(r)}),n){const s=t.choices.map(o=>o.message?.tool_calls).filter(o=>Array.isArray(o)&&o.length>0).flat();s.length>0&&e.setAttributes({[gt]:JSON.stringify(s)})}}}function bE(e,t,n){if(ic(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[en]:JSON.stringify([t.status])}),t.usage&&qo(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){const r=t;if(Array.isArray(r.output)&&r.output.length>0){const s=r.output.filter(o=>typeof o=="object"&&o!==null&&o.type==="function_call");s.length>0&&e.setAttributes({[gt]:JSON.stringify(s)})}}}function EE(e,t){e.setAttributes({[ip]:t.model,[Lt]:t.model}),t.usage&&qo(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function TE(e,t){const{id:n,created_at:r}=t;e.setAttributes({[op]:n,[wn]:n,[nc]:n}),r&&e.setAttributes({[ap]:new Date(r*1e3).toISOString()})}function qo(e,t,n,r){t!==void 0&&e.setAttributes({[Xb]:t,[gn]:t}),n!==void 0&&e.setAttributes({[Kb]:n,[_n]:n}),r!==void 0&&e.setAttributes({[yn]:r})}function ic(e,t,n,r){e.setAttributes({[op]:t,[wn]:t}),e.setAttributes({[ip]:n,[Lt]:n}),e.setAttributes({[ap]:new Date(r*1e3).toISOString()})}function vE(e){if("conversation"in e&&typeof e.conversation=="string")return e.conversation;if("previous_response_id"in e&&typeof e.previous_response_id=="string")return e.previous_response_id}function IE(e){const t={[Ue]:e.model??"unknown"};"temperature"in e&&(t[Fo]=e.temperature),"top_p"in e&&(t[Uo]=e.top_p),"frequency_penalty"in e&&(t[$o]=e.frequency_penalty),"presence_penalty"in e&&(t[tc]=e.presence_penalty),"stream"in e&&(t[Za]=e.stream),"encoding_format"in e&&(t[Ub]=e.encoding_format),"dimensions"in e&&(t[Bb]=e.dimensions);const n=vE(e);return n&&(t[nc]=n),t}function wE(e,t){for(const n of e){const r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const s=t.chatCompletionToolCalls[r];n.function.arguments&&s?.function&&(s.function.arguments+=n.function.arguments)}}}function kE(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&wE(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function CE(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:Q,message:"internal_error"}),me(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const s=e;if(!lE.includes(s.type)){t.eventTypes.push(s.type);return}if(n&&(s.type==="response.output_item.done"&&"item"in s&&t.responsesApiToolCalls.push(s.item),s.type==="response.output_text.delta"&&"delta"in s&&s.delta)){t.responseTexts.push(s.delta);return}if("response"in s){const{response:o}=s;t.responseId=o.id??t.responseId,t.responseModel=o.model??t.responseModel,t.responseTimestamp=o.created_at??t.responseTimestamp,o.usage&&(t.promptTokens=o.usage.input_tokens,t.completionTokens=o.usage.output_tokens,t.totalTokens=o.usage.total_tokens),o.status&&t.finishReasons.push(o.status),n&&o.output_text&&t.responseTexts.push(o.output_text)}}async function*RE(e,t,n){const r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const s of e)yE(s)?kE(s,r,n):_E(s)&&CE(s,r,n,t),yield s}finally{ic(t,r.responseId,r.responseModel,r.responseTimestamp),qo(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[Ho]:!0}),r.finishReasons.length&&t.setAttributes({[en]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Qe]:r.responseTexts.join("")});const o=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];o.length>0&&t.setAttributes({[gt]:JSON.stringify(o)}),t.end()}}function AE(e){const t=Array.isArray(e.tools)?e.tools:[],r=e.web_search_options&&typeof e.web_search_options=="object"?[{type:"web_search_options",...e.web_search_options}]:[],s=[...t,...r];return s.length>0?JSON.stringify(s):void 0}function ME(e,t){const n={[Do]:"openai",[Vt]:oc(t),[re]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0],s=AE(r);s&&(n[Bo]=s),Object.assign(n,IE(r))}else n[Ue]="unknown";return n}function xE(e,t,n){if(!t||typeof t!="object")return;const r=t;if(pE(r)){if(SE(e,r,n),n&&r.choices?.length){const s=r.choices.map(o=>o.message?.content||"");e.setAttributes({[Qe]:JSON.stringify(s)})}}else hE(r)?(bE(e,r,n),n&&r.output_text&&e.setAttributes({[Qe]:r.output_text})):mE(r)?EE(e,r):gE(r)&&TE(e,r)}function Yu(e,t,n){if(n===_r.EMBEDDINGS&&"input"in t){const a=t.input;if(a==null||typeof a=="string"&&a.length===0||Array.isArray(a)&&a.length===0)return;e.setAttribute(Gb,typeof a=="string"?a:JSON.stringify(a));return}const r="input"in t?t.input:"messages"in t?t.messages:void 0;if(!r||Array.isArray(r)&&r.length===0)return;const{systemInstructions:s,filteredMessages:o}=Jr(r);s&&e.setAttribute(Gr,s);const i=fp(o);e.setAttribute(cr,i),Array.isArray(o)?e.setAttribute(Sn,o.length):e.setAttribute(Sn,1)}function NE(e,t,n,r){return async function(...o){const i=ME(o,t),a=i[Ue]||"unknown",c=oc(t),u=o[0];return u&&typeof u=="object"&&u.stream===!0?St({name:`${c} ${a} stream-response`,op:Ju(t),attributes:i},async l=>{try{r.recordInputs&&u&&Yu(l,u,c);const f=await e.apply(n,o);return RE(f,l,r.recordOutputs??!1)}catch(f){throw l.setStatus({code:Q,message:"internal_error"}),me(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),f}}):Ot({name:`${c} ${a}`,op:Ju(t),attributes:i},async l=>{try{r.recordInputs&&u&&Yu(l,u,c);const f=await e.apply(n,o);return xE(l,f,r.recordOutputs),f}catch(f){throw me(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function pp(e,t="",n){return new Proxy(e,{get(r,s){const o=r[s],i=fE(t,String(s));return typeof o=="function"&&dE(i)?NE(o,i,r,n):typeof o=="function"?o.bind(r):o&&typeof o=="object"?pp(o,i,n):o}})}function OE(e,t){const n=!!C()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return pp(e,"",r)}function LE(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:Q,message:e.error?.type??"internal_error"}),me(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function PE(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function DE(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function FE(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function $E(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const n=t.activeToolBlocks[e.index];if(!n)return;const r=n.inputJsonParts.join("");let s;try{s=r?JSON.parse(r):{}}catch{s={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:s}),delete t.activeToolBlocks[e.index]}function hp(e,t,n,r){!(e&&typeof e=="object")||LE(e,r)||(PE(e,t),DE(e,t),FE(e,t,n),$E(e,t))}function UE(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[wn]:e.responseId}),e.responseModel&&t.setAttributes({[Lt]:e.responseModel}),sc(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[Ho]:!0}),e.finishReasons.length>0&&t.setAttributes({[en]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Qe]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[gt]:JSON.stringify(e.toolCalls)}),t.end())}async function*BE(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const s of e)hp(s,r,n,t),yield s}finally{r.responseId&&t.setAttributes({[wn]:r.responseId}),r.responseModel&&t.setAttributes({[Lt]:r.responseModel}),sc(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[Ho]:!0}),r.finishReasons.length>0&&t.setAttributes({[en]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Qe]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[gt]:JSON.stringify(r.toolCalls)}),t.end()}}function HE(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",s=>{hp(s,r,n,t)}),e.on("message",()=>{UE(r,t,n)}),e.on("error",s=>{me(s,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:Q,message:"stream_error"}),t.end())}),e}const WE=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function jE(e){return WE.includes(e)}function qE(e,t){if(Array.isArray(t)&&t.length===0)return;const{systemInstructions:n,filteredMessages:r}=Jr(t);n&&e.setAttributes({[Gr]:n});const s=Array.isArray(r)?r.length:1;e.setAttributes({[cr]:fp(r),[Sn]:s})}function zE(e,t){t.error&&(e.setStatus({code:Q,message:t.error.type||"internal_error"}),me(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function GE(e){const{system:t,messages:n,input:r}=e,s=typeof t=="string"?[{role:"system",content:e.system}]:[],o=Array.isArray(r)?r:r!=null?[r]:void 0,i=Array.isArray(n)?n:n!=null?[n]:[],a=o??i;return[...s,...a]}function VE(e,t){const n={[Do]:"anthropic",[Vt]:Vr(t),[re]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0];r.tools&&Array.isArray(r.tools)&&(n[Bo]=JSON.stringify(r.tools)),n[Ue]=r.model??"unknown","temperature"in r&&(n[Fo]=r.temperature),"top_p"in r&&(n[Uo]=r.top_p),"stream"in r&&(n[Za]=r.stream),"top_k"in r&&(n[rp]=r.top_k),"frequency_penalty"in r&&(n[$o]=r.frequency_penalty),"max_tokens"in r&&(n[ec]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[Ue]=e[0]:n[Ue]="unknown";return n}function Qi(e,t){const n=GE(t);qE(e,n),"prompt"in t&&e.setAttributes({[$b]:JSON.stringify(t.prompt)})}function JE(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Qe]:t.content.map(r=>r.text).filter(r=>!!r).join("")});const n=[];for(const r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[gt]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Qe]:t.completion}),"input_tokens"in t&&e.setAttributes({[Qe]:JSON.stringify(t.input_tokens)})}function YE(e,t){"id"in t&&"model"in t&&(e.setAttributes({[wn]:t.id,[Lt]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[zu]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[zu]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&sc(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function KE(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){zE(e,t);return}n&&JE(e,t),YE(e,t)}}function Ku(e,t,n){throw me(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:Q,message:"internal_error"}),t.end()),e}function XE(e,t,n,r,s,o,i,a,c,u,d){const l=s[Ue]??"unknown",f={name:`${o} ${l} stream-response`,op:ro(i),attributes:s};return u&&!d?St(f,async p=>{try{c.recordInputs&&a&&Qi(p,a);const h=await e.apply(n,r);return BE(h,p,c.recordOutputs??!1)}catch(h){return Ku(h,p,i)}}):St(f,p=>{try{c.recordInputs&&a&&Qi(p,a);const h=t.apply(n,r);return HE(h,p,c.recordOutputs??!1)}catch(h){return Ku(h,p,i)}})}function QE(e,t,n,r){return new Proxy(e,{apply(s,o,i){const a=VE(i,t),c=a[Ue]??"unknown",u=Vr(t),d=typeof i[0]=="object"?i[0]:void 0,l=!!d?.stream,f=t==="messages.stream";return l||f?XE(e,s,n,i,a,u,t,d,r,l,f):Ot({name:`${u} ${c}`,op:ro(t),attributes:a},p=>(r.recordInputs&&d&&Qi(p,d),No(()=>s.apply(n,i),h=>{me(h,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},h=>KE(p,h,r.recordOutputs))))}})}function mp(e,t="",n){return new Proxy(e,{get(r,s){const o=r[s],i=dp(t,String(s));return typeof o=="function"&&jE(i)?QE(o,i,r,n):typeof o=="function"?o.bind(r):o&&typeof o=="object"?mp(o,i,n):o}})}function ZE(e,t){const n=!!C()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return mp(e,"",r)}const Xu=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],eT="google_genai",gp="chats.create",tT="chat";function nT(e,t){const n=e?.promptFeedback;if(n?.blockReason){const r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:Q,message:`Content blocked: ${r}`}),me(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function rT(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function sT(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(const s of r?.content?.parts??[])n&&s.text&&t.responseTexts.push(s.text),s.functionCall&&t.toolCalls.push({type:"function",id:s.functionCall.id,name:s.functionCall.name,arguments:s.functionCall.args})}}function oT(e,t,n,r){!e||nT(e,r)||(rT(e,t),sT(e,t,n))}async function*iT(e,t,n){const r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const s of e)oT(s,r,n,t),yield s}finally{const s={[Ho]:!0};r.responseId&&(s[wn]=r.responseId),r.responseModel&&(s[Lt]=r.responseModel),r.promptTokens!==void 0&&(s[gn]=r.promptTokens),r.completionTokens!==void 0&&(s[_n]=r.completionTokens),r.totalTokens!==void 0&&(s[yn]=r.totalTokens),r.finishReasons.length&&(s[en]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(s[Qe]=r.responseTexts.join("")),n&&r.toolCalls.length&&(s[gt]=JSON.stringify(r.toolCalls)),t.setAttributes(s),t.end()}}function aT(e){if(Xu.includes(e))return!0;const t=e.split(".").pop();return Xu.includes(t)}function cT(e){return e.includes("Stream")}function yr(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>yr(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function Qu(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function uT(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Fo]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Uo]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[rp]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[ec]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[$o]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[tc]=e.presencePenalty),t}function lT(e,t,n){const r={[Do]:eT,[Vt]:Vr(e),[re]:"auto.ai.google_genai"};if(t){if(r[Ue]=Qu(t,n),"config"in t&&typeof t.config=="object"&&t.config){const s=t.config;if(Object.assign(r,uT(s)),"tools"in s&&Array.isArray(s.tools)){const o=s.tools.flatMap(i=>i.functionDeclarations);r[Bo]=JSON.stringify(o)}}}else r[Ue]=Qu({},n);return r}function Zu(e,t){const n=[];if("config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...yr(t.config.systemInstruction,"system")),"history"in t&&n.push(...yr(t.history,"user")),"contents"in t&&n.push(...yr(t.contents,"user")),"message"in t&&n.push(...yr(t.message,"user")),Array.isArray(n)&&n.length){const{systemInstructions:r,filteredMessages:s}=Jr(n);r&&e.setAttribute(Gr,r);const o=Array.isArray(s)?s.length:0;e.setAttributes({[Sn]:o,[cr]:JSON.stringify(jo(s))})}}function dT(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(Lt,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[gn]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[_n]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[yn]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){const r=t.candidates.map(s=>s.content?.parts&&Array.isArray(s.content.parts)?s.content.parts.map(o=>typeof o.text=="string"?o.text:"").filter(o=>o.length>0).join(""):"").filter(s=>s.length>0);r.length>0&&e.setAttributes({[Qe]:r.join("")})}if(n&&t.functionCalls){const r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[gt]:JSON.stringify(r)})}}}function el(e,t,n,r){const s=t===gp;return new Proxy(e,{apply(o,i,a){const c=a[0],u=lT(t,c,n),d=u[Ue]??"unknown",l=Vr(t);return cT(t)?St({name:`${l} ${d} stream-response`,op:ro(t),attributes:u},async f=>{try{r.recordInputs&&c&&Zu(f,c);const p=await o.apply(n,a);return iT(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:Q,message:"internal_error"}),me(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),f.end(),p}}):Ot({name:s?`${l} ${d} create`:`${l} ${d}`,op:ro(t),attributes:u},f=>(r.recordInputs&&c&&Zu(f,c),No(()=>o.apply(n,a),p=>{me(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},p=>{s||dT(f,p,r.recordOutputs)})))}})}function Zi(e,t="",n){return new Proxy(e,{get:(r,s,o)=>{const i=Reflect.get(r,s,o),a=dp(t,String(s));if(typeof i=="function"&&aT(a)){if(a===gp){const c=el(i,a,r,n);return function(...d){const l=c(...d);return l&&typeof l=="object"?Zi(l,tT,n):l}}return el(i,a,r,n)}return typeof i=="function"?i.bind(r):i&&typeof i=="object"?Zi(i,a,n):i}})}function fT(e,t){const n=!!C()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Zi(e,"",r)}const Sr="auto.ai.langchain",pT={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},Ye=(e,t,n)=>{n!=null&&(e[t]=n)},We=(e,t,n)=>{const r=Number(n);Number.isNaN(r)||(e[t]=r)};function Fe(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function mr(e){const t=e.toLowerCase();return pT[t]??t}function tl(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function nl(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function ac(e){return e.map(t=>{const n=t._getType;if(typeof n=="function"){const s=n.call(t);return{role:mr(s),content:Fe(t.content)}}if(t.lc===1&&t.kwargs){const s=t.id,o=Array.isArray(s)&&s.length>0?s[s.length-1]:"",i=typeof o=="string"?tl(o):"user";return{role:mr(i),content:Fe(t.kwargs?.content)}}if(t.type){const s=String(t.type).toLowerCase();return{role:mr(s),content:Fe(t.content)}}if(t.role)return{role:mr(String(t.role)),content:Fe(t.content)};const r=t.constructor?.name;return r&&r!=="Object"?{role:mr(tl(r)),content:Fe(t.content)}:{role:"user",content:Fe(t.content)}})}function hT(e,t,n){const r={},s="kwargs"in e?e.kwargs:void 0,o=t?.temperature??n?.ls_temperature??s?.temperature;We(r,Fo,o);const i=t?.max_tokens??n?.ls_max_tokens??s?.max_tokens;We(r,ec,i);const a=t?.top_p??s?.top_p;We(r,Uo,a);const c=t?.frequency_penalty;We(r,$o,c);const u=t?.presence_penalty;return We(r,tc,u),t&&"stream"in t&&Ye(r,Za,!!t.stream),r}function _p(e,t,n,r,s){return{[Do]:Fe(e??"langchain"),[Vt]:"chat",[Ue]:Fe(t),[re]:Sr,...hT(n,r,s)}}function mT(e,t,n,r,s){const o=s?.ls_provider,i=r?.model??s?.ls_model_name??"unknown",a=_p(o,i,e,r,s);if(n&&Array.isArray(t)&&t.length>0){Ye(a,Sn,t.length);const c=t.map(u=>({role:"user",content:u}));Ye(a,cr,Fe(c))}return a}function gT(e,t,n,r,s){const o=s?.ls_provider??e.id?.[2],i=r?.model??s?.ls_model_name??"unknown",a=_p(o,i,e,r,s);if(n&&Array.isArray(t)&&t.length>0){const c=ac(t.flat()),{systemInstructions:u,filteredMessages:d}=Jr(c);u&&Ye(a,Gr,u);const l=Array.isArray(d)?d.length:0;Ye(a,Sn,l);const f=jo(d);Ye(a,cr,Fe(f))}return a}function _T(e,t){const n=[],r=e.flat();for(const s of r){const o=s.message?.content;if(Array.isArray(o))for(const i of o){const a=i;a.type==="tool_use"&&n.push(a)}}n.length>0&&Ye(t,gt,Fe(n))}function yT(e,t){if(!e)return;const n=e.tokenUsage,r=e.usage;if(n)We(t,gn,n.promptTokens),We(t,_n,n.completionTokens),We(t,yn,n.totalTokens);else if(r){We(t,gn,r.input_tokens),We(t,_n,r.output_tokens);const s=Number(r.input_tokens),o=Number(r.output_tokens),i=(Number.isNaN(s)?0:s)+(Number.isNaN(o)?0:o);i>0&&We(t,yn,i),r.cache_creation_input_tokens!==void 0&&We(t,jb,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&We(t,qb,r.cache_read_input_tokens)}}function ST(e,t){if(!e)return;const n={};if(Array.isArray(e.generations)){const u=e.generations.flat().map(d=>d.generationInfo?.finish_reason?d.generationInfo.finish_reason:d.generation_info?.finish_reason?d.generation_info.finish_reason:null).filter(d=>typeof d=="string");if(u.length>0&&Ye(n,en,Fe(u)),_T(e.generations,n),t){const d=e.generations.flat().map(l=>l.text??l.message?.content).filter(l=>typeof l=="string");d.length>0&&Ye(n,Qe,Fe(d))}}yT(e.llmOutput,n);const r=e.llmOutput,o=e.generations?.[0]?.[0]?.message,i=r?.model_name??r?.model??o?.response_metadata?.model_name;i&&Ye(n,Lt,i);const a=r?.id??o?.id;a&&Ye(n,wn,a);const c=r?.stop_reason??o?.response_metadata?.finish_reason;return c&&Ye(n,Hb,Fe(c)),n}function bT(e={}){const t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,s=i=>{const a=r.get(i);a?.isRecording()&&(a.end(),r.delete(i))},o={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(i,a,c,u,d,l,f,p){const h=nl(l),g=mT(i,a,t,h,f),_=g[Ue],y=g[Vt];St({name:`${y} ${_}`,op:"gen_ai.chat",attributes:{...g,[ve]:"gen_ai.chat"}},b=>(r.set(c,b),b))},handleChatModelStart(i,a,c,u,d,l,f,p){const h=nl(l),g=gT(i,a,t,h,f),_=g[Ue],y=g[Vt];St({name:`${y} ${_}`,op:"gen_ai.chat",attributes:{...g,[ve]:"gen_ai.chat"}},b=>(r.set(c,b),b))},handleLLMEnd(i,a,c,u,d){const l=r.get(a);if(l?.isRecording()){const f=ST(i,n);f&&l.setAttributes(f),s(a)}},handleLLMError(i,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:Q,message:"llm_error"}),s(a)),me(i,{mechanism:{handled:!1,type:`${Sr}.llm_error_handler`}})},handleChainStart(i,a,c,u){const d=i.name||"unknown_chain",l={[re]:"auto.ai.langchain","langchain.chain.name":d};t&&(l["langchain.chain.inputs"]=JSON.stringify(a)),St({name:`chain ${d}`,op:"gen_ai.invoke_agent",attributes:{...l,[ve]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(i,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(i)}),s(a))},handleChainError(i,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:Q,message:"chain_error"}),s(a)),me(i,{mechanism:{handled:!1,type:`${Sr}.chain_error_handler`}})},handleToolStart(i,a,c,u){const d=i.name||"unknown_tool",l={[re]:Sr,[Vb]:d};t&&(l[Jb]=a),St({name:`execute_tool ${d}`,op:"gen_ai.execute_tool",attributes:{...l,[ve]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(i,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({[Yb]:JSON.stringify(i)}),s(a))},handleToolError(i,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:Q,message:"tool_error"}),s(a)),me(i,{mechanism:{handled:!1,type:`${Sr}.tool_error_handler`}})},copy(){return o},toJSON(){return{lc:1,type:"not_implemented",id:o.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:o.lc_id}}};return o}const yp="auto.ai.langgraph";function ET(e){if(!e||e.length===0)return null;const t=[];for(const n of e)if(n&&typeof n=="object"){const r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function TT(e){const t=e;let n=0,r=0,s=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const o=t.usage_metadata;return typeof o.input_tokens=="number"&&(n=o.input_tokens),typeof o.output_tokens=="number"&&(r=o.output_tokens),typeof o.total_tokens=="number"&&(s=o.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:s}}if(t.response_metadata&&typeof t.response_metadata=="object"){const o=t.response_metadata;if(o.tokenUsage&&typeof o.tokenUsage=="object"){const i=o.tokenUsage;typeof i.promptTokens=="number"&&(n=i.promptTokens),typeof i.completionTokens=="number"&&(r=i.completionTokens),typeof i.totalTokens=="number"&&(s=i.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:s}}function vT(e,t){const n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){const r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(Lt,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(en,[r.finish_reason])}}function IT(e){if(!e.builder?.nodes?.tools?.runnable?.tools)return null;const t=e.builder?.nodes?.tools?.runnable?.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function wT(e,t,n){const s=n?.messages;if(!s||!Array.isArray(s))return;const o=t?.length??0,i=s.length>o?s.slice(o):[];if(i.length===0)return;const a=ET(i);a&&e.setAttribute(gt,JSON.stringify(a));const c=ac(i);e.setAttribute(Qe,JSON.stringify(c));let u=0,d=0,l=0;for(const f of i){const p=TT(f);u+=p.inputTokens,d+=p.outputTokens,l+=p.totalTokens,vT(e,f)}u>0&&e.setAttribute(gn,u),d>0&&e.setAttribute(_n,d),l>0&&e.setAttribute(yn,l)}function kT(e,t){return new Proxy(e,{apply(n,r,s){return Ot({op:"gen_ai.create_agent",name:"create_agent",attributes:{[re]:yp,[ve]:"gen_ai.create_agent",[Vt]:"create_agent"}},o=>{try{const i=Reflect.apply(n,r,s),a=s.length>0?s[0]:{};a?.name&&typeof a.name=="string"&&(o.setAttribute(sp,a.name),o.updateName(`create_agent ${a.name}`));const c=i.invoke;return c&&typeof c=="function"&&(i.invoke=CT(c.bind(i),i,a,t)),i}catch(i){throw o.setStatus({code:Q,message:"internal_error"}),me(i,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),i}})}})}function CT(e,t,n,r){return new Proxy(e,{apply(s,o,i){return Ot({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[re]:yp,[ve]:zb,[Vt]:"invoke_agent"}},async a=>{try{const c=n?.name;c&&typeof c=="string"&&(a.setAttribute(Wb,c),a.setAttribute(sp,c),a.updateName(`invoke_agent ${c}`));const l=(i.length>1?i[1]:void 0)?.configurable?.thread_id;l&&typeof l=="string"&&a.setAttribute(nc,l);const f=IT(t);f&&a.setAttribute(Bo,JSON.stringify(f));const p=r.recordInputs,h=r.recordOutputs,g=i.length>0?i[0].messages??[]:[];if(g&&p){const y=ac(g),{systemInstructions:b,filteredMessages:N}=Jr(y);b&&a.setAttribute(Gr,b);const R=jo(N),$=Array.isArray(N)?N.length:0;a.setAttributes({[cr]:JSON.stringify(R),[Sn]:$})}const _=await Reflect.apply(s,o,i);return h&&wT(a,g??null,_),_}catch(c){throw a.setStatus({code:Q,message:"internal_error"}),me(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function RT(e,t){const n=t||{};return e.compile=kT(e.compile.bind(e),n),e}function Sp(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const zn=D;function AT(){return"history"in zn&&!!zn.history}function MT(){if(!("fetch"in zn))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function ea(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function bp(){if(typeof EdgeRuntime=="string")return!0;if(!MT())return!1;if(ea(zn.fetch))return!0;let e=!1;const t=zn.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=ea(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){w&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function xT(){return"ReportingObserver"in zn}function cc(e,t){const n="fetch";Kt(n,e),Xt(n,()=>Ep(void 0,t))}function NT(e){const t="fetch-body-resolved";Kt(t,e),Xt(t,()=>Ep(LT))}function Ep(e,t=!1){t&&!bp()||Ce(D,"fetch",function(n){return function(...r){const s=new Error,{method:o,url:i}=PT(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:he()*1e3,virtualError:s,headers:DT(r)};return e||Ke("fetch",{...a}),n.apply(D,r).then(async c=>(e?e(c):Ke("fetch",{...a,endTimestamp:he()*1e3,response:c}),c),c=>{Ke("fetch",{...a,endTimestamp:he()*1e3,error:c}),Tt(c)&&c.stack===void 0&&(c.stack=s.stack,Le(c,"framesToPop",1));const d=C()?.getOptions().enhanceFetchErrorMessages??"always";if(d!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const p=new URL(a.fetchData.url).host;d==="always"?c.message=`${c.message} (${p})`:Le(c,"__sentry_fetch_url_host__",p)}catch{}throw c})}})}async function OT(e,t){if(e?.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let i;try{i=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(i),a&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(i)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function LT(e){let t;try{t=e.clone()}catch{return}OT(t,()=>{Ke("fetch-body-resolved",{endTimestamp:he()*1e3,response:e})})}function Ns(e,t){return!!e&&typeof e=="object"&&!!e[t]}function rl(e){return typeof e=="string"?e:e?Ns(e,"url")?e.url:e.toString?e.toString():"":""}function PT(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:rl(n),method:Ns(r,"method")?String(r.method).toUpperCase():Ra(n)&&Ns(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:rl(t),method:Ns(t,"method")?String(t.method).toUpperCase():"GET"}}function DT(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Ra(t))return new Headers(t.headers)}catch{}}function FT(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function $T(){return"npm"}function UT(){return!FT()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function so(){return typeof window<"u"&&(!UT()||BT())}function BT(){return D.process?.type==="renderer"}const nt=D,ae=nt.document,br=nt.navigator,Tp="Report a Bug",HT="Cancel",WT="Send Bug Report",jT="Confirm",qT="Report a Bug",zT="your.email@example.org",GT="Email",VT="What's the bug? What did you expect?",JT="Description",YT="Your Name",KT="Name",XT="Thank you for your report!",QT="(required)",ZT="Add a screenshot",ev="Remove screenshot",tv="Highlight",nv="Hide",rv="Remove",sv="widget",ov="api",iv=5e3,vp=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=C();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&z().setTags(e.tags);const r=np({source:ov,url:Tn(),...e},t);return new Promise((s,o)=>{const i=setTimeout(()=>o("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(i),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?s(r):u?.statusCode===403?o("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):o("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Os=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function av(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(br.userAgent)||/Macintosh/i.test(br.userAgent)&&br.maxTouchPoints&&br.maxTouchPoints>1||!isSecureContext)}function ls(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function cv(e){const t=ae.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function ze(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const Rn=20,uv="http://www.w3.org/2000/svg";function lv(){const e=a=>nt.document.createElementNS(uv,a),t=ze(e("svg"),{width:`${Rn}`,height:`${Rn}`,viewBox:`0 0 ${Rn} ${Rn}`,fill:"var(--actor-color, var(--foreground))"}),n=ze(e("g"),{clipPath:"url(#clip0_57_80)"}),r=ze(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),o=ze(e("clipPath"),{id:"clip0_57_80"}),i=ze(e("rect"),{width:`${Rn}`,height:`${Rn}`,fill:"white"});return o.appendChild(i),s.appendChild(o),t.appendChild(s).appendChild(o).appendChild(i),t}function dv({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=ae.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||Tp,s.appendChild(lv()),e){const i=ae.createElement("span");i.appendChild(ae.createTextNode(e)),s.appendChild(i)}const o=cv(r);return{el:s,appendToDom(){n.appendChild(o),n.appendChild(s)},removeFromDom(){s.remove(),o.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const Ip="rgba(88, 74, 192, 1)",fv={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Ip,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},sl={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Ip,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function ol(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function pv({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=ae.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?`color-scheme: only ${e};`:""}

  ${ol(e==="dark"?{...sl,...t}:{...fv,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    color-scheme: only dark;

    ${ol({...sl,...t})}
  }
}`:""}
`,r&&s.setAttribute("nonce",r),s}const wp=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:s="sentry-feedback",autoInject:o=!0,showBranding:i=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:g,colorScheme:_="system",themeLight:y={},themeDark:b={},addScreenshotButtonLabel:N=ZT,cancelButtonLabel:R=HT,confirmButtonLabel:$=jT,emailLabel:L=GT,emailPlaceholder:S=zT,formTitle:A=qT,isRequiredLabel:F=QT,messageLabel:E=JT,messagePlaceholder:M=VT,nameLabel:k=KT,namePlaceholder:x=YT,removeScreenshotButtonLabel:P=ev,submitButtonLabel:Z=WT,successMessageText:Y=XT,triggerLabel:te=Tp,triggerAriaLabel:T="",highlightToolText:W=tv,hideToolText:I=nv,removeHighlightText:G=rv,onFormOpen:oe,onFormClose:ne,onSubmitSuccess:ye,onSubmitError:Me,onFormSubmitted:Pt}={})=>{const xe={id:s,autoInject:o,showBranding:i,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:g,colorScheme:_,themeDark:b,themeLight:y,triggerLabel:te,triggerAriaLabel:T,cancelButtonLabel:R,submitButtonLabel:Z,confirmButtonLabel:$,formTitle:A,emailLabel:L,emailPlaceholder:S,messageLabel:E,messagePlaceholder:M,nameLabel:k,namePlaceholder:x,successMessageText:Y,isRequiredLabel:F,addScreenshotButtonLabel:N,removeScreenshotButtonLabel:P,highlightToolText:W,hideToolText:I,removeHighlightText:G,onFormClose:ne,onFormOpen:oe,onSubmitError:Me,onSubmitSuccess:ye,onFormSubmitted:Pt};let Pe=null,ct=[];const Dt=ie=>{if(!Pe){const fe=ae.createElement("div");fe.id=String(ie.id),ae.body.appendChild(fe),Pe=fe.attachShadow({mode:"open"}),Pe.appendChild(pv(ie))}return Pe},dr=async ie=>{const fe=ie.enableScreenshot&&av();let Ve,we;try{Ve=(t?t():await e("feedbackModalIntegration",g))(),Vi(Ve)}catch{throw Os&&m.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const ut=fe?n?n():await e("feedbackScreenshotIntegration",g):void 0;ut&&(we=ut(),Vi(we))}catch{Os&&m.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const Ae=Ve.createDialog({options:{...ie,onFormClose:()=>{Ae?.close(),ie.onFormClose?.()},onFormSubmitted:()=>{Ae?.close(),ie.onFormSubmitted?.()}},screenshotIntegration:we,sendFeedback:vp,shadow:Dt(ie)});return Ae},is=(ie,fe={})=>{const Ve=ls(xe,fe),we=typeof ie=="string"?ae.querySelector(ie):typeof ie.addEventListener=="function"?ie:null;if(!we)throw Os&&m.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Ae=null;const ut=async()=>{Ae||(Ae=await dr({...Ve,onFormSubmitted:()=>{Ae?.removeFromDom(),Ve.onFormSubmitted?.()}})),Ae.appendToDom(),Ae.open()};we.addEventListener("click",ut);const K=()=>{ct=ct.filter(He=>He!==K),Ae?.removeFromDom(),Ae=null,we.removeEventListener("click",ut)};return ct.push(K),K},fr=(ie={})=>{const fe=ls(xe,ie),Ve=Dt(fe),we=dv({triggerLabel:fe.triggerLabel,triggerAriaLabel:fe.triggerAriaLabel,shadow:Ve,styleNonce:h});return is(we.el,{...fe,onFormOpen(){we.hide()},onFormClose(){we.show()},onFormSubmitted(){we.show()}}),we};return{name:"Feedback",setupOnce(){!so()||!xe.autoInject||(ae.readyState==="loading"?ae.addEventListener("DOMContentLoaded",()=>fr().appendToDom()):fr().appendToDom())},attachTo:is,createWidget(ie={}){const fe=fr(ls(xe,ie));return fe.appendToDom(),fe},async createForm(ie={}){return dr(ls(xe,ie))},remove(){Pe&&(Pe.parentElement?.remove(),Pe=null),ct.forEach(ie=>ie()),ct=[]}}});function hv(){return C()?.getIntegrationByName("Feedback")}var zo,ue,kp,sn,il,Cp,ta,xr={},uc=[],mv=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,lc=Array.isArray;function Ht(e,t){for(var n in t)e[n]=t[n];return e}function Rp(e){var t=e.parentNode;t&&t.removeChild(e)}function J(e,t,n){var r,s,o,i={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?zo.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)i[o]===void 0&&(i[o]=e.defaultProps[o]);return Ls(e,i,r,s,null)}function Ls(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++kp,__i:-1,__u:0};return s==null&&ue.vnode!=null&&ue.vnode(o),o}function Yr(e){return e.children}function Ps(e,t){this.props=e,this.context=t}function Gn(e,t){if(t==null)return e.__?Gn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Gn(e):null}function gv(e,t,n){var r,s=e.__v,o=s.__e,i=e.__P;if(i)return(r=Ht({},s)).__v=s.__v+1,ue.vnode&&ue.vnode(r),dc(i,r,s,e.__n,i.ownerSVGElement!==void 0,32&s.__u?[o]:null,t,o??Gn(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=o&&Ap(r),r}function Ap(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ap(e)}}function al(e){(!e.__d&&(e.__d=!0)&&sn.push(e)&&!oo.__r++||il!==ue.debounceRendering)&&((il=ue.debounceRendering)||Cp)(oo)}function oo(){var e,t,n,r=[],s=[];for(sn.sort(ta);e=sn.shift();)e.__d&&(n=sn.length,t=gv(e,r,s)||t,n===0||sn.length>n?(na(r,t,s),s.length=r.length=0,t=void 0,sn.sort(ta)):t&&ue.__c&&ue.__c(t,uc));t&&na(r,t,s),oo.__r=0}function Mp(e,t,n,r,s,o,i,a,c,u,d){var l,f,p,h,g,_=r&&r.__k||uc,y=t.length;for(n.__d=c,_v(n,t,_),c=n.__d,l=0;l<y;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?xr:_[p.__i]||xr,p.__i=l,dc(e,p,f,s,o,i,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&fc(f.ref,null,p),d.push(p.ref,p.__c||h,p)),g==null&&h!=null&&(g=h),65536&p.__u||f.__k===p.__k?c=xp(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=g}function _v(e,t,n){var r,s,o,i,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Ls(null,s,null,null,s):lc(s)?Ls(Yr,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?Ls(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=yv(s,n,i=r+l,d),s.__i=a,o=null,a!==-1&&(d--,(o=n[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==i&&(a===i+1?l++:a>i?d>c-i?l+=a-i:l--:l=a<i&&a==i-1?a-i:0,a!==r+l&&(s.__u|=65536))):(o=n[r])&&o.key==null&&o.__e&&(o.__e==e.__d&&(e.__d=Gn(o)),ra(o,o,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(o=n[r])!=null&&(131072&o.__u)==0&&(o.__e==e.__d&&(e.__d=Gn(o)),ra(o,o))}function xp(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=xp(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function yv(e,t,n,r){var s=e.key,o=e.type,i=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&o===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return i;i--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return a;a++}}return-1}function cl(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||mv.test(t)?n:n+"px"}function ds(e,t,n,r,s){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||cl(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||cl(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?ll:ul,o)):e.removeEventListener(t,o?ll:ul,o);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function ul(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(ue.event?ue.event(e):e)}}function ll(e){if(this.l)return this.l[e.type+!0](ue.event?ue.event(e):e)}function dc(e,t,n,r,s,o,i,a,c,u){var d,l,f,p,h,g,_,y,b,N,R,$,L,S,A,F=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),o=[a=t.__e=n.__e]),(d=ue.__b)&&d(t);e:if(typeof F=="function")try{if(y=t.props,b=(d=F.contextType)&&r[d.__c],N=d?b?b.props.value:d.__:r,n.__c?_=(l=t.__c=n.__c).__=l.__E:("prototype"in F&&F.prototype.render?t.__c=l=new F(y,N):(t.__c=l=new Ps(y,N),l.constructor=F,l.render=bv),b&&b.sub(l),l.props=y,l.state||(l.state={}),l.context=N,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),F.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Ht({},l.__s)),Ht(l.__s,F.getDerivedStateFromProps(y,l.__s))),p=l.props,h=l.state,l.__v=t,f)F.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(F.getDerivedStateFromProps==null&&y!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,N),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,N)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(E){E&&(E.__=t)}),R=0;R<l._sb.length;R++)l.__h.push(l._sb[R]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,N),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,g)})}if(l.context=N,l.props=y,l.__P=e,l.__e=!1,$=ue.__r,L=0,"prototype"in F&&F.prototype.render){for(l.state=l.__s,l.__d=!1,$&&$(t),d=l.render(l.props,l.state,l.context),S=0;S<l._sb.length;S++)l.__h.push(l._sb[S]);l._sb=[]}else do l.__d=!1,$&&$(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++L<25);l.state=l.__s,l.getChildContext!=null&&(r=Ht(Ht({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(g=l.getSnapshotBeforeUpdate(p,h)),Mp(e,lc(A=d!=null&&d.type===Yr&&d.key==null?d.props.children:d)?A:[A],t,n,r,s,o,i,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),_&&(l.__E=l.__=null)}catch(E){t.__v=null,c||o!=null?(t.__e=a,t.__u|=c?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),ue.__e(E,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Sv(n.__e,t,n,r,s,o,i,c,u);(d=ue.diffed)&&d(t)}function na(e,t,n){for(var r=0;r<n.length;r++)fc(n[r],n[++r],n[++r]);ue.__c&&ue.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(o){o.call(s)})}catch(o){ue.__e(o,s.__v)}})}function Sv(e,t,n,r,s,o,i,a,c){var u,d,l,f,p,h,g,_=n.props,y=t.props,b=t.type;if(b==="svg"&&(s=!0),o!=null){for(u=0;u<o.length;u++)if((p=o[u])&&"setAttribute"in p==!!b&&(b?p.localName===b:p.nodeType===3)){e=p,o[u]=null;break}}if(e==null){if(b===null)return document.createTextNode(y);e=s?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,y.is&&y),o=null,a=!1}if(b===null)_===y||a&&e.data===y||(e.data=y);else{if(o=o&&zo.call(e.childNodes),_=n.props||xr,!a&&o!=null)for(_={},u=0;u<e.attributes.length;u++)_[(p=e.attributes[u]).name]=p.value;for(u in _)p=_[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in y||ds(e,u,null,p,s));for(u in y)p=y[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?g=p:u==="key"||a&&typeof p!="function"||_[u]===p||ds(e,u,p,_[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),Mp(e,lc(f)?f:[f],t,n,r,s&&b!=="foreignObject",o,i,o?o[0]:n.__k&&Gn(n,0),a,c),o!=null)for(u=o.length;u--;)o[u]!=null&&Rp(o[u]);a||(u="value",h!==void 0&&(h!==e[u]||b==="progress"&&!h||b==="option"&&h!==_[u])&&ds(e,u,h,_[u],!1),u="checked",g!==void 0&&g!==e[u]&&ds(e,u,g,_[u],!1))}return e}function fc(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){ue.__e(r,n)}}function ra(e,t,n){var r,s;if(ue.unmount&&ue.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||fc(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){ue.__e(o,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&ra(r[s],t,n||typeof e.type!="function");n||e.__e==null||Rp(e.__e),e.__=e.__e=e.__d=void 0}function bv(e,t,n){return this.constructor(e,n)}function Ev(e,t,n){var r,s,o,i;ue.__&&ue.__(e,t),s=(r=!1)?null:t.__k,o=[],i=[],dc(t,e=t.__k=J(Yr,null,[e]),s||xr,xr,t.ownerSVGElement!==void 0,s?null:t.firstChild?zo.call(t.childNodes):null,o,s?s.__e:t.firstChild,r,i),e.__d=void 0,na(o,e,i)}zo=uc.slice,ue={__e:function(e,t,n,r){for(var s,o,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),i=s.__d),i)return s.__E=s}catch(a){e=a}throw e}},kp=0,Ps.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ht({},this.state),typeof e=="function"&&(e=e(Ht({},n),this.props)),e&&Ht(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),al(this))},Ps.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),al(this))},Ps.prototype.render=Yr,sn=[],Cp=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ta=function(e,t){return e.__v.__b-t.__v.__b},oo.__r=0;var Mt,ce,_i,dl,Vn=0,Np=[],Ds=[],pe=ue,fl=pe.__b,pl=pe.__r,hl=pe.diffed,ml=pe.__c,gl=pe.unmount,_l=pe.__;function kn(e,t){pe.__h&&pe.__h(ce,e,Vn||t),Vn=0;var n=ce.__H||(ce.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ds}),n.__[e]}function on(e){return Vn=1,Op(Pp,e)}function Op(e,t,n){var r=kn(Mt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Pp(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ce,!ce.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!o||o.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!o||o.call(this,a,c,u))};ce.u=!0;var o=ce.shouldComponentUpdate,i=ce.componentWillUpdate;ce.componentWillUpdate=function(a,c,u){if(this.__e){var d=o;o=void 0,s(a,c,u),o=d}i&&i.call(this,a,c,u)},ce.shouldComponentUpdate=s}return r.__N||r.__}function Tv(e,t){var n=kn(Mt++,3);!pe.__s&&pc(n.__H,t)&&(n.__=e,n.i=t,ce.__H.__h.push(n))}function Lp(e,t){var n=kn(Mt++,4);!pe.__s&&pc(n.__H,t)&&(n.__=e,n.i=t,ce.__h.push(n))}function vv(e){return Vn=5,Kr(function(){return{current:e}},[])}function Iv(e,t,n){Vn=6,Lp(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Kr(e,t){var n=kn(Mt++,7);return pc(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Bn(e,t){return Vn=8,Kr(function(){return e},t)}function wv(e){var t=ce.context[e.__c],n=kn(Mt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(ce)),t.props.value):e.__}function kv(e,t){pe.useDebugValue&&pe.useDebugValue(t?t(e):e)}function Cv(e){var t=kn(Mt++,10),n=on();return t.__=e,ce.componentDidCatch||(ce.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function Rv(){var e=kn(Mt++,11);if(!e.__){for(var t=ce.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Av(){for(var e;e=Np.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Fs),e.__H.__h.forEach(sa),e.__H.__h=[]}catch(t){e.__H.__h=[],pe.__e(t,e.__v)}}pe.__b=function(e){ce=null,fl&&fl(e)},pe.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),_l&&_l(e,t)},pe.__r=function(e){pl&&pl(e),Mt=0;var t=(ce=e.__c).__H;t&&(_i===ce?(t.__h=[],ce.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Ds,n.__N=n.i=void 0})):(t.__h.forEach(Fs),t.__h.forEach(sa),t.__h=[],Mt=0)),_i=ce},pe.diffed=function(e){hl&&hl(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Np.push(t)!==1&&dl===pe.requestAnimationFrame||((dl=pe.requestAnimationFrame)||Mv)(Av)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Ds&&(n.__=n.__V),n.i=void 0,n.__V=Ds})),_i=ce=null},pe.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Fs),n.__h=n.__h.filter(function(r){return!r.__||sa(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],pe.__e(r,n.__v)}}),ml&&ml(e,t)},pe.unmount=function(e){gl&&gl(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Fs(r)}catch(s){t=s}}),n.__H=void 0,t&&pe.__e(t,n.__v))};var yl=typeof requestAnimationFrame=="function";function Mv(e){var t,n=function(){clearTimeout(r),yl&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);yl&&(t=requestAnimationFrame(n))}function Fs(e){var t=ce,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ce=t}function sa(e){var t=ce;e.__c=e.__(),ce=t}function pc(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Pp(e,t){return typeof t=="function"?t(e):t}const xv=Object.defineProperty({__proto__:null,useCallback:Bn,useContext:wv,useDebugValue:kv,useEffect:Tv,useErrorBoundary:Cv,useId:Rv,useImperativeHandle:Iv,useLayoutEffect:Lp,useMemo:Kr,useReducer:Op,useRef:vv,useState:on},Symbol.toStringTag,{value:"Module"}),Nv="http://www.w3.org/2000/svg";function Ov(){const e=r=>ae.createElementNS(Nv,r),t=ze(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=ze(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function Lv({options:e}){const t=Kr(()=>({__html:Ov().outerHTML}),[]);return J("h2",{class:"dialog__header"},J("span",{class:"dialog__title"},e.formTitle),e.showBranding?J("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function Pv(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function yi(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function Dv({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:o,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:g,isEmailRequired:_,isNameRequired:y,messageLabel:b,messagePlaceholder:N,nameLabel:R,namePlaceholder:$,submitButtonLabel:L,isRequiredLabel:S}=e,[A,F]=on(!1),[E,M]=on(null),[k,x]=on(!1),P=u?.input,[Z,Y]=on(null),te=Bn(I=>{Y(I),x(!1)},[]),T=Bn(I=>{const G=Pv(I,{emailLabel:h,isEmailRequired:_,isNameRequired:y,messageLabel:b,nameLabel:R});return G.length>0?M(`Please enter in the following required fields: ${G.join(", ")}`):M(null),G.length===0},[h,_,y,b,R]),W=Bn(async I=>{F(!0);try{if(I.preventDefault(),!(I.target instanceof HTMLFormElement))return;const G=new FormData(I.target),oe=await(u&&k?u.value():void 0),ne={name:yi(G,"name"),email:yi(G,"email"),message:yi(G,"message"),attachments:oe?[oe]:void 0};if(!T(ne))return;try{const ye=await s({name:ne.name,email:ne.email,message:ne.message,source:sv,tags:d},{attachments:ne.attachments});o(ne,ye)}catch(ye){Os&&m.error(ye),M(ye),i(ye)}}finally{F(!1)}},[u&&k,o,i]);return J("form",{class:"form",onSubmit:W},P&&k?J(P,{onError:te}):null,J("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:A},J("div",{class:"form__top"},E?J("div",{class:"form__error-container"},E):null,c?J("label",{for:"name",class:"form__label"},J(Si,{label:R,isRequiredLabel:S,isRequired:y}),J("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:$,required:y,type:"text"})):J("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?J("label",{for:"email",class:"form__label"},J(Si,{label:h,isRequiredLabel:S,isRequired:_}),J("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:g,required:_,type:"email"})):J("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),J("label",{for:"message",class:"form__label"},J(Si,{label:b,isRequiredLabel:S,isRequired:!0}),J("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:N,required:!0,rows:5})),P?J("label",{for:"screenshot",class:"form__label"},J("button",{class:"btn btn--default",disabled:A,type:"button",onClick:()=>{Y(null),x(I=>!I)}},k?f:l),Z?J("div",{class:"form__error-container"},Z.message):null):null),J("div",{class:"btn-group"},J("button",{class:"btn btn--primary",disabled:A,type:"submit"},L),J("button",{class:"btn btn--default",disabled:A,type:"button",onClick:r},p))))}function Si({label:e,isRequired:t,isRequiredLabel:n}){return J("span",{class:"form__label__text"},e,t&&J("span",{class:"form__label__text--required"},n))}const fs=16,Sl=17,Fv="http://www.w3.org/2000/svg";function $v(){const e=c=>nt.document.createElementNS(Fv,c),t=ze(e("svg"),{width:`${fs}`,height:`${Sl}`,viewBox:`0 0 ${fs} ${Sl}`,fill:"inherit"}),n=ze(e("g"),{clipPath:"url(#clip0_57_156)"}),r=ze(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=ze(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const o=e("defs"),i=ze(e("clipPath"),{id:"clip0_57_156"}),a=ze(e("rect"),{width:`${fs}`,height:`${fs}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),t}function Uv({open:e,onFormSubmitted:t,...n}){const r=n.options,s=Kr(()=>({__html:$v().outerHTML}),[]),[o,i]=on(null),a=Bn(()=>{o&&(clearTimeout(o),i(null)),t()},[o]),c=Bn((u,d)=>{n.onSubmitSuccess(u,d),i(setTimeout(()=>{t(),i(null)},iv))},[t]);return J(Yr,null,o?J("div",{class:"success__position",onClick:a},J("div",{class:"success__content"},r.successMessageText,J("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):J("dialog",{class:"dialog",onClick:r.onFormClose,open:e},J("div",{class:"dialog__position"},J("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},J(Lv,{options:r}),J(Dv,{...n,onSubmitSuccess:c})))))}const Bv=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,Hv=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,Wv=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,jv=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,qv=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function zv(e){const t=ae.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Bv}
${Hv}
${Wv}
${jv}
${qv}
`,e&&t.setAttribute("nonce",e),t}function Gv(){const e=z().getUser(),t=Ee().getUser(),n=Un().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const Vv=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,o=e.useSentryUser,i=Gv(),a=ae.createElement("div"),c=zv(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){a.remove(),c.remove(),ae.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),C()?.emit("openFeedbackWidget"),u=ae.body.style.overflow,ae.body.style.overflow="hidden"},close(){f(!1),ae.body.style.overflow=u}},l=t?.createInput({h:J,hooks:xv,dialog:d,options:e}),f=p=>{Ev(J(Uv,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(o&&i?.[o.name]||""),defaultEmail:String(o&&i?.[o.email]||""),onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(h,g)=>{f(!1),e.onSubmitSuccess?.(h,g)},onSubmitError:h=>{e.onSubmitError?.(h)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}}));function Jv({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function Yv(e){const t=ae.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function Kv({h:e}){return function({action:n,setAction:r,options:s}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},s.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},s.hideToolText)))}}function Xv({hooks:e}){function t(){const[n,r]=e.useState(nt.devicePixelRatio??1);return e.useEffect(()=>{const s=()=>{r(nt.devicePixelRatio)},o=matchMedia(`(resolution: ${nt.devicePixelRatio}dppx)`);return o.addEventListener("change",s),()=>{o.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:o,onError:i}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await br.mediaDevices.getDisplayMedia({video:{width:nt.innerWidth*a,height:nt.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=ae.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),o()})().catch(i)},[])}}function Qv(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function $t(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function bi(e,t){$t(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function Ei(e,t,n){$t(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(o=>{Qv(o,s,t)})})}function Zv({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const o=Xv({hooks:t}),i=Kv({h:e}),a=Jv({h:e}),c={__html:Yv(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,g]=t.useState([]),_=t.useRef(null),y=t.useRef(null),b=t.useRef(null),N=t.useRef(null),[R,$]=t.useState(1),L=t.useMemo(()=>{const k=ae.getElementById(s.id);if(!k)return"white";const x=getComputedStyle(k);return x.getPropertyValue("--button-primary-background")||x.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const k=()=>{const x=_.current;x&&($t(l.canvas,{alpha:!1},P=>{const Z=Math.min(x.clientWidth/P.width,x.clientHeight/P.height);$(Z)}),(x.clientHeight===0||x.clientWidth===0)&&setTimeout(k,0))};return k(),nt.addEventListener("resize",k),()=>{nt.removeEventListener("resize",k)}},[l]);const S=t.useCallback((k,x)=>{$t(k,{alpha:!0},(P,Z)=>{Z.scale(x,x),P.width=l.canvas.width,P.height=l.canvas.height})},[l]);t.useEffect(()=>{S(y.current,l.dpi),bi(y.current,l.canvas)},[l]),t.useEffect(()=>{S(b.current,l.dpi),$t(b.current,{alpha:!0},(k,x)=>{x.clearRect(0,0,k.width,k.height)}),Ei(b.current,L,h)},[h,L]),t.useEffect(()=>{S(n,l.dpi),bi(n,l.canvas),$t(ae.createElement("canvas"),{alpha:!0},(k,x)=>{x.scale(l.dpi,l.dpi),k.width=l.canvas.width,k.height=l.canvas.height,Ei(k,L,h),bi(n,k)})},[h,l,L]);const A=k=>{if(!f||!N.current)return;const x=N.current.getBoundingClientRect(),P={type:f,x:k.offsetX/R,y:k.offsetY/R},Z=(T,W)=>{const I=(W.clientX-x.x)/R,G=(W.clientY-x.y)/R;return{type:T.type,x:Math.min(T.x,I),y:Math.min(T.y,G),w:Math.abs(I-T.x),h:Math.abs(G-T.y)}},Y=T=>{$t(b.current,{alpha:!0},(W,I)=>{I.clearRect(0,0,W.width,W.height)}),Ei(b.current,L,[...h,Z(P,T)])},te=T=>{const W=Z(P,T);W.w*R>=1&&W.h*R>=1&&g(I=>[...I,W]),ae.removeEventListener("mousemove",Y),ae.removeEventListener("mouseup",te)};ae.addEventListener("mousemove",Y),ae.addEventListener("mouseup",te)},F=t.useCallback(k=>x=>{x.preventDefault(),x.stopPropagation(),g(P=>{const Z=[...P];return Z.splice(k,1),Z})},[]),E={width:`${l.canvas.width*R}px`,height:`${l.canvas.height*R}px`},M=k=>{k.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:_},e("canvas",{ref:y,id:"background",style:E}),e("canvas",{ref:b,id:"foreground",style:E}),e("div",{ref:N,onMouseDown:A,style:E},h.map((k,x)=>e("div",{key:x,class:"editor__rect",style:{top:`${k.y*R}px`,left:`${k.x*R}px`,width:`${k.w*R}px`,height:`${k.h*R}px`}},e("button",{"aria-label":s.removeHighlightText,onClick:F(x),onMouseDown:M,onMouseUp:M,type:"button"},e(a,null))))))),e(i,{options:s,action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return o({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((g,_)=>{$t(ae.createElement("canvas"),{alpha:!1},(y,b)=>{b.scale(_,_),y.width=g.videoWidth,y.height=g.videoHeight,b.drawImage(g,0,0,y.width,y.height),h({canvas:y,dpi:_})}),n.width=g.videoWidth,n.height=g.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(g=>{u.display="block",f(g)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const e0=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=ae.createElement("canvas");return{input:Zv({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const o=await new Promise(i=>{s.toBlob(i,"image/png")});if(o)return{data:new Uint8Array(await o.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),O=D;let oa=0;function Dp(){return oa>0}function t0(){oa++,setTimeout(()=>{oa--})}function Jn(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(Ma(e))return e}catch{return e}const r=function(...s){try{const o=s.map(i=>Jn(i,t));return e.apply(this,o)}catch(o){throw t0(),Ze(i=>{i.addEventProcessor(a=>(t.mechanism&&(Fi(a,void 0),Rt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),me(o)}),o}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}Nd(r,e),Le(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function hc(){const e=Tn(),{referrer:t}=O.document||{},{userAgent:n}=O.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const n0={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},bl=O;async function Fp(e,t){const n=n0[e],r=bl.Sentry=bl.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const o=r0(n),i=O.document.createElement("script");i.src=o,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise((l,f)=>{i.addEventListener("load",()=>l()),i.addEventListener("error",f)}),c=O.document.currentScript,u=O.document.body||O.document.head||c?.parentElement;if(u)u.appendChild(i);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function r0(e){const n=C()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${Et}/${e}.min.js`,n).toString()}const s0=wp({lazyLoadIntegration:Fp}),El=wp({getModalIntegration:()=>Vv,getScreenshotIntegration:()=>e0});function Go(e,t){const n=mc(e,t),r={type:u0(t),value:l0(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function o0(e,t,n,r){const o=C()?.getOptions().normalizeDepth,i=p0(t),a={__serialized__:of(t,o)};if(i)return{exception:{values:[Go(e,i)]},extra:a};const c={exception:{values:[{type:ko(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:d0(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=mc(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Ti(e,t){return{exception:{values:[Go(e,t)]}}}function mc(e,t){const n=t.stacktrace||t.stack||"",r=a0(t),s=c0(t);try{return e(n,r,s)}catch{}return[]}const i0=/Minified React error #\d+;/i;function a0(e){return e&&i0.test(e.message)?1:0}function c0(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function $p(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function u0(e){const t=e?.name;return!t&&$p(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function l0(e){const t=e?.message;return $p(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?Au(t.error):Au(e):"No error message"}function Up(e,t,n,r){const s=n?.syntheticException||void 0,o=Vo(e,t,s,r);return Rt(o),o.level="error",n?.event_id&&(o.event_id=n.event_id),Oo(o)}function Bp(e,t,n="info",r,s){const o=r?.syntheticException||void 0,i=ia(e,t,o,s);return i.level=n,r?.event_id&&(i.event_id=r.event_id),Oo(i)}function Vo(e,t,n,r,s){let o;if(Ad(t)&&t.error)return Ti(e,t.error);if(Qc(t)||Xm(t)){const i=t;if("stack"in t)o=Ti(e,t);else{const a=i.name||(Qc(i)?"DOMError":"DOMException"),c=i.message?`${a}: ${i.message}`:a;o=ia(e,c,n,r),Fi(o,c)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return Tt(t)?Ti(e,t):Ge(t)||ko(t)?(o=o0(e,t,n,s),Rt(o,{synthetic:!0}),o):(o=ia(e,t,n,r),Fi(o,`${t}`),Rt(o,{synthetic:!0}),o)}function ia(e,t,n,r){const s={};if(r&&n){const o=mc(e,n);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]}),Rt(s,{synthetic:!0})}if(wo(t)){const{__sentry_template_string__:o,__sentry_template_values__:i}=t;return s.logentry={message:o,params:i},s}return s.message=t,s}function d0(e,{isUnhandledRejection:t}){const n=rg(e),r=t?"promise rejection":"exception";return Ad(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:ko(e)?`Event \`${f0(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function f0(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function p0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Hp extends wy{constructor(t){const n=h0(t),r=O.SENTRY_SDK_SOURCE||$T();Wf(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:o,enableLogs:i,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;O.document&&(o||i||u)&&O.document.addEventListener("visibilitychange",()=>{O.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),i&&Wa(this),u&&qa(this))}),s&&this.on("beforeSendSession",Wy)}eventFromException(t,n){return Up(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Bp(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}function h0(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:O.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const bn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,q=D,m0=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Xr=(e,t,n,r)=>{let s,o;return i=>{t.value>=0&&(i||r)&&(o=t.value-(s??0),(o||s===void 0)&&(s=t.value,t.delta=o,t.rating=m0(t.value,n),e(t)))}},Qr=(e=!0)=>{const t=q.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},ur=()=>Qr()?.activationStart??0;function jt(e,t,n){q.document&&q.addEventListener(e,t,n)}function io(e,t,n){q.document&&q.removeEventListener(e,t,n)}let Hn=-1;const Wp=new Set,g0=()=>q.document?.visibilityState==="hidden"&&!q.document?.prerendering?0:1/0,$s=e=>{if(_0(e)&&Hn>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of Wp)t();isFinite(Hn)||(Hn=e.type==="visibilitychange"?e.timeStamp:0,io("prerenderingchange",$s,!0))}},Zr=()=>{if(q.document&&Hn<0){const e=ur();Hn=(q.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??g0(),jt("visibilitychange",$s,!0),jt("pagehide",$s,!0),jt("prerenderingchange",$s,!0)}return{get firstHiddenTime(){return Hn},onHidden(e){Wp.add(e)}}};function _0(e){return e.type==="pagehide"||q.document?.visibilityState==="hidden"}const y0=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,es=(e,t=-1)=>{const n=Qr();let r="navigate";return n&&(q.document?.prerendering||ur()>0?r="prerender":q.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:y0(),navigationType:r}},vi=new WeakMap;function gc(e,t){try{return vi.get(e)||vi.set(e,new t),vi.get(e)}catch{return new t}}class ao{constructor(){ao.prototype.__init.call(this),ao.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}}const lr=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},_c=e=>{let t=!1;return()=>{t||(e(),t=!0)}},Jo=e=>{q.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},S0=[1800,3e3],b0=(e,t={})=>{Jo(()=>{const n=Zr(),r=es("FCP");let s;const i=lr("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(i.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-ur(),0),r.entries.push(c),s(!0)))});i&&(s=Xr(e,r,S0,t.reportAllChanges))})},E0=[.1,.25],T0=(e,t={})=>{b0(_c(()=>{const n=es("CLS",0);let r;const s=Zr(),o=gc(t,ao),i=c=>{for(const u of c)o._processEntry(u);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},a=lr("layout-shift",i);a&&(r=Xr(e,n,E0,t.reportAllChanges),s.onHidden(()=>{i(a.takeRecords()),r(!0)}),q?.setTimeout?.(r))}))};let jp=0,Ii=1/0,ps=0;const v0=e=>{e.forEach(t=>{t.interactionId&&(Ii=Math.min(Ii,t.interactionId),ps=Math.max(ps,t.interactionId),jp=ps?(ps-Ii)/7+1:0)})};let aa;const qp=()=>aa?jp:performance.interactionCount||0,I0=()=>{"interactionCount"in performance||aa||(aa=lr("event",v0,{type:"event",buffered:!0,durationThreshold:0}))},wi=10;let zp=0;const w0=()=>qp()-zp;class co{constructor(){co.prototype.__init.call(this),co.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){zp=qp(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(w0()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<wi||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((s,o)=>o._latency-s._latency),this._longestInteractionList.length>wi){const s=this._longestInteractionList.splice(wi);for(const o of s)this._longestInteractionMap.delete(o.id)}this._onAfterProcessingINPCandidate?.(r)}}}const Gp=e=>{const t=q.requestIdleCallback||q.setTimeout;q.document?.visibilityState==="hidden"?e():(e=_c(e),jt("visibilitychange",e,{once:!0,capture:!0}),jt("pagehide",e,{once:!0,capture:!0}),t(()=>{e(),io("visibilitychange",e,{capture:!0}),io("pagehide",e,{capture:!0})}))},k0=[200,500],C0=40,R0=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=Zr();Jo(()=>{I0();const r=es("INP");let s;const o=gc(t,co),i=c=>{Gp(()=>{for(const d of c)o._processEntry(d);const u=o._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,s())})},a=lr("event",i,{durationThreshold:t.durationThreshold??C0});s=Xr(e,r,k0,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{i(a.takeRecords()),s(!0)}))})};class A0{_processEntry(t){this._onBeforeProcessingEntry?.(t)}}const M0=[2500,4e3],x0=(e,t={})=>{Jo(()=>{const n=Zr(),r=es("LCP");let s;const o=gc(t,A0),i=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)o._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-ur(),0),r.entries=[u],s())},a=lr("largest-contentful-paint",i);if(a){s=Xr(e,r,M0,t.reportAllChanges);const c=_c(()=>{i(a.takeRecords()),a.disconnect(),s(!0)}),u=d=>{d.isTrusted&&(Gp(c),io(d.type,u,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])jt(d,u,{capture:!0})}})},N0=[800,1800],ca=e=>{q.document?.prerendering?Jo(()=>ca(e)):q.document?.readyState!=="complete"?addEventListener("load",()=>ca(e),!0):setTimeout(e)},O0=(e,t={})=>{const n=es("TTFB"),r=Xr(e,n,N0,t.reportAllChanges);ca(()=>{const s=Qr();s&&(n.value=Math.max(s.responseStart-ur(),0),n.entries=[s],r(!0))})},vr={},uo={};let Vp,Jp,Yp,Kp;function yc(e,t=!1){return Yo("cls",e,P0,Vp,t)}function Sc(e,t=!1){return Yo("lcp",e,D0,Jp,t)}function L0(e){return Yo("ttfb",e,F0,Yp)}function Xp(e){return Yo("inp",e,$0,Kp)}function En(e,t){return Qp(e,t),uo[e]||(U0(e),uo[e]=!0),Zp(e,t)}function ts(e,t){const n=vr[e];if(n?.length)for(const r of n)try{r(t)}catch(s){bn&&m.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${kt(r)}
Error:`,s)}}function P0(){return T0(e=>{ts("cls",{metric:e}),Vp=e},{reportAllChanges:!0})}function D0(){return x0(e=>{ts("lcp",{metric:e}),Jp=e},{reportAllChanges:!0})}function F0(){return O0(e=>{ts("ttfb",{metric:e}),Yp=e})}function $0(){return R0(e=>{ts("inp",{metric:e}),Kp=e})}function Yo(e,t,n,r,s=!1){Qp(e,t);let o;return uo[e]||(o=n(),uo[e]=!0),r&&t({metric:r}),Zp(e,t,s?o:void 0)}function U0(e){const t={};e==="event"&&(t.durationThreshold=0),lr(e,n=>{ts(e,{entries:n})},t)}function Qp(e,t){vr[e]=vr[e]||[],vr[e].push(t)}function Zp(e,t,n){return()=>{n&&n();const r=vr[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function B0(e){return"duration"in e}const H0=e=>{const t=n=>{(n.type==="pagehide"||q.document?.visibilityState==="hidden")&&e(n)};jt("visibilitychange",t,{capture:!0,once:!0}),jt("pagehide",t,{capture:!0,once:!0})};function ki(e){return typeof e=="number"&&isFinite(e)}function Jt(e,t,n,{...r}){const s=j(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),qr(e,()=>{const o=In({startTime:t,...r});return o&&o.end(n),o})}function bc(e){const t=C();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:o}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=z(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const g={release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":q.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...s};return In({name:n,attributes:g,startTime:o,experimental:{standalone:!0}})}function ns(){return q.addEventListener&&q.performance}function _e(e){return e/1e3}function W0(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function eh(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function th(e,t){let n,r=!1;function s(a){!r&&n&&t(a,n),r=!0}H0(()=>{s("pagehide")});const o=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(s("navigation"),o(),i())}),i=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,i()})}function j0(e){let t=0,n;if(!eh("layout-shift"))return;const r=yc(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);th(e,(s,o)=>{q0(t,n,o,s),r()})}function q0(e,t,n,r){bn&&m.log(`Sending CLS span (${e})`);const s=t?_e((Re()||0)+t.startTime):he(),o=z().getScopeData().transactionName,i=t?Be(t.sources[0]?.node):"Layout shift",a={[re]:"auto.http.browser.cls",[ve]:"ui.webvital.cls",[sr]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=Be(u.node)});const c=bc({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Wr]:"",[jr]:e}),c.end(s))}function z0(e){let t=0,n;if(!eh("largest-contentful-paint"))return;const r=Sc(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);th(e,(s,o)=>{G0(t,n,o,s),r()})}function G0(e,t,n,r){bn&&m.log(`Sending LCP span (${e})`);const s=_e((Re()||0)+(t?.startTime||0)),o=z().getScopeData().transactionName,i=t?Be(t.element):"Largest contentful paint",a={[re]:"auto.http.browser.lcp",[ve]:"ui.webvital.lcp",[sr]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Be(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=bc({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Wr]:"millisecond",[jr]:e}),c.end(s))}function Je(e){return e&&((Re()||performance.timeOrigin)+e)/1e3}function nh(e){const t={};if(e.nextHopProtocol!=null){const{name:n,version:r}=W0(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return Re()||ns()?.timeOrigin?V0({...t,"http.request.redirect_start":Je(e.redirectStart),"http.request.redirect_end":Je(e.redirectEnd),"http.request.worker_start":Je(e.workerStart),"http.request.fetch_start":Je(e.fetchStart),"http.request.domain_lookup_start":Je(e.domainLookupStart),"http.request.domain_lookup_end":Je(e.domainLookupEnd),"http.request.connect_start":Je(e.connectStart),"http.request.secure_connection_start":Je(e.secureConnectionStart),"http.request.connection_end":Je(e.connectEnd),"http.request.request_start":Je(e.requestStart),"http.request.response_start":Je(e.responseStart),"http.request.response_end":Je(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function V0(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const J0=2147483647;let Tl=0,tt={},De,lo;function Y0({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=ns();if(r&&Re()){r.mark&&q.performance.mark("sentry-tracing-init");const s=t?z0(n):eI(),o=tI(),i=e?j0(n):Z0();return()=>{s?.(),o(),i?.()}}return()=>{}}function K0(){En("longtask",({entries:e})=>{const t=be();if(!t)return;const{op:n,start_timestamp:r}=j(t);for(const s of e){const o=_e(Re()+s.startTime),i=_e(s.duration);n==="navigation"&&r&&o<r||Jt(t,o,o+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[re]:"auto.ui.browser.metrics"}})}})}function X0(){new PerformanceObserver(t=>{const n=be();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=_e(Re()+r.startTime),{start_timestamp:o,op:i}=j(n);if(i==="navigation"&&o&&s<o)continue;const a=_e(r.duration),c={[re]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),Jt(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function Q0(){En("event",({entries:e})=>{const t=be();if(t){for(const n of e)if(n.name==="click"){const r=_e(Re()+n.startTime),s=_e(n.duration),o={name:Be(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[re]:"auto.ui.browser.metrics"}},i=xd(n.target);i&&(o.attributes["ui.component_name"]=i),Jt(t,r,r+s,o)}}})}function Z0(){return yc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(tt.cls={value:e.value,unit:""},lo=t)},!0)}function eI(){return Sc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(tt.lcp={value:e.value,unit:"millisecond"},De=t)},!0)}function tI(){return L0(({metric:e})=>{e.entries[e.entries.length-1]&&(tt.ttfb={value:e.value,unit:"millisecond"})})}function nI(e,t){const n=ns(),r=Re();if(!n?.getEntries||!r)return;const s=_e(r),o=n.getEntries(),{op:i,start_timestamp:a}=j(e);o.slice(Tl).forEach(c=>{const u=_e(c.startTime),d=_e(Math.max(0,c.duration));if(!(i==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{iI(e,c,s);break}case"mark":case"paint":case"measure":{sI(e,c,u,d,s,t.ignorePerformanceApiSpans);const l=Zr(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(tt.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(tt.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{uI(e,c,c.name,u,d,s,t.ignoreResourceSpans);break}}}),Tl=Math.max(o.length-1,0),lI(e),i==="pageload"&&(pI(tt),t.recordClsOnPageloadSpan||delete tt.cls,t.recordLcpOnPageloadSpan||delete tt.lcp,Object.entries(tt).forEach(([c,u])=>{cf(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",ur()),dI(e,t)),De=void 0,lo=void 0,tt={}}function rI(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function sI(e,t,n,r,s,o){if(rI(t)||["mark","measure"].includes(t.entryType)&&st(t.name,o))return;const i=Qr(!1),a=_e(i?i.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,l={[re]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),oI(l,t),c<=d&&Jt(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function oI(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&Gt(s))e[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(Gt(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function iI(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{hs(e,t,r,n)}),hs(e,t,"secureConnection",n,"TLS/SSL"),hs(e,t,"fetch",n,"cache"),hs(e,t,"domainLookup",n,"DNS"),cI(e,t,n)}function hs(e,t,n,r,s=n){const o=aI(n),i=t[o],a=t[`${n}Start`];!a||!i||Jt(e,r+_e(a),r+_e(i),{op:`browser.${s}`,name:t.name,attributes:{[re]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function aI(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function cI(e,t,n){const r=n+_e(t.requestStart),s=n+_e(t.responseEnd),o=n+_e(t.responseStart);t.responseEnd&&(Jt(e,r,s,{op:"browser.request",name:t.name,attributes:{[re]:"auto.ui.browser.metrics"}}),Jt(e,o,s,{op:"browser.response",name:t.name,attributes:{[re]:"auto.ui.browser.metrics"}}))}function uI(e,t,n,r,s,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(i?.includes(a))return;const c={[re]:"auto.resource.browser.metrics"},u=dn(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(q.location.origin),fI(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d={...c,...nh(t)},l=o+r,f=l+s;Jt(e,l,f,{name:n.replace(q.location.origin,""),op:a,attributes:d})}function lI(e){const t=q.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),ki(n.rtt)&&(tt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ki(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),ki(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function dI(e,t){De&&t.recordLcpOnPageloadSpan&&(De.element&&e.setAttribute("lcp.element",Be(De.element)),De.id&&e.setAttribute("lcp.id",De.id),De.url&&e.setAttribute("lcp.url",De.url.trim().slice(0,200)),De.loadTime!=null&&e.setAttribute("lcp.loadTime",De.loadTime),De.renderTime!=null&&e.setAttribute("lcp.renderTime",De.renderTime),e.setAttribute("lcp.size",De.size)),lo?.sources&&t.recordClsOnPageloadSpan&&lo.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Be(n.node)))}function fI(e,t,n){n.forEach(([r,s])=>{const o=e[r];o!=null&&(typeof o=="number"&&o<J0||typeof o=="string")&&(t[s]=o)})}function pI(e){const t=Qr(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function hI(){return ns()&&Re()?En("element",mI):()=>{}}const mI=({entries:e})=>{const t=be(),n=t?Se(t):void 0,r=n?j(n).description:z().getScopeData().transactionName;e.forEach(s=>{const o=s;if(!o.identifier)return;const i=o.name,a=o.renderTime,c=o.loadTime,[u,d]=c?[_e(c),"load-time"]:a?[_e(a),"render-time"]:[he(),"entry-emission"],l=i==="image-paint"?_e(Math.max(0,(a??0)-(c??0))):0,f={[re]:"auto.ui.browser.elementtiming",[ve]:"ui.elementtiming",[$e]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":o.id,"element.type":o.element?.tagName?.toLowerCase()||"unknown","element.size":o.naturalWidth&&o.naturalHeight?`${o.naturalWidth}x${o.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":o.url||void 0,"element.identifier":o.identifier,"element.paint_type":i};Ot({name:`element[${o.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+l)})})},gI=1e3;let vl,ua,la;function rh(e){Kt("dom",e),Xt("dom",_I)}function _I(){if(!q.document)return;const e=Ke.bind(null,"dom"),t=Il(e,!0);q.document.addEventListener("click",t,!1),q.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const s=q[n]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(Ce(s,"addEventListener",function(o){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[i]=u[i]||{refCount:0};if(!d.handler){const l=Il(e);d.handler=l,o.call(this,i,l,c)}d.refCount++}catch{}return o.call(this,i,a,c)}}),Ce(s,"removeEventListener",function(o){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[i];d&&(d.refCount--,d.refCount<=0&&(o.call(this,i,d.handler,c),d.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,a,c)}}))})}function yI(e){if(e.type!==ua)return!1;try{if(!e.target||e.target._sentryId!==la)return!1}catch{}return!0}function SI(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Il(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=bI(n);if(SI(n.type,r))return;Le(n,"_sentryCaptured",!0),r&&!r._sentryId&&Le(r,"_sentryId",Ie());const s=n.type==="keypress"?"input":n.type;yI(n)||(e({event:n,name:s,global:t}),ua=n.type,la=r?r._sentryId:void 0),clearTimeout(vl),vl=q.setTimeout(()=>{la=void 0,ua=void 0},gI)}}function bI(e){try{return e.target}catch{return null}}let ms;function Ko(e){const t="history";Kt(t,e),Xt(t,EI)}function EI(){if(q.addEventListener("popstate",()=>{const t=q.location.href,n=ms;if(ms=t,n===t)return;Ke("history",{from:n,to:t})}),!AT())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=ms,o=TI(String(r));if(ms=o,s===o)return t.apply(this,n);Ke("history",{from:s,to:o})}return t.apply(this,n)}}Ce(q.history,"pushState",e),Ce(q.history,"replaceState",e)}function TI(e){try{return new URL(e,q.location.origin).toString()}catch{return e}}const Us={};function Ec(e){const t=Us[e];if(t)return t;let n=q[e];if(ea(n))return Us[e]=n.bind(q);const r=q.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o?.[e]&&(n=o[e]),r.head.removeChild(s)}catch(s){bn&&m.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(Us[e]=n.bind(q))}function vI(e){Us[e]=void 0}function rs(...e){return Ec("setTimeout")(...e)}const bt="__sentry_xhr_v3__";function Tc(e){Kt("xhr",e),Xt("xhr",II)}function II(){if(!q.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,o=he()*1e3,i=rt(r[0])?r[0].toUpperCase():void 0,a=wI(r[1]);if(!i||!a)return t.apply(n,r);n[bt]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[bt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:he()*1e3,startTimestamp:o,xhr:n,virtualError:s};Ke("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[bt];return h&&rt(f)&&rt(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[bt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const o={startTimestamp:he()*1e3,xhr:n};return Ke("xhr",o),t.apply(n,r)}})}function wI(e){if(rt(e))return e;try{return e.toString()}catch{}}const kI=Symbol.for("sentry__originalRequestBody");function sh(e){return new URLSearchParams(e).toString()}function fo(e,t=m){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[sh(e)];if(!e)return[void 0]}catch(n){return bn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return bn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function vc(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const n=e[0][kI];return n!==void 0?n:void 0}}function oh(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return bn&&m.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return o&&(n[s.toLowerCase()]=o),n},{}):{}}const Ci=[],Bs=new Map,An=new Map,CI=60;function RI(){if(ns()&&Re()){const t=AI();return()=>{t()}}return()=>{}}const da={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function AI(){return Xp(MI)}const MI=({metric:e})=>{if(e.value==null)return;const t=_e(e.value);if(t>CI)return;const n=e.entries.find(h=>h.duration===e.value&&da[h.name]);if(!n)return;const{interactionId:r}=n,s=da[n.name],o=_e(Re()+n.startTime),i=be(),a=i?Se(i):void 0,c=r!=null?Bs.get(r):void 0,u=c?.span||a,d=u?j(u).description:z().getScopeData().transactionName,l=c?.elementName||Be(n.target),f={[re]:"auto.http.browser.inp",[ve]:`ui.interaction.${s}`,[sr]:n.duration},p=bc({name:l,transaction:d,attributes:f,startTime:o});p&&(p.addEvent("inp",{[Wr]:"millisecond",[jr]:e.value}),p.end(o+t))};function xI(){const e=Object.keys(da);so()&&e.forEach(s=>{q.addEventListener(s,t,{capture:!0,passive:!0})});function t(s){const o=s.target;if(!o)return;const i=Be(o),a=Math.round(s.timeStamp);if(An.set(a,i),An.size>50){const c=An.keys().next().value;c!==void 0&&An.delete(c)}}function n(s){const o=Math.round(s.startTime);let i=An.get(o);if(!i)for(let a=-5;a<=5;a++){const c=An.get(o+a);if(c){i=c;break}}return i||"<unknown>"}const r=({entries:s})=>{const o=be(),i=o&&Se(o);s.forEach(a=>{if(!B0(a))return;const c=a.interactionId;if(c==null||Bs.has(c))return;const u=a.target?Be(a.target):n(a);if(Ci.length>10){const d=Ci.shift();Bs.delete(d)}Ci.push(c),Bs.set(c,{span:i,elementName:u})})};En("event",r),En("first-input",r)}const NI=40;function Ic(e,t=Ec("fetch")){let n=0,r=0;async function s(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw vI("fetch"),c}finally{n-=i,r--}}return xf(e,s,Va(e.bufferSize||NI))}const v=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function OI(){const e=C();if(!e){v&&m.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){v&&m.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function LI(){const e=C();if(!e){v&&m.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){v&&m.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const PI={startProfiler:OI,stopProfiler:LI},DI=10,FI=20,$I=30,UI=40,BI=50;function Yn(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?ft:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const HI=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,WI=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,jI=/\((\S*)(?::(\d+))(?::(\d+))\)/,qI=/at (.+?) ?\(data:(.+?),/,zI=e=>{const t=e.match(qI);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=HI.exec(e);if(n){const[,s,o,i]=n;return Yn(s,ft,+o,+i)}const r=WI.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=jI.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[o,i]=lh(r[1]||ft,r[2]);return Yn(i,o,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},ih=[$I,zI],GI=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,VI=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,JI=e=>{const t=GI.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=VI.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],s=t[1]||ft;return[s,r]=lh(s,r),Yn(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},ah=[BI,JI],YI=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,KI=e=>{const t=YI.exec(e);return t?Yn(t[2],t[1]||ft,+t[3],t[4]?+t[4]:void 0):void 0},XI=[UI,KI],QI=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ZI=e=>{const t=QI.exec(e);return t?Yn(t[2],t[3]||ft,+t[1]):void 0},ew=[DI,ZI],tw=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,nw=e=>{const t=tw.exec(e);return t?Yn(t[5],t[3]||t[4]||ft,+t[1],+t[2]):void 0},rw=[FI,nw],ch=[ih,ah],uh=Id(...ch),lh=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ft,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function sw(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Nt(r)}},o=ow(e);return at(s,[o])}function ow(e){return[{type:"user_report"},e]}const gs=1024,iw="Breadcrumbs",aw=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:iw,setup(n){t.console&&Xa(lw(n)),t.dom&&rh(uw(n,t.dom)),t.xhr&&Tc(dw(n)),t.fetch&&cc(fw(n)),t.history&&Ko(pw(n)),t.sentry&&n.on("beforeSendEvent",cw(n))}}}),dh=aw;function cw(e){return function(n){C()===e&&mt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:rn(n)},{event:n})}}function uw(e,t){return function(r){if(C()!==e)return;let s,o,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>gs&&(v&&m.warn(`\`dom.maxStringLength\` cannot exceed ${gs}, but a value of ${a} was configured. Sentry will use ${gs} instead.`),a=gs),typeof i=="string"&&(i=[i]);try{const u=r.event,d=hw(u)?u.target:u;s=Be(d,{keyAttrs:i,maxStringLength:a}),o=xd(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};o&&(c.data={"ui.component_name":o}),mt(c,{event:r.event,name:r.name,global:r.global})}}function lw(e){return function(n){if(C()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:to(n.level),message:Gs(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Gs(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;mt(r,{input:n.args,level:n.level})}}function dw(e){return function(n){if(C()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,o=n.xhr[bt];if(!r||!s||!o)return;const{method:i,url:a,status_code:c,body:u}=o,d={method:i,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:d,type:"http",level:Sp(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),mt(f,l)}}function fw(e){return function(n){if(C()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const o=n.fetchData,i={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),mt(a,i)}else{const o=n.response,i={...n.fetchData,status_code:o?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,o?.status;const a={input:n.args,response:o,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:i,type:"http",level:Sp(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),mt(c,a)}}}function pw(e){return function(n){if(C()!==e)return;let r=n.from,s=n.to;const o=dn(O.location.href);let i=r?dn(r):void 0;const a=dn(s);i?.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(s=a.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),mt({category:"navigation",data:{from:r,to:s}})}}function hw(e){return!!e&&!!e.target}const mw=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],gw="BrowserApiErrors",_w=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:gw,setupOnce(){t.setTimeout&&Ce(O,"setTimeout",wl),t.setInterval&&Ce(O,"setInterval",wl),t.requestAnimationFrame&&Ce(O,"requestAnimationFrame",yw),t.XMLHttpRequest&&"XMLHttpRequest"in O&&Ce(XMLHttpRequest.prototype,"send",Sw);const n=t.eventTarget;n&&(Array.isArray(n)?n:mw).forEach(s=>bw(s,t))}}}),fh=_w;function wl(e){return function(...t){const n=t[0];return t[0]=Jn(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${kt(e)}`}}),e.apply(this,t)}}function yw(e){return function(t){return e.apply(this,[Jn(t,{mechanism:{data:{handler:kt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Sw(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Ce(n,s,function(o){const i={mechanism:{data:{handler:kt(o)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},a=Ma(o);return a&&(i.mechanism.data.handler=kt(a)),Jn(o,i)})}),e.apply(this,t)}}function bw(e,t){const r=O[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Ce(r,"addEventListener",function(s){return function(o,i,a){try{Ew(i)&&(i.handleEvent=Jn(i.handleEvent,{mechanism:{data:{handler:kt(i),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&Tw(this,o,i),s.apply(this,[o,Jn(i,{mechanism:{data:{handler:kt(i),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),Ce(r,"removeEventListener",function(s){return function(o,i,a){try{const c=i.__sentry_wrapped__;c&&s.call(this,o,c,a)}catch{}return s.call(this,o,i,a)}}))}function Ew(e){return typeof e.handleEvent=="function"}function Tw(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const ph=()=>({name:"BrowserSession",setupOnce(){if(typeof O.document>"u"){v&&m.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}zi({ignoreDuration:!0}),Gi(),Ko(({from:e,to:t})=>{e!==void 0&&e!==t&&(zi({ignoreDuration:!0}),Gi())})}}),vw="GlobalHandlers",Iw=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:vw,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(ww(n),kl("onerror")),t.onunhandledrejection&&(kw(n),kl("onunhandledrejection"))}}}),hh=Iw;function ww(e){kd(t=>{const{stackParser:n,attachStacktrace:r}=_h();if(C()!==e||Dp())return;const{msg:s,url:o,line:i,column:a,error:c}=t,u=Cw(Vo(n,c||s,void 0,r,!1),o,i,a);u.level="error",or(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function kw(e){Cd(t=>{const{stackParser:n,attachStacktrace:r}=_h();if(C()!==e||Dp())return;const s=mh(t),o=Gt(s)?gh(s):Vo(n,s,void 0,r,!0);o.level="error",or(o,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function mh(e){if(Gt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function gh(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Cw(e,t,n,r){const s=e.exception=e.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=Rw(t)??Tn();return c.length===0&&c.push({colno:u,filename:l,function:ft,in_app:!0,lineno:d}),e}function kl(e){v&&m.log(`Global Handler attached: ${e}`)}function _h(){return C()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function Rw(e){if(!(!rt(e)||e.length===0))return e.startsWith("data:")?`<${Wt(e,!1)}>`:e}const yh=()=>({name:"HttpContext",preprocessEvent(e){if(!O.navigator&&!O.location&&!O.document)return;const t=hc(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),Aw="cause",Mw=5,xw="LinkedErrors",Nw=((e={})=>{const t=e.limit||Mw,n=e.key||Aw;return{name:xw,preprocessEvent(r,s,o){const i=o.getOptions();sS(Go,i.stackParser,n,t,r,s)}}}),Sh=Nw,Ow="SpotlightBrowser",Lw=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:Ow,setup:()=>{v&&m.log("Using Sidecar URL",t)},processEvent:n=>Fw(n)?null:n,afterAllSetup:n=>{Pw(n,t)}}});function Pw(e,t){const n=Ec("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){m.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Ks(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(o=>{o.status>=200&&o.status<400&&(r=0)},o=>{r++,m.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",o)})})}const Dw=Lw;function Fw(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}function $w(){return Uw()?(v&&Yt(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Uw(){if(typeof O.window>"u")return!1;const e=O;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const n=Tn(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(O===O.top&&r.some(o=>n.startsWith(`${o}://`)))}function po(e){return[zf(),jf(),ub(),fh(),dh(),hh(),Sh(),Kf(),yh(),ph()]}function Bw(e={}){const t=!e.skipBrowserExtensionCheck&&$w();let n=e.defaultIntegrations==null?po():e.defaultIntegrations;const r={...e,enabled:t?!1:e.enabled,stackParser:Gm(e.stackParser||uh),integrations:ny({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||Ic};return xy(Hp,r)}function Hw(){}function Ww(e){e()}function jw(e={}){const t=O.document,n=t?.head||t?.body;if(!n){v&&m.error("[showReportDialog] Global document not defined");return}const r=z(),o=C()?.getDsn();if(!o){v&&m.error("[showReportDialog] DSN not configured");return}const i={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||_f()},a=O.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=ey(o,i);const{onLoad:c,onClose:u}=i;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{O.removeEventListener("message",d)}};O.addEventListener("message",d)}n.appendChild(a)}const qw=D,zw="ReportingObserver",Cl=new WeakMap,Gw=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(Cl.has(C()))for(const s of r)Ze(o=>{o.setExtra("url",s.url);const i=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(o.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}mf(`${i}: ${a}`)})}return{name:zw,setupOnce(){if(!xT())return;new qw.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Cl.set(r,!0)}}}),Vw=Gw,Jw="HttpClient",Yw=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Jw,setup(n){sk(n,t),ok(n,t)}}}),Kw=Yw;function Xw(e,t,n,r,s){if(Eh(e,n.status,n.url)){const o=ik(t,r);let i,a,c,u;vh()&&([i,c]=Rl("Cookie",o),[a,u]=Rl("Set-Cookie",n));const d=Th({url:o.url,method:o.method,status:n.status,requestHeaders:i,responseHeaders:a,requestCookies:c,responseCookies:u,error:s,type:"fetch"});or(d)}}function Rl(e,t){const n=ek(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=bh(s))}catch{}return[n,r]}function Qw(e,t,n,r,s){if(Eh(e,t.status,t.responseURL)){let o,i,a;if(vh()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(i=bh(u))}catch{}try{a=tk(t)}catch{}o=r}const c=Th({url:t.responseURL,method:n,status:t.status,requestHeaders:o,responseHeaders:a,responseCookies:i,error:s,type:"xhr"});or(c)}}function Zw(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function bh(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function ek(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function tk(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return s&&o&&(n[s]=o),n},{}):{}}function nk(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function rk(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function sk(e,t){bp()&&cc(n=>{if(C()!==e)return;const{response:r,args:s,error:o,virtualError:i}=n,[a,c]=s;r&&Xw(t,a,r,c,o||i)},!1)}function ok(e,t){"XMLHttpRequest"in D&&Tc(n=>{if(C()!==e)return;const{error:r,virtualError:s}=n,o=n.xhr,i=o[bt];if(!i)return;const{method:a,request_headers:c}=i;try{Qw(t,o,a,c,r||s)}catch(u){v&&m.warn("Error while extracting response event form XHR response",u)}})}function Eh(e,t,n){return rk(e.failedRequestStatusCodes,t)&&nk(e.failedRequestTargets,n)&&!Bf(n,C())}function Th(e){const t=C(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,o={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Zw(e.responseHeaders)}}};return Rt(o,{type:`auto.http.client.${e.type}`,handled:!1}),o}function ik(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function vh(){const e=C();return e?!!e.getOptions().sendDefaultPii:!1}const Ri=D,ak=7,ck="ContextLines",uk=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:ak;return{name:ck,processEvent(n){return dk(n,t)}}}),lk=uk;function dk(e,t){const n=Ri.document,r=Ri.location&&Uf(Ri.location.href);if(!n||!r)return e;const s=e.exception?.values;if(!s?.length)return e;const o=n.documentElement.innerHTML;if(!o)return e;const i=["<!DOCTYPE html>","<html>",...o.split(`
`),"</html>"];return s.forEach(a=>{const c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>fk(u,i,r,t)))}),e}function fk(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||ig(t,e,r),e}const pk="GraphQLClient",hk=(e=>({name:pk,setup(t){mk(t,e),gk(t,e)}}));function mk(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const o=j(n).data||{};if(!(o[ve]==="http.client"))return;const c=o[Tg]||o["http.url"],u=o[Eg]||o["http.method"];if(!rt(c)||!rt(u))return;const{endpoints:d}=t,l=st(c,d),f=wh(r);if(l&&f){const p=kh(f);if(p){const h=Ih(p);n.updateName(`${u} ${c} (${h})`),Xo(p)&&n.setAttribute("graphql.document",p.query),Qo(p)&&(n.setAttribute("graphql.persisted_query.hash.sha256",p.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",p.extensions.persistedQuery.version))}}})}function gk(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:s,type:o,data:i}=n;if(o==="http"&&(s==="fetch"||s==="xhr")){const d=i?.url,{endpoints:l}=t,f=st(d,l),p=wh(r);if(f&&i&&p){const h=kh(p);if(!i.graphql&&h){const g=Ih(h);i["graphql.operation"]=g,Xo(h)&&(i["graphql.document"]=h.query),Qo(h)&&(i["graphql.persisted_query.hash.sha256"]=h.extensions.persistedQuery.sha256Hash,i["graphql.persisted_query.version"]=h.extensions.persistedQuery.version)}}}})}function Ih(e){if(Qo(e))return`persisted ${e.operationName}`;if(Xo(e)){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=_k(t);return r?`${s} ${r}`:`${s}`}return"unknown"}function wh(e){const t="xhr"in e;let n;if(t){const r=e.xhr[bt];n=r&&fo(r.body)[0]}else{const r=vc(e.input);n=fo(r)[0]}return n}function _k(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Hs(e){return typeof e=="object"&&e!==null}function Xo(e){return Hs(e)&&typeof e.query=="string"}function Qo(e){return Hs(e)&&typeof e.operationName=="string"&&Hs(e.extensions)&&Hs(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function kh(e){try{const t=JSON.parse(e);return Xo(t)||Qo(t)?t:void 0}catch{return}}const yk=hk,de=D,wc="sentryReplaySession",Sk="replay_event",kc="Unable to send Replay",bk=3e5,Ek=9e5,Tk=5e3,vk=5500,Ik=6e4,wk=5e3,kk=3,Al=15e4,_s=5e3,Ck=3e3,Rk=300,Cc=2e7,Ak=4999,Mk=5e4,Ml=36e5;var xk=Object.defineProperty,Nk=(e,t,n)=>t in e?xk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xl=(e,t,n)=>Nk(e,typeof t!="symbol"?t+"":t,n),Te=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Te||{});function Ok(e){return e.nodeType===e.ELEMENT_NODE}function Ir(e){return e?.host?.shadowRoot===e}function wr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Lk(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function Pk(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function ho(e){try{const t=e.rules||e.cssRules;return t?Lk(Array.from(t,Ch).join("")):null}catch{return null}}function Dk(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],o=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${o?" !important":""};`}return`${e.selectorText} { ${t} }`}function Ch(e){let t;if($k(e))try{t=ho(e.styleSheet)||Pk(e)}catch{}else if(Uk(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=Dk(e)),r&&(n=Fk(n)),r||s)return n}return t||e.cssText}function Fk(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function $k(e){return"styleSheet"in e}function Uk(e){return"selectorText"in e}let Rh=class{constructor(){xl(this,"idNodeMap",new Map),xl(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Bk(){return new Rh}function Zo({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Nr({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Kn(e){return e.toLowerCase()}function fa(e){return e.toUpperCase()}const Nl="__rrweb_original__";function Hk(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const o=t.getImageData,i=Nl in o?o[Nl]:o;if(new Uint32Array(i.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Rc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Kn(t):null}function mo(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Ah(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const Ol={};function Mh(e){const t=Ol[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return Ol[e]=r.bind(window)}function pa(...e){return Mh("setTimeout")(...e)}function xh(...e){return Mh("clearTimeout")(...e)}function Nh(e){try{return e.contentDocument}catch{}}let Wk=1;const jk=new RegExp("[^a-z0-9-_:]"),Or=-2;function Ac(){return Wk++}function qk(e){if(e instanceof HTMLFormElement)return"form";const t=Kn(e.tagName);return jk.test(t)?"div":t}function zk(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Mn,Ll;const Gk=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Vk=/^(?:[a-z+]+:)?\/\//i,Jk=/^www\..*/i,Yk=/^(data:)([^,]*),(.*)/i;function Kk(e,t){if(!e||t.size===0)return e;try{const n=e.split(";"),r=[];for(let s of n){if(s=s.trim(),!s)continue;const o=s.indexOf(":");if(o===-1){r.push(s);continue}const i=s.slice(0,o).trim();t.has(i)||r.push(s)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function go(e,t){return(e||"").replace(Gk,(n,r,s,o,i,a)=>{const c=s||i||a,u=r||o||"";if(!c)return n;if(Vk.test(c)||Jk.test(c))return`url(${u}${c}${u})`;if(Yk.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${zk(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const Xk=/^[^ \t\n\r\u000c]+/,Qk=/^[, \t\n\r\u000c]+/;function Zk(e,t){if(t.trim()==="")return t;let n=0;function r(o){let i;const a=o.exec(t.substring(n));return a?(i=a[0],n+=i.length,i):""}const s=[];for(;r(Qk),!(n>=t.length);){let o=r(Xk);if(o.slice(-1)===",")o=Ln(e,o.substring(0,o.length-1)),s.push(o);else{let i="";o=Ln(e,o);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((o+i).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((o+i).trim());break}else c==="("&&(a=!0);i+=c,n+=1}}}return s.join(", ")}const Pl=new WeakMap;function Ln(e,t){return!t||t.trim()===""?t:ei(e,t)}function eC(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ei(e,t){let n=Pl.get(e);if(n||(n=e.createElement("a"),Pl.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Oh(e,t,n,r,s,o,i){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return Ln(e,r);if(n==="xlink:href"&&r[0]!=="#")return Ln(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return Ln(e,r);if(n==="srcset")return Zk(e,r);if(n==="style"){let a=go(r,ei(e));return i&&i.size>0&&(a=Kk(a,i)),a}else if(t==="object"&&n==="data")return Ln(e,r);return typeof o=="function"?o(n,r,s):r}function Lh(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function tC(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const o=e.classList[s];if(t.test(o))return!0}if(n)return e.matches(n)}catch{}return!1}function nC(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function an(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:an(e.parentNode,t,n,r+1)}function Pn(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(nC(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Xn(e,t,n,r,s,o){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(o){if(c=an(i,Pn(r,s)),c<0)return!0;a=an(i,Pn(t,n),c>=0?c:1/0)}else{if(a=an(i,Pn(t,n)),a<0)return!1;c=an(i,Pn(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!o}catch{}return!!o}function rC(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){const a=pa(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{xh(a),s=!0,t()});return}const i="about:blank";if(r.location.href!==i||e.src===i||e.src==="")return pa(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function sC(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const o=pa(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{xh(o),r=!0,t()})}function oC(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:g,maskInputFn:_,dataURLOptions:y={},inlineImages:b,recordCanvas:N,keepIframeSrcFn:R,newlyAddedElement:$=!1,ignoreCSSAttributes:L}=t,S=iC(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Te.Document,childNodes:[],compatMode:e.compatMode}:{type:Te.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Te.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return cC(e,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:_,dataURLOptions:y,inlineImages:b,recordCanvas:N,keepIframeSrcFn:R,newlyAddedElement:$,rootId:S,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:L});case e.TEXT_NODE:return aC(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:g,maskInputOptions:h,maskInputFn:_,rootId:S});case e.CDATA_SECTION_NODE:return{type:Te.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Te.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function iC(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function aC(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,g=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=ho(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=go(f,ei(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const _=Xn(e,r,o,s,i,n);if(!p&&!h&&!g&&f&&_&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),g&&f&&(c.textarea||_)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const y=Zo({type:null,tagName:l,maskInputOptions:c});f=Nr({isMasked:Xn(e,r,o,s,i,y),element:e,value:f,maskInputFn:u})}return{type:Te.Text,textContent:f||"",isStyle:p,rootId:d}}function cC(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:g,maskTextClass:_,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:N,ignoreCSSAttributes:R}=t,$=tC(e,r,s,o),L=qk(e);let S={};const A=e.attributes.length;for(let E=0;E<A;E++){const M=e.attributes[E];M.name&&!Lh(L,M.name,M.value)&&(S[M.name]=Oh(n,L,Kn(M.name),M.value,e,c,R))}if(L==="link"&&i){const E=Array.from(n.styleSheets).find(k=>k.href===e.href);let M=null;E&&(M=ho(E)),M&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=go(M,E.href))}if(L==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const E=ho(e.sheet);E&&(S._cssText=go(E,ei(n)))}if(L==="input"||L==="textarea"||L==="select"||L==="option"){const E=e,M=Rc(E),k=mo(E,fa(L),M),x=E.checked;if(M!=="submit"&&M!=="button"&&k){const P=Xn(E,_,b,y,N,Zo({type:M,tagName:fa(L),maskInputOptions:a}));S.value=Nr({isMasked:P,element:E,value:k,maskInputFn:u})}x&&(S.checked=x)}if(L==="option"&&(e.selected&&!a.select?S.selected=!0:delete S.selected),L==="canvas"&&f){if(e.__context==="2d")Hk(e)||(S.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const E=e.toDataURL(d.type,d.quality),M=n.createElement("canvas");M.width=e.width,M.height=e.height;const k=M.toDataURL(d.type,d.quality);E!==k&&(S.rr_dataURL=E)}}if(L==="img"&&l){Mn||(Mn=n.createElement("canvas"),Ll=Mn.getContext("2d"));const E=e,M=E.currentSrc||E.getAttribute("src")||"<unknown-src>",k=E.crossOrigin,x=()=>{E.removeEventListener("load",x);try{Mn.width=E.naturalWidth,Mn.height=E.naturalHeight,Ll.drawImage(E,0,0),S.rr_dataURL=Mn.toDataURL(d.type,d.quality)}catch(P){if(E.crossOrigin!=="anonymous"){E.crossOrigin="anonymous",E.complete&&E.naturalWidth!==0?x():E.addEventListener("load",x);return}else console.warn(`Cannot inline img src=${M}! Error: ${P}`)}E.crossOrigin==="anonymous"&&(k?S.crossOrigin=k:E.removeAttribute("crossorigin"))};E.complete&&E.naturalWidth!==0?x():E.addEventListener("load",x)}if((L==="audio"||L==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),$){const{width:E,height:M}=e.getBoundingClientRect();S={class:S.class,rr_width:`${E}px`,rr_height:`${M}px`}}L==="iframe"&&!p(S.src)&&(!$&&!Nh(e)&&(S.rr_src=S.src),delete S.src);let F;try{customElements.get(L)&&(F=!0)}catch{}return{type:Te.Element,tagName:L,attributes:S,childNodes:[],isSVG:eC(e)||void 0,needBlock:$,rootId:g,isCustom:F}}function le(e){return e==null?"":e.toLowerCase()}function uC(e,t){if(t.comment&&e.type===Te.Comment)return!0;if(e.type===Te.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Ah(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(le(e.attributes.name).match(/^msapplication-tile(image|color)$/)||le(e.attributes.name)==="application-name"||le(e.attributes.rel)==="icon"||le(e.attributes.rel)==="apple-touch-icon"||le(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&le(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(le(e.attributes.property).match(/^(og|twitter|fb):/)||le(e.attributes.name).match(/^(og|twitter):/)||le(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(le(e.attributes.name)==="robots"||le(e.attributes.name)==="googlebot"||le(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(le(e.attributes.name)==="author"||le(e.attributes.name)==="generator"||le(e.attributes.name)==="framework"||le(e.attributes.name)==="publisher"||le(e.attributes.name)==="progid"||le(e.attributes.property).match(/^article:/)||le(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(le(e.attributes.name)==="google-site-verification"||le(e.attributes.name)==="yandex-verification"||le(e.attributes.name)==="csrf-token"||le(e.attributes.name)==="p:domain_verify"||le(e.attributes.name)==="verify-v1"||le(e.attributes.name)==="verification"||le(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Dn(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:N={},inlineImages:R=!1,recordCanvas:$=!1,onSerialize:L,onIframeLoad:S,iframeLoadTimeout:A=5e3,onBlockedImageLoad:F,onStylesheetLoad:E,stylesheetLoadTimeout:M=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:x=!1,ignoreCSSAttributes:P}=t;let{preserveWhiteSpace:Z=!0}=t;const Y=oC(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,dataURLOptions:N,inlineImages:R,recordCanvas:$,keepIframeSrcFn:k,newlyAddedElement:x,ignoreCSSAttributes:P});if(!Y)return console.warn(e,"not serialized"),null;let te;r.hasNode(e)?te=r.getId(e):uC(Y,b)||!Z&&Y.type===Te.Text&&!Y.isStyle&&!Y.textContent.replace(/^\s+|\s+$/gm,"").length?te=Or:te=Ac();const T=Object.assign(Y,{id:te});if(r.add(e,T),te===Or)return null;L&&L(e);let W=!f;if(T.type===Te.Element){W=W&&!T.needBlock;const I=e.shadowRoot;I&&wr(I)&&(T.isShadowHost=!0)}if((T.type===Te.Document||T.type===Te.Element)&&W){b.headWhitespace&&T.type===Te.Element&&T.tagName==="head"&&(Z=!1);const I={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:N,inlineImages:R,recordCanvas:$,preserveWhiteSpace:Z,onSerialize:L,onIframeLoad:S,iframeLoadTimeout:A,onBlockedImageLoad:F,onStylesheetLoad:E,stylesheetLoadTimeout:M,keepIframeSrcFn:k,ignoreCSSAttributes:P},G=e.childNodes?Array.from(e.childNodes):[];for(const oe of G){const ne=Dn(oe,I);ne&&T.childNodes.push(ne)}if(Ok(e)&&e.shadowRoot)for(const oe of Array.from(e.shadowRoot.childNodes)){const ne=Dn(oe,I);ne&&(wr(e.shadowRoot)&&(ne.isShadow=!0),T.childNodes.push(ne))}}if(e.parentNode&&Ir(e.parentNode)&&wr(e.parentNode)&&(T.isShadow=!0),T.type===Te.Element&&T.tagName==="iframe"&&!T.needBlock&&rC(e,()=>{const I=Nh(e);if(I&&S){const G=Dn(I,{doc:I,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:N,inlineImages:R,recordCanvas:$,preserveWhiteSpace:Z,onSerialize:L,onIframeLoad:S,iframeLoadTimeout:A,onStylesheetLoad:E,stylesheetLoadTimeout:M,keepIframeSrcFn:k,ignoreCSSAttributes:P});G&&S(e,G)}},A),T.type===Te.Element&&T.tagName==="img"&&!e.complete&&T.needBlock){const I=e,G=()=>{if(I.isConnected&&!I.complete&&F)try{const oe=I.getBoundingClientRect();oe.width>0&&oe.height>0&&F(I,T,oe)}catch{}I.removeEventListener("load",G)};I.isConnected&&I.addEventListener("load",G)}return T.type===Te.Element&&T.tagName==="link"&&typeof T.attributes.rel=="string"&&(T.attributes.rel==="stylesheet"||T.attributes.rel==="preload"&&typeof T.attributes.href=="string"&&Ah(T.attributes.href)==="css")&&sC(e,()=>{if(E){const I=Dn(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:N,inlineImages:R,recordCanvas:$,preserveWhiteSpace:Z,onSerialize:L,onIframeLoad:S,iframeLoadTimeout:A,onStylesheetLoad:E,stylesheetLoadTimeout:M,keepIframeSrcFn:k,ignoreCSSAttributes:P});I&&E(e,I)}},M),T.type===Te.Element&&delete T.needBlock,T}function lC(e,t){const{mirror:n=new Rh,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOM:b=!1,dataURLOptions:N,preserveWhiteSpace:R,onSerialize:$,onIframeLoad:L,iframeLoadTimeout:S,onBlockedImageLoad:A,onStylesheetLoad:F,stylesheetLoadTimeout:E,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:k=new Set([])}=t||{};return Dn(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:N,inlineImages:f,recordCanvas:p,preserveWhiteSpace:R,onSerialize:$,onIframeLoad:L,iframeLoadTimeout:S,onBlockedImageLoad:A,onStylesheetLoad:F,stylesheetLoadTimeout:E,keepIframeSrcFn:M,newlyAddedElement:!1,ignoreCSSAttributes:k})}function Oe(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const xn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Dl={map:{},getId(){return console.error(xn),-1},getNode(){return console.error(xn),null},removeNodeFromMap(){console.error(xn)},has(){return console.error(xn),!1},reset(){console.error(xn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Dl=new Proxy(Dl,{get(e,t,n){return t==="map"&&console.error(xn),Reflect.get(e,t,n)}}));function Lr(e,t,n={}){let r=null,s=0;return function(...o){const i=Date.now();!s&&n.leading===!1&&(s=i);const a=t-(i-s),c=this;a<=0||a>t?(r&&(_C(r),r=null),s=i,e.apply(c,o)):!r&&n.trailing!==!1&&(r=ti(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,o)},a))}}function Ph(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){ti(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>Ph(e,t,o||{},!0)}function Mc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let _o=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(_o=()=>new Date().getTime());function Dh(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function Fh(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function $h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Uh(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function qe(e,t,n,r,s){if(!e)return!1;const o=Uh(e);if(!o)return!1;const i=Pn(t,n);if(!s){const u=r&&o.matches(r);return i(o)&&!u}const a=an(o,i);let c=-1;return a<0?!1:(r&&(c=an(o,Pn(null,r))),a>-1&&c<0?!0:a<c)}function dC(e,t){return t.getId(e)!==-1}function Ai(e,t){return t.getId(e)===Or}function Bh(e,t){if(Ir(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Bh(e.parentNode,t):!0:!0}function ha(e){return!!e.changedTouches}function fC(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Hh(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Wh(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ma(e){return!!e?.shadowRoot}class pC{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function jh(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function hC(e){let t=e,n;for(;n=jh(t);)t=n;return t}function mC(e){const t=e.ownerDocument;if(!t)return!1;const n=hC(e);return t.contains(n)}function qh(e){const t=e.ownerDocument;return t?t.contains(e)||mC(e):!1}const Fl={};function xc(e){const t=Fl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return Fl[e]=r.bind(window)}function gC(...e){return xc("requestAnimationFrame")(...e)}function ti(...e){return xc("setTimeout")(...e)}function _C(...e){return xc("clearTimeout")(...e)}var V=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(V||{}),H=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(H||{}),Ne=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ne||{}),yt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(yt||{}),Nn=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Nn||{});function Nc(e){try{return e.contentDocument}catch{}}function yC(e){try{return e.contentWindow}catch{}}function $l(e){return"__ln"in e}class SC{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&$l(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&$l(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Ul=(e,t)=>`${e}@${t}`;class bC{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new SC,s=c=>{let u=c,d=Or;for(;d===Or;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},o=c=>{if(!c.parentNode||!qh(c))return;const u=Ir(c.parentNode)?this.mirror.getId(jh(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=Dn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{Hh(f,this.mirror)&&!qe(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Wh(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),ma(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{qe(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:h,height:g})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${h}px`,height:`${g}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Bl(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||o(c);for(const c of this.addedSet)!Hl(this.droppedSet,c)&&!Bl(this.removes,c,this.mirror)||Hl(this.movedSet,c)?o(c):this.droppedSet.add(c);let i=null;for(;r.length;){let c=null;if(i){const u=this.mirror.getId(i.value.parentNode),d=s(i.value);u!==-1&&d!==-1&&(c=i)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}i=c.previous,r.removeNode(c.value),o(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Ai(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Xn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Uh(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const i=Rc(n),a=n.tagName;s=mo(n,a,i);const c=Zo({maskInputOptions:this.maskInputOptions,tagName:a,type:i}),u=Xn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Nr({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!Nc(n))r="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(t.target,o)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Lh(n.tagName,r)&&(o.attributes[r]=Oh(this.doc,Kn(n.tagName),Kn(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==i.style.getPropertyValue(a)||u!==i.style.getPropertyPriority(a)?u===""?o.styleDiff[a]=c:o.styleDiff[a]=[c,u]:o._unchangedStyles[a]=[c,u]}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(o.styleDiff[a]=!1)}break}case"childList":{if(qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=Ir(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ai(n,this.mirror)||!dC(n,this.mirror)||(this.addedSet.has(n)?(ga(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Bh(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Ul(r,s)]?ga(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:Ir(t.target)&&wr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Ai(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Ul(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);qe(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),ma(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ga(e,t){e.delete(t),t.childNodes?.forEach(n=>ga(e,n))}function Bl(e,t,n){return e.length===0?!1:EC(e,t,n)}function EC(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(o=>o.id===s))return!0;r=r.parentNode}return!1}function Hl(e,t){return e.size===0?!1:zh(e,t)}function zh(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:zh(e,n):!1}let kr;function TC(e){kr=e}function vC(){kr=void 0}const ee=e=>kr?(...n)=>{try{return e(...n)}catch(r){if(kr&&kr(r)===!0)return()=>{};throw r}}:e,Fn=[];function ss(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Gh(e,t){const n=new bC;Fn.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=window?.Zone?.__symbol__?.("MutationObserver");s&&window[s]&&(r=window[s]);const o=new r(ee(i=>{e.onMutation&&e.onMutation(i)===!1||n.processMutations.bind(n)(i)}));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function IC({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,o=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let i=[],a;const c=Lr(ee(l=>{const f=Date.now()-a;e(i.map(p=>(p.timeOffset-=f,p)),l),i=[],a=null}),o),u=ee(Lr(ee(l=>{const f=ss(l),{clientX:p,clientY:h}=ha(l)?l.changedTouches[0]:l;a||(a=_o()),i.push({x:p,y:h,id:r.getId(f),timeOffset:_o()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?H.Drag:l instanceof MouseEvent?H.MouseMove:H.TouchMove)}),s,{trailing:!1})),d=[Oe("mousemove",u,n),Oe("touchmove",u,n),Oe("drag",u,n)];return ee(()=>{d.forEach(l=>l())})}function wC({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=ss(f);if(qe(p,r,s,o,!0))return;let h=null,g=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=yt.Mouse;break;case"touch":h=yt.Touch;break;case"pen":h=yt.Pen;break}h===yt.Touch?Ne[l]===Ne.MouseDown?g="TouchStart":Ne[l]===Ne.MouseUp&&(g="TouchEnd"):yt.Pen}else ha(f)&&(h=yt.Touch);h!==null?(u=h,(g.startsWith("Touch")&&h===yt.Touch||g.startsWith("Mouse")&&h===yt.Mouse)&&(h=null)):Ne[l]===Ne.Click&&(h=u,u=null);const _=ha(f)?f.changedTouches[0]:f;if(!_)return;const y=n.getId(p),{clientX:b,clientY:N}=_;ee(e)({type:Ne[g],id:y,x:b,y:N,...h!==null&&{pointerType:h}})};return Object.keys(Ne).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Kn(l);const p=d(l);if(window.PointerEvent)switch(Ne[l]){case Ne.MouseDown:case Ne.MouseUp:f=f.replace("mouse","pointer");break;case Ne.TouchStart:case Ne.TouchEnd:return}c.push(Oe(f,p,t))}),ee(()=>{c.forEach(l=>l())})}function Vh({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){const a=ee(Lr(ee(c=>{const u=ss(c);if(!u||qe(u,r,s,o,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=Dh(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),i.scroll||100));return Oe("scroll",a,t)}function kC({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=ee(Lr(ee(()=>{const o=Fh(),i=$h();(n!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),n=o,r=i)}),200));return Oe("resize",s,t)}const CC=["INPUT","TEXTAREA","SELECT"],Wl=new WeakMap;function RC({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:g}){function _(S){let A=ss(S);const F=S.isTrusted,E=A&&fa(A.tagName);if(E==="OPTION"&&(A=A.parentElement),!A||!E||CC.indexOf(E)<0||qe(A,r,s,o,!0))return;const M=A;if(M.classList.contains(i)||a&&M.matches(a))return;const k=Rc(A);let x=mo(M,E,k),P=!1;const Z=Zo({maskInputOptions:c,tagName:E,type:k}),Y=Xn(A,f,h,p,g,Z);(k==="radio"||k==="checkbox")&&(P=A.checked),x=Nr({isMasked:Y,element:A,value:x,maskInputFn:u}),y(A,l?{text:x,isChecked:P,userTriggered:F}:{text:x,isChecked:P});const te=A.name;k==="radio"&&te&&P&&t.querySelectorAll(`input[type="radio"][name="${te}"]`).forEach(T=>{if(T!==A){const W=Nr({isMasked:Y,element:T,value:mo(T,E,k),maskInputFn:u});y(T,l?{text:W,isChecked:!P,userTriggered:!1}:{text:W,isChecked:!P})}})}function y(S,A){const F=Wl.get(S);if(!F||F.text!==A.text||F.isChecked!==A.isChecked){Wl.set(S,A);const E=n.getId(S);ee(e)({...A,id:E})}}const N=(d.input==="last"?["change"]:["input","change"]).map(S=>Oe(S,ee(_),t)),R=t.defaultView;if(!R)return()=>{N.forEach(S=>S())};const $=R.Object.getOwnPropertyDescriptor(R.HTMLInputElement.prototype,"value"),L=[[R.HTMLInputElement.prototype,"value"],[R.HTMLInputElement.prototype,"checked"],[R.HTMLSelectElement.prototype,"value"],[R.HTMLTextAreaElement.prototype,"value"],[R.HTMLSelectElement.prototype,"selectedIndex"],[R.HTMLOptionElement.prototype,"selected"]];return $&&$.set&&N.push(...L.map(S=>Ph(S[0],S[1],{set(){ee(_)({target:this,isTrusted:!1})}},!1,R))),ee(()=>{N.forEach(S=>S())})}function yo(e){const t=[];function n(r,s){if(ys("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ys("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ys("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ys("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(i)}else if(r.parentStyleSheet){const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(i)}return s}return n(e,t)}function Ut(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function AC({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:ee((d,l,f)=>{const[p,h]=f,{id:g,styleId:_}=Ut(l,t,n.styleMirror);return(g&&g!==-1||_&&_!==-1)&&e({id:g,styleId:_,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:ee((d,l,f)=>{const[p]=f,{id:h,styleId:g}=Ut(l,t,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&e({id:h,styleId:g,removes:[{index:p}]}),d.apply(l,f)})});let i;r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:ee((d,l,f)=>{const[p]=f,{id:h,styleId:g}=Ut(l,t,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&e({id:h,styleId:g,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:ee((d,l,f)=>{const[p]=f,{id:h,styleId:g}=Ut(l,t,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&e({id:h,styleId:g,replaceSync:p}),d.apply(l,f)})}));const c={};Ss("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Ss("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Ss("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Ss("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:ee((f,p,h)=>{const[g,_]=h,{id:y,styleId:b}=Ut(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,adds:[{rule:g,index:[...yo(p),_||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:ee((f,p,h)=>{const[g]=h,{id:_,styleId:y}=Ut(p.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||y&&y!==-1)&&e({id:_,styleId:y,removes:[{index:[...yo(p),g]}]}),f.apply(p,h)})})}),ee(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function Jh({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,o=s?.prototype?Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!o?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return o.get?.call(this)},set(i){const a=o.set?.call(this,i);if(r!==null&&r!==-1)try{t.adoptStyleSheets(i,r)}catch{}return a}}),ee(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function MC({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:ee((a,c,u)=>{const[d,l,f]=u;if(n.has(d))return o.apply(c,[d,l,f]);const{id:p,styleId:h}=Ut(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:yo(c.parentRule)}),a.apply(c,u)})});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:ee((a,c,u)=>{const[d]=u;if(n.has(d))return i.apply(c,[d]);const{id:l,styleId:f}=Ut(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:yo(c.parentRule)}),a.apply(c,u)})}),ee(()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i})}function xC({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=ee(u=>Lr(ee(d=>{const l=ss(d);if(!l||qe(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:g}=l;e({type:u,id:s.getId(l),currentTime:f,volume:p,muted:h,playbackRate:g})}),o.media||500)),c=[Oe("play",a(Nn.Play),i),Oe("pause",a(Nn.Pause),i),Oe("seeked",a(Nn.Seeked),i),Oe("volumechange",a(Nn.VolumeChange),i),Oe("ratechange",a(Nn.RateChange),i)];return ee(()=>{c.forEach(u=>u())})}function NC({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(c,u,d){const l=new o(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const i=Mc(t.fonts,"add",function(a){return function(c){return ti(ee(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=o}),r.push(i),ee(()=>{r.forEach(a=>a())})}function OC(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=e;let a=!0;const c=ee(()=>{const u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:g,endContainer:_,endOffset:y}=p;qe(h,r,s,o,!0)||qe(_,r,s,o,!0)||d.push({start:n.getId(h),startOffset:g,end:n.getId(_),endOffset:y})}i({ranges:d})});return c(),Oe("selectionchange",c)}function LC({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Mc(n.customElements,"define",function(s){return function(o,i,a){try{t({define:{name:o}})}catch{}return s.apply(this,[o,i,a])}})}function PC(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Gh(e,e.doc));const s=IC(e),o=wC(e),i=Vh(e),a=kC(e,{win:n}),c=RC(e),u=xC(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=AC(e,{win:n}),l=Jh(e,e.doc),f=MC(e,{win:n}),e.collectFonts&&(p=NC(e)));const h=OC(e),g=LC(e),_=[];for(const y of e.plugins)_.push(y.observer(y.callback,n,y.options));return ee(()=>{Fn.forEach(y=>y.reset()),r?.disconnect(),s(),o(),i(),a(),c(),u(),d(),l(),f(),p(),h(),g(),_.forEach(y=>y())})}function ys(e){return typeof window[e]<"u"}function Ss(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class _a{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const o=r||this.getIdToRemoteIdMap(t),i=s||this.getRemoteIdToIdMap(t);let a=o.get(n);return a||(a=this.generateIdFn(),o.set(n,a),i.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(o=>this.getId(t,o,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const o=s.get(n);return o||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class DC{constructor(){this.crossOriginIframeMirror=new _a(Ac),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class FC{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new _a(Ac),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new _a(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);const r=Nc(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const o=this.transformCrossOriginEvent(s,n.data.event);o&&this.wrappedEmit(o,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case V.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:V.IncrementalSnapshot,data:{source:H.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case V.Meta:case V.Load:case V.DomContentLoaded:return!1;case V.Plugin:return n;case V.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case V.IncrementalSnapshot:switch(n.data.source){case H.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case H.Drag:case H.TouchMove:case H.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case H.ViewportResize:return!1;case H.MediaInteraction:case H.MouseInteraction:case H.Scroll:case H.CanvasMutation:case H.Input:return this.replaceIds(n.data,t,["id"]),n;case H.StyleSheetRule:case H.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case H.Font:return n;case H.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case H.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const o of s)!Array.isArray(n[o])&&typeof n[o]!="number"||(Array.isArray(n[o])?n[o]=t.getIds(r,n[o]):n[o]=t.getId(r,n[o]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Te.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class $C{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class UC{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!wr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=Gh({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Vh({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),ti(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Jh({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=Nc(t),r=yC(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Mc(t.prototype,"attachShadow",function(s){return function(o){const i=s.call(this,o);return this.shadowRoot&&qh(this)&&r.addShadowRoot(this.shadowRoot,n),i}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bs=0;bs<jl.length;bs++)BC[jl.charCodeAt(bs)]=bs;class ql{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class HC{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new pC,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const o of t){let i;this.styleMirror.has(o)?i=this.styleMirror.getId(o):(i=this.styleMirror.add(o),s.push({styleId:i,rules:Array.from(o.rules||CSSRule,(a,c)=>({rule:Ch(a),index:c}))})),r.styleIds.push(i)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class WC{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,gC(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let ge,So;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const et=Bk();function wt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:g,maskInputOptions:_,slimDOMOptions:y,maskAttributeFn:b,maskInputFn:N,maskTextFn:R,maxCanvasSize:$=null,packFn:L,sampling:S={},dataURLOptions:A={},mousemoveWait:F,recordDOM:E=!0,recordCanvas:M=!1,recordCrossOriginIframes:k=!1,recordAfter:x=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:P=!1,collectFonts:Z=!1,inlineImages:Y=!1,plugins:te,keepIframeSrcFn:T=()=>!1,ignoreCSSAttributes:W=new Set([]),errorHandler:I,onMutation:G,getCanvasManager:oe}=e;TC(I);const ne=k?window.parent===window:!0;let ye=!1;if(!ne)try{window.parent.document&&(ye=!1)}catch{ye=!0}if(ne&&!t)throw new Error("emit function is required");if(!ne&&!ye)return()=>{};F!==void 0&&S.mousemove===void 0&&(S.mousemove=F),et.reset();const Me=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},Pt=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};fC();let xe,Pe=0;const ct=K=>{for(const He of te||[])He.eventProcessor&&(K=He.eventProcessor(K));return L&&!ye&&(K=L(K)),K};ge=(K,He)=>{const X=K;if(X.timestamp=_o(),Fn[0]?.isFrozen()&&X.type!==V.FullSnapshot&&!(X.type===V.IncrementalSnapshot&&X.data.source===H.Mutation)&&Fn.forEach(ke=>ke.unfreeze()),ne)t?.(ct(X),He);else if(ye){const ke={type:"rrweb",event:ct(X),origin:window.location.origin,isCheckout:He};window.parent.postMessage(ke,"*")}if(X.type===V.FullSnapshot)xe=X,Pe=0;else if(X.type===V.IncrementalSnapshot){if(X.data.source===H.Mutation&&X.data.isAttachIframe)return;Pe++;const ke=r&&Pe>=r,se=n&&xe&&X.timestamp-xe.timestamp>n;(ke||se)&&ut(!0)}};const Dt=K=>{ge({type:V.IncrementalSnapshot,data:{source:H.Mutation,...K}})},dr=K=>ge({type:V.IncrementalSnapshot,data:{source:H.Scroll,...K}}),is=K=>ge({type:V.IncrementalSnapshot,data:{source:H.CanvasMutation,...K}}),fr=K=>ge({type:V.IncrementalSnapshot,data:{source:H.AdoptedStyleSheet,...K}}),ie=new HC({mutationCb:Dt,adoptedStyleSheetCb:fr}),fe=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new DC:new FC({mirror:et,mutationCb:Dt,stylesheetManager:ie,recordCrossOriginIframes:k,wrappedEmit:ge});for(const K of te||[])K.getMirror&&K.getMirror({nodeMirror:et,crossOriginIframeMirror:fe.crossOriginIframeMirror,crossOriginIframeStyleMirror:fe.crossOriginIframeStyleMirror});const Ve=new WC,we=qC(oe,{mirror:et,win:window,mutationCb:K=>ge({type:V.IncrementalSnapshot,data:{source:H.CanvasMutation,...K}}),recordCanvas:M,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:$,sampling:S.canvas,dataURLOptions:A,errorHandler:I}),Ae=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new $C:new UC({mutationCb:Dt,scrollCb:dr,bypassOptions:{onMutation:G,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Me,dataURLOptions:A,maskAttributeFn:b,maskTextFn:R,maskInputFn:N,recordCanvas:M,inlineImages:Y,sampling:S,slimDOMOptions:Pt,iframeManager:fe,stylesheetManager:ie,canvasManager:we,keepIframeSrcFn:T,processedNodeManager:Ve,ignoreCSSAttributes:W},mirror:et}),ut=(K=!1)=>{if(!E)return;ge({type:V.Meta,data:{href:window.location.href,width:$h(),height:Fh()}},K),ie.reset(),Ae.init(),Fn.forEach(X=>X.lock());const He=lC(document,{mirror:et,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Me,maskAttributeFn:b,maskInputFn:N,maskTextFn:R,slimDOM:Pt,dataURLOptions:A,recordCanvas:M,inlineImages:Y,onSerialize:X=>{Hh(X,et)&&fe.addIframe(X),Wh(X,et)&&ie.trackLinkElement(X),ma(X)&&Ae.addShadowRoot(X.shadowRoot,document)},onIframeLoad:(X,ke)=>{fe.attachIframe(X,ke),X.contentWindow&&we.addWindow(X.contentWindow),Ae.observeAttachShadow(X)},onStylesheetLoad:(X,ke)=>{ie.attachLinkElement(X,ke)},onBlockedImageLoad:(X,ke,{width:se,height:pr})=>{Dt({adds:[],removes:[],texts:[],attributes:[{id:ke.id,attributes:{style:{width:`${se}px`,height:`${pr}px`}}}]})},keepIframeSrcFn:T,ignoreCSSAttributes:W});if(!He)return console.warn("Failed to snapshot the document");ge({type:V.FullSnapshot,data:{node:He,initialOffset:Dh(window)}}),Fn.forEach(X=>X.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ie.adoptStyleSheets(document.adoptedStyleSheets,et.getId(document))};So=ut;try{const K=[],He=ke=>ee(PC)({onMutation:G,mutationCb:Dt,mousemoveCb:(se,pr)=>ge({type:V.IncrementalSnapshot,data:{source:pr,positions:se}}),mouseInteractionCb:se=>ge({type:V.IncrementalSnapshot,data:{source:H.MouseInteraction,...se}}),scrollCb:dr,viewportResizeCb:se=>ge({type:V.IncrementalSnapshot,data:{source:H.ViewportResize,...se}}),inputCb:se=>ge({type:V.IncrementalSnapshot,data:{source:H.Input,...se}}),mediaInteractionCb:se=>ge({type:V.IncrementalSnapshot,data:{source:H.MediaInteraction,...se}}),styleSheetRuleCb:se=>ge({type:V.IncrementalSnapshot,data:{source:H.StyleSheetRule,...se}}),styleDeclarationCb:se=>ge({type:V.IncrementalSnapshot,data:{source:H.StyleDeclaration,...se}}),canvasMutationCb:is,fontCb:se=>ge({type:V.IncrementalSnapshot,data:{source:H.Font,...se}}),selectionCb:se=>{ge({type:V.IncrementalSnapshot,data:{source:H.Selection,...se}})},customElementCb:se=>{ge({type:V.IncrementalSnapshot,data:{source:H.CustomElement,...se}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Me,inlineStylesheet:h,sampling:S,recordDOM:E,recordCanvas:M,inlineImages:Y,userTriggeredOnInput:P,collectFonts:Z,doc:ke,maskAttributeFn:b,maskInputFn:N,maskTextFn:R,keepIframeSrcFn:T,blockSelector:o,unblockSelector:i,slimDOMOptions:Pt,dataURLOptions:A,mirror:et,iframeManager:fe,stylesheetManager:ie,shadowDomManager:Ae,processedNodeManager:Ve,canvasManager:we,ignoreCSSAttributes:W,plugins:te?.filter(se=>se.observer)?.map(se=>({observer:se.observer,options:se.options,callback:pr=>ge({type:V.Plugin,data:{plugin:se.name,payload:pr}})}))||[]},{});fe.addLoadListener(ke=>{try{K.push(He(ke.contentDocument))}catch(se){console.warn(se)}});const X=()=>{ut(),K.push(He(document))};return document.readyState==="interactive"||document.readyState==="complete"?X():(K.push(Oe("DOMContentLoaded",()=>{ge({type:V.DomContentLoaded,data:{}}),x==="DOMContentLoaded"&&X()})),K.push(Oe("load",()=>{ge({type:V.Load,data:{}}),x==="load"&&X()},window))),()=>{K.forEach(ke=>ke()),Ve.destroy(),So=void 0,vC()}}catch(K){console.warn(K)}}function jC(e){if(!So)throw new Error("please take full snapshot after start recording");So(e)}wt.mirror=et;wt.takeFullSnapshot=jC;function qC(e,t){try{return e?e(t):new ql}catch{return console.warn("Unable to initialize CanvasManager"),new ql}}var zl;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(zl||(zl={}));const zC=3,GC=5;function Oc(e){return e>9999999999?e:e*1e3}function Mi(e){return e>9999999999?e/1e3:e}function os(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:V.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:je(t,10,1e3)}}),t.category==="console")))}const VC="button,a";function Yh(e){return e.closest(VC)||e}function Kh(e){const t=Xh(e);return!t||!(t instanceof Element)?t:Yh(t)}function Xh(e){return JC(e)?e.target:e}function JC(e){return typeof e=="object"&&!!e&&"target"in e}let Bt;function YC(e){return Bt||(Bt=[],KC()),Bt.push(e),()=>{const t=Bt?Bt.indexOf(e):-1;t>-1&&Bt.splice(t,1)}}function KC(){Ce(de,"open",function(e){return function(...t){if(Bt)try{Bt.forEach(n=>n())}catch{}return e.apply(de,t)}})}const XC=new Set([H.Mutation,H.StyleSheetRule,H.StyleDeclaration,H.AdoptedStyleSheet,H.CanvasMutation,H.Selection,H.MediaInteraction]);function QC(e,t,n){e.handleClick(t,n)}class ZC{constructor(t,n,r=os){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=YC(()=>{this._lastMutation=Gl()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(tR(n,this._ignoreSelector)||!nR(t))return;const r={timestamp:Mi(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Mi(t)}registerScroll(t=Date.now()){this._lastScroll=Mi(t)}registerClick(t){const n=Yh(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Gl();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,o=!r&&!s,{clickCount:i,clickBreadcrumb:a}=t;if(o){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:de.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,d);return}if(i>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:de.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=rs(()=>this._checkClicks(),1e3)}}const eR=["A","BUTTON","INPUT"];function tR(e,t){return!!(!eR.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function nR(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Gl(){return Date.now()/1e3}function rR(e,t){try{if(!sR(t))return;const{source:n}=t.data;if(XC.has(n)&&e.registerMutation(t.timestamp),n===H.Scroll&&e.registerScroll(t.timestamp),oR(t)){const{type:r,id:s}=t.data,o=wt.mirror.getNode(s);o instanceof HTMLElement&&r===Ne.Click&&e.registerClick(o)}}catch{}}function sR(e){return e.type===zC}function oR(e){return e.data.source===H.MouseInteraction}function dt(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Lc=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Lc||{});const iR=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function aR(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(iR.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const cR=e=>t=>{if(!e.isEnabled())return;const n=uR(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s?.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&QC(e.clickDetector,n,Kh(t.event)),os(e,n)};function Qh(e,t){const n=wt.mirror.getId(e),r=n&&wt.mirror.getNode(n),s=r&&wt.mirror.getMeta(r),o=s&&dR(s)?s:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map(i=>i.type===Lc.Text&&i.textContent).filter(Boolean).map(i=>i.trim()).join(""),attributes:aR(o.attributes)}}:{}}}function uR(e){const{target:t,message:n}=lR(e);return dt({category:`ui.${e.name}`,...Qh(t,n)})}function lR(e){const t=e.name==="click";let n,r=null;try{r=t?Kh(e.event):Xh(e.event),n=Be(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function dR(e){return e.type===Lc.Element}function fR(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=pR(t);n&&os(e,n)}function pR(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=e;if(!i||hR(i)||!o)return null;const a=t||r||s,c=o.length===1;if(!a&&c)return null;const u=Be(i,{maxStringLength:200})||"<unknown>",d=Qh(i,u);return dt({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}function hR(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const mR={resource:bR,paint:yR,navigation:SR};function xi(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function gR(e){return e.map(_R).filter(Boolean)}function _R(e){const t=mR[e.entryType];return t?t(e):null}function Qn(e){return((Re()||de.performance.timeOrigin)+e)/1e3}function yR(e){const{duration:t,entryType:n,name:r,startTime:s}=e,o=Qn(s);return{type:n,name:r,start:o,end:o+t,data:void 0}}function SR(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:g}=e;return s===0?null:{type:`${t}.${g}`,start:Qn(p),end:Qn(o),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:o,redirectCount:f}}}function bR(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Qn(o),end:Qn(s),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}}function ER(e){const t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return Pc(e,"largest-contentful-paint",n)}function TR(e){return e.sources!==void 0}function vR(e){const t=[],n=[];for(const r of e.entries)if(TR(r)){const s=[];for(const o of r.sources)if(o.node){n.push(o.node);const i=wt.mirror.getId(o.node);i&&s.push(i)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return Pc(e,"cumulative-layout-shift",n,t)}function IR(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return Pc(e,"interaction-to-next-paint",n)}function Pc(e,t,n,r){const s=e.value,o=e.rating,i=Qn(s);return{type:"web-vital",name:t,start:i,end:i,data:{value:s,size:s,rating:o,nodeIds:n?n.map(a=>wt.mirror.getId(a)):void 0,attributions:r}}}function wR(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(En(s,n))}),r.push(Sc(xi(ER,e)),yc(xi(vR,e)),Xp(xi(IR,e))),()=>{r.forEach(s=>s())}}const U=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,kR='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function CR(){const e=new Blob([kR]);return URL.createObjectURL(e)}const Vl=["log","warn","error"],Ws="[Replay] ";function Ni(e,t="info"){mt({category:"console",data:{logger:"replay"},level:t,message:`${Ws}${e}`},{level:t})}function RR(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return U?(Vl.forEach(r=>{n[r]=(...s)=>{m[r](Ws,...s),t&&Ni(s.join(""),to(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),m.error(Ws,r),e?me(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&Ni(r,"error")},n.infoTick=(...r)=>{m.log(Ws,...r),t&&setTimeout(()=>Ni(r[0]),0)}):Vl.forEach(r=>{n[r]=()=>{}}),n}const B=RR();class Dc extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Cc}.`)}}class Zh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Cc)throw new Dc;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Oc(t):null}}class AR{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){U&&B.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,o)=>{const i=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",i),!c.success){U&&B.error("Error in compression worker: ",c.response),o(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class MR{constructor(t){this._worker=new AR(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Oc(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Cc?Promise.reject(new Dc):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{U&&B.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class xR{constructor(t){this._fallback=new Zh,this._compression=new MR(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){U&&B.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const o of t)s.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(o){U&&B.exception(o,"Failed to add events when switching buffers.")}}}function NR({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=OR(t);if(n)return n}return U&&B.log("Using simple buffer"),new Zh}function OR(e){try{const t=e||LR();if(!t)return;U&&B.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new xR(n)}catch(t){U&&B.exception(t,"Failed to create compression worker")}}function LR(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?CR():""}function Fc(){try{return"sessionStorage"in de&&!!de.sessionStorage}catch{return!1}}function PR(e){DR(),e.session=void 0}function DR(){if(Fc())try{de.sessionStorage.removeItem(wc)}catch{}}function em(e){return e===void 0?!1:Math.random()<e}function ni(e){if(Fc())try{de.sessionStorage.setItem(wc,JSON.stringify(e))}catch{}}function tm(e){const t=Date.now(),n=e.id||Ie(),r=e.started||t,s=e.lastActivity||t,o=e.segmentId||0,i=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:s,segmentId:o,sampled:i,previousSessionId:a,dirty:c}}function FR(e,t){return em(e)?"session":t?"buffer":!1}function Jl({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=FR(e,t),o=tm({sampled:s,previousSessionId:r});return n&&ni(o),o}function $R(){if(!Fc())return null;try{const e=de.sessionStorage.getItem(wc);if(!e)return null;const t=JSON.parse(e);return U&&B.infoTick("Loading existing session"),tm(t)}catch{return null}}function ya(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function nm(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return ya(e.started,t,r)||ya(e.lastActivity,n,r)}function rm(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!nm(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Oi({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&$R();return s?rm(s,{sessionIdleExpire:e,maxReplayDuration:t})?(U&&B.infoTick("Session in sessionStorage is expired, creating new one..."),Jl(r,{previousSessionId:s.id})):s:(U&&B.infoTick("Creating new session"),Jl(r,{previousSessionId:n}))}function UR(e){return e.type===V.Custom}function $c(e,t,n){return om(e,t)?(sm(e,t,n),!0):!1}function BR(e,t,n){return om(e,t)?sm(e,t,n):Promise.resolve(null)}async function sm(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=e.getOptions(),i=HR(t,o.beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(o){const i=o&&o instanceof Dc,a=i?"addEventSizeExceeded":"addEvent",c=C();if(c){const u=i?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(i&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:a})}}function om(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Oc(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(U&&B.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function HR(e,t){try{if(typeof t=="function"&&UR(e))return t(e)}catch(n){return U&&B.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Uc(e){return!e.type}function Sa(e){return e.type==="transaction"}function WR(e){return e.type==="replay_event"}function Yl(e){return e.type==="feedback"}function jR(e){return(t,n)=>{if(!e.isEnabled()||!Uc(t)&&!Sa(t))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(Sa(t)){qR(e,t);return}zR(e,t)}}}function qR(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function zR(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||rs(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function GR(e){return t=>{!e.isEnabled()||!Uc(t)||VR(e,t)}}function VR(e,t){const n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=dt({category:"replay.hydrate-error",data:{url:Tn()}});os(e,r)}}function JR(e){const t=C();t&&t.on("beforeAddBreadcrumb",n=>YR(e,n))}function YR(e,t){if(!e.isEnabled()||!im(t))return;const n=KR(t);n&&os(e,n)}function KR(e){return!im(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?XR(e):dt(e)}function XR(e){const t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return dt(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>_s?(n=!0,`${s.slice(0,_s)}`):s;if(typeof s=="object")try{const o=je(s,7);return JSON.stringify(o).length>_s?(n=!0,`${JSON.stringify(o,null,2).slice(0,_s)}`):o}catch{}return s});return dt({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function im(e){return!!e.category}function QR(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function am(){const e=z().getPropagationContext().dsc;e&&delete e.replay_id;const t=be();if(t){const n=it(t);delete n.replay_id}}function ZR(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:V.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function e1(e,t){return e.recordingMode!=="buffer"||t.message===kc||!t.exception||t.type?!1:em(e.getOptions().errorSampleRate)}function t1(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(WR(t))return delete t.breadcrumbs,t;if(!Uc(t)&&!Sa(t)&&!Yl(t))return t;if(!e.checkAndHandleExpiredSession())return am(),t;if(Yl(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),ZR(e,t),t;if(QR(t,n)&&!e.getOptions()._experiments.captureExceptions)return U&&B.log("Ignoring error from rrweb internals",t),null;const s=e1(e,t);if((s||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),s&&e.recordingMode==="buffer"&&e.session?.sampled==="buffer"){const i=e.session;i.dirty=!0,e.getOptions().stickySession&&ni(i)}return t},{id:"Replay"})}function ri(e,t){return t.map(({type:n,start:r,end:s,name:o,data:i})=>{const a=e.throttledAddEvent({type:V.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:s,data:i}}});return typeof a=="string"?Promise.resolve(null):a})}function n1(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function r1(e){return t=>{if(!e.isEnabled())return;const n=n1(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(ri(e,[n]),!1)))}}function s1(e,t){return U&&e.getOptions()._experiments.traceInternals?!1:Bf(t,C())}function cm(e,t){e.isEnabled()&&t!==null&&(s1(e,t.name)||e.addUpdate(()=>(ri(e,[t]),!0)))}function si(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=sh(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function um(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function bo(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function lm(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:o,statusCode:i,request:a,response:c}}}function Pr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function qt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:o}=o1(n);return r.body=s,o?.length&&(r._meta={warnings:o}),r}function ba(e,t){return Object.entries(e).reduce((n,[r,s])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=s),n},{})}function o1(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Al,n=i1(e);if(t){const r=e.slice(0,Al);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function i1(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Eo(e,t){const n=a1(e);return st(n,t)}function a1(e,t=de.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(de.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function c1(e,t,n){try{const r=await l1(e,t,n),s=lm("resource.fetch",r);cm(n.replay,s)}catch(r){U&&B.exception(r,"Failed to capture fetch breadcrumb")}}function u1(e,t){const{input:n,response:r}=t,s=n?vc(n):void 0,o=si(s),i=r?um(r.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}async function l1(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Eo(i,n.networkDetailAllowUrls)&&!Eo(i,n.networkDetailDenyUrls),f=l?d1(n,t.input,u):Pr(u),p=await f1(l,n,t.response,d);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:f,response:p}}function d1({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?m1(n,t):{};if(!e)return qt(s,r,void 0);const o=vc(n),[i,a]=fo(o,B),c=qt(s,r,i);return a?bo(c,a):c}async function f1(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return Pr(s);const o=r?dm(r.headers,n):{};if(!r||!t&&s!==void 0)return qt(o,s,void 0);const[i,a]=await h1(r),c=p1(i,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:o});return a?bo(c,a):c}function p1(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const o=e?.length&&n===void 0?si(e):n;return r?t?qt(s,o,e):qt(s,o,void 0):Pr(o)}catch(o){return U&&B.exception(o,"Failed to serialize response body"),qt(s,n,void 0)}}async function h1(e){const t=g1(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await _1(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(U&&B.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(U&&B.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function dm(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function m1(e,t){return e.length===1&&typeof e[0]!="string"?Kl(e[0],t):e.length===2?Kl(e[1],t):{}}function Kl(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?dm(n,t):Array.isArray(n)?{}:ba(n,t):{}}function g1(e){try{return e.clone()}catch(t){U&&B.exception(t,"Failed to clone response body")}}function _1(e){return new Promise((t,n)=>{const r=rs(()=>n(new Error("Timeout while trying to read response body")),500);y1(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function y1(e){return await e.text()}async function S1(e,t,n){try{const r=E1(e,t,n),s=lm("resource.xhr",r);cm(n.replay,s)}catch(r){U&&B.exception(r,"Failed to capture xhr breadcrumb")}}function b1(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=si(r),o=n.getResponseHeader("content-length")?um(n.getResponseHeader("content-length")):I1(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),o!==void 0&&(e.data.response_body_size=o)}function E1(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!Eo(c,n.networkDetailAllowUrls)||Eo(c,n.networkDetailDenyUrls)){const L=Pr(l),S=Pr(f);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:L,response:S}}const p=a[bt],h=p?ba(p.request_headers,n.networkRequestHeaders):{},g=ba(oh(a),n.networkResponseHeaders),[_,y]=n.networkCaptureBodies?fo(i,B):[void 0],[b,N]=n.networkCaptureBodies?T1(a):[void 0],R=qt(h,l,_),$=qt(g,f,b);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:y?bo(R,y):R,response:N?bo($,N):$}}function T1(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return v1(e.response,e.responseType)}catch(n){t.push(n)}return U&&B.warn("Failed to get xhr response body",...t),[void 0]}function v1(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return U&&B.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return U&&B.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function I1(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return si(n)}catch{return}}function w1(e){const t=C();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",(c,u)=>k1(a,c,u))}catch{}}function k1(e,t,n){if(t.data)try{C1(t)&&A1(n)&&(b1(t,n),S1(t,n,e)),R1(t)&&M1(n)&&(u1(t,n),c1(t,n,e))}catch(r){U&&B.exception(r,"Error when enriching network breadcrumb")}}function C1(e){return e.category==="xhr"}function R1(e){return e.category==="fetch"}function A1(e){return e?.xhr}function M1(e){return e?.response}function x1(e){const t=C();rh(cR(e)),Ko(r1(e)),JR(e),w1(e);const n=t1(e);Sf(n),t&&(t.on("beforeSendEvent",GR(e)),t.on("afterSendEvent",jR(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,s)=>{const o=e.getSessionId();s?.includeReplay&&e.isEnabled()&&o&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=o)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function N1(e){try{return Promise.all(ri(e,[O1(de.performance.memory)]))}catch{return[]}}function O1(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function L1(e,t,n){return zy(e,t,{...n,setTimeoutImpl:rs})}const Es=D.navigator;function P1(){return/iPhone|iPad|iPod/i.test(Es?.userAgent??"")||/Macintosh/i.test(Es?.userAgent??"")&&Es?.maxTouchPoints&&Es?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function D1(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){U&&B.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&rR(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!$c(e,n,s))return!0;if(!s)return!1;const o=e.session;if($1(e,s),e.recordingMode==="buffer"&&o&&e.eventBuffer&&!o.dirty){const i=e.eventBuffer.getEarliestTimestamp();i&&(U&&B.log(`Updating session start time to earliest event in buffer to ${new Date(i)}`),o.started=i,e.getOptions().stickySession&&ni(o))}return o?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function F1(e){const t=e.getOptions();return{type:V.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function $1(e,t){!t||!e.session||e.session.segmentId!==0||$c(e,F1(e),!1)}function U1(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function B1(e,t,n,r){return at(af(e,Mo(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function H1({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const o=new TextEncoder().encode(r);n=new Uint8Array(o.length+e.length),n.set(o),n.set(e,o.length)}return n}async function W1({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o={event_id:n,integrations:s};e.emit("preprocessEvent",r,o);const i=await hf(e.getOptions(),r,o,t,e,Ee());if(!i)return null;e.emit("postprocessEvent",i,o),i.platform=i.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return i.sdk={...i.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},i}async function j1({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=H1({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=C(),f=z(),p=l?.getTransport(),h=l?.getDsn();if(!l||!p||!h||!o.sampled)return Promise.resolve({});const g={type:Sk,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:o.sampled},_=await W1({scope:f,client:l,replayId:t,event:g});if(!_)return l.recordDroppedEvent("event_processor","replay"),U&&B.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete _.sdkProcessingMetadata;const y=B1(_,i,h,l.getOptions().tunnel);let b;try{b=await p.send(y)}catch(R){const $=new Error(kc);try{$.cause=R}catch{}throw $}const N=Af({},b);if(Rf(N,"replay"))throw new Bc(N);if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new fm(b.statusCode);return b}class fm extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Bc extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}class Xl extends Error{constructor(){super("Session is too long, not sending replay")}}async function pm(e,t={count:0,interval:wk}){const{recordingData:n,onError:r}=e;if(n.length)try{return await j1(e),!0}catch(s){if(s instanceof fm||s instanceof Bc)throw s;if(gf("Replays",{_retryCount:t.count}),r&&r(s),t.count>=kk){const o=new Error(`${kc} - max retries exceeded`);try{o.cause=s}catch{}throw o}return t.interval*=++t.count,new Promise((o,i)=>{rs(async()=>{try{await pm(e,t),o(!0)}catch(a){i(a)}},t.interval)})}}const hm="__THROTTLED",q1="__SKIPPED";function z1(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},o=()=>[...r.values()].reduce((a,c)=>a+c,0);let i=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),o()>=t){const d=i;return i=!0,d?q1:hm}i=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class G1{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:bk,sessionIdleExpire:Ek},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=L1(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=z1((i,a)=>BR(this,i,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),o=r?{threshold:Math.min(Ck,r),timeout:r,scrollTimeout:Rk,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new ZC(this,o)),U){const i=t._experiments;B.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{de.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=dt({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=dt({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{fR(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){U&&B.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){U&&B.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",U&&B.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){U&&B.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){U&&B.log("Buffering is in progress, call `flush()` to save the replay");return}U&&B.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=Oi({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){U&&B.log("Buffering is in progress, call `flush()` to save the replay");return}U&&B.infoTick("Starting replay in buffer mode");const t=Oi({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=wt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:Ik}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:D1(this),...P1(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{U&&B.log(`Stopping Replay${n?` triggered by ${n}`:""}`),am(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,PR(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),U&&B.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),U&&B.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();U&&B.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&ya(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${de.location.pathname}${de.location.hash}${de.location.search}`,n=`${de.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===hm){const s=dt({category:"replay.throttled"});this.addUpdate(()=>!$c(this,{type:GC,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||be(),n=t&&Se(t),s=(n&&j(n).data||{})[$e];if(!(!n||!s||!["route","custom"].includes(s)))return j(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=NR({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Oi({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return rm(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{de.document.addEventListener("visibilitychange",this._handleVisibilityChange),de.addEventListener("blur",this._handleWindowBlur),de.addEventListener("focus",this._handleWindowFocus),de.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(x1(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=wR(this)}_removeListeners(){try{de.document.removeEventListener("visibilitychange",this._handleVisibilityChange),de.removeEventListener("blur",this._handleWindowBlur),de.removeEventListener("focus",this._handleWindowFocus),de.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||nm(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){U&&B.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:V.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=gR(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(ri(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){U&&B.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await N1(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Xl;const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await pm({replayId:t,recordingData:o,segmentId:s,eventContext:r,session:this.session,timestamp:n,onError:i=>this.handleException(i)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=C();if(r){let s;n instanceof Bc?s="ratelimit_backoff":n instanceof Xl?s="invalid":s="send_error",r.recordDroppedEvent(s,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){U&&B.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const o=s<this._options.minReplayDuration,i=s>this._options.maxReplayDuration+5e3;if(o||i){U&&B.log(`Session duration (${Math.floor(s/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&U&&B.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&ni(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{const c=U1(a.target),u=n.join(",");return c?.matches(u)}))return!1;const r=t.length,s=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=s&&r>s;if(r>o||i){const a=dt({category:"replay.mutations",data:{count:r,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function gr(e,t){return[...e,...t].join(",")}function V1({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const o=["base","iframe[srcdoc]:not([src])"],i=gr(e,[".sentry-mask","[data-sentry-mask]"]),a=gr(t,[]);return{maskTextSelector:i,unmaskTextSelector:a,blockSelector:gr(n,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:gr(r,[]),ignoreSelector:gr(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function J1({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?o:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}const Ql='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Y1=["content-length","content-type","accept"],K1=Symbol.for("sentry__originalRequestBody");let Zl=!1,ed=!1;function X1(){if(typeof Request>"u"||ed)return;const e=Request;try{const t=function(n,r){const s=new e(n,r);return r?.body!=null&&(s[K1]=r.body),s};t.prototype=e.prototype,D.Request=t,ed=!0}catch{}}const mm=(e=>new Q1(e));class Q1{constructor({flushMinDelay:t=Tk,flushMaxDelay:n=vk,minReplayDuration:r=Ak,maxReplayDuration:s=Ml,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:y=[],networkCaptureBodies:b=!0,networkRequestHeaders:N=[],networkResponseHeaders:R=[],mask:$=[],maskAttributes:L=["title","placeholder","aria-label"],unmask:S=[],block:A=[],unblock:F=[],ignore:E=[],maskFn:M,beforeAddRecordingEvent:k,beforeErrorSampling:x,onError:P,attachRawBodyFromRequest:Z=!1}={}){this.name="Replay";const Y=V1({mask:$,unmask:S,block:A,unblock:F,ignore:E});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:M,maskInputFn:M,maskAttributeFn:(te,T,W)=>J1({maskAttributes:L,maskAllText:u,privacyOptions:Y,key:te,value:T,el:W}),...Y,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:te=>{try{te.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Mk),maxReplayDuration:Math.min(s,Ml),stickySession:o,useCompression:i,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:g,networkDetailAllowUrls:_,networkDetailDenyUrls:y,networkCaptureBodies:b,networkRequestHeaders:td(N),networkResponseHeaders:td(R),beforeAddRecordingEvent:k,beforeErrorSampling:x,onError:P,attachRawBodyFromRequest:Z,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ql}`:Ql,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&so())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Zl}set _isInitialized(t){Zl=t}afterAllSetup(t){!so()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&X1(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=Z1(this._initialOptions,t);this._replay=new G1({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function Z1(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=fn(n.replaysSessionSampleRate),o=fn(n.replaysOnErrorSampleRate);return s==null&&o==null&&Yt(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),o!=null&&(r.errorSampleRate=o),r}function td(e){return[...Y1,...e.map(t=>t.toLowerCase())]}function eA(){return C()?.getIntegrationByName("Replay")}var tA=Object.defineProperty,nA=(e,t,n)=>t in e?tA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nd=(e,t,n)=>nA(e,typeof t!="symbol"?t+"":t,n);class rA{constructor(){nd(this,"idNodeMap",new Map),nd(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function sA(){return new rA}function oA(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Ea(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Ea(e.parentNode,t,n,r+1)}function rd(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(oA(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const On=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let sd={map:{},getId(){return console.error(On),-1},getNode(){return console.error(On),null},removeNodeFromMap(){console.error(On)},has(){return console.error(On),!1},reset(){console.error(On)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(sd=new Proxy(sd,{get(e,t,n){return t==="map"&&console.error(On),Reflect.get(e,t,n)}}));function Hc(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){_m(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>Hc(e,t,o||{},!0)}function Wc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function iA(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function oi(e,t,n,r,s){if(!e)return!1;const o=iA(e);if(!o)return!1;const i=rd(t,n),a=Ea(o,i);let c=-1;return a<0?!1:(r&&(c=Ea(o,rd(null,r))),a>-1&&c<0?!0:a<c)}const od={};function gm(e){const t=od[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return od[e]=r.bind(window)}function nn(...e){return gm("requestAnimationFrame")(...e)}function _m(...e){return gm("setTimeout")(...e)}var Zn=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Zn||{});let js;function aA(e){js=e}const Li=e=>js?(...n)=>{try{return e(...n)}catch(r){if(js&&js(r)===!0)return()=>{};throw r}}:e;var $n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ts=0;Ts<$n.length;Ts++)cA[$n.charCodeAt(Ts)]=Ts;var uA=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=$n[t[n]>>2],s+=$n[(t[n]&3)<<4|t[n+1]>>4],s+=$n[(t[n+1]&15)<<2|t[n+2]>>6],s+=$n[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const id=new Map;function lA(e,t){let n=id.get(e);return n||(n=new Map,id.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const ym=(e,t,n)=>{if(!e||!(bm(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=lA(n,r);let o=s.indexOf(e);return o===-1&&(o=s.length,s.push(e)),o};function qs(e,t,n){if(e instanceof Array)return e.map(r=>qs(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=uA(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[qs(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[qs(e.data,t,n),e.width,e.height]};if(bm(e,t)||typeof e=="object"){const r=e.constructor.name,s=ym(e,t,n);return{rr_type:r,index:s}}}}return e}const Sm=(e,t,n)=>e.map(r=>qs(r,t,n)),bm=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function dA(e,t,n,r,s){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=Wc(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return oi(this.canvas,n,r,s,!0)||_m(()=>{const l=Sm(d,t,this);e(this.canvas,{type:Zn["2D"],property:a,args:l})},0),u.apply(this,d)}});o.push(c)}catch{const c=Hc(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Zn["2D"],property:a,args:[u],setter:!0})}});o.push(c)}return()=>{o.forEach(a=>a())}}function fA(e){return e==="experimental-webgl"?"webgl":e}function ad(e,t,n,r,s){const o=[];try{const i=Wc(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!oi(this,t,n,r,!0)){const d=fA(c);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});o.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(i=>i())}}function cd(e,t,n,r,s,o,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=Wc(e,d,function(f){return function(...p){const h=f.apply(this,p);if(ym(h,a,this),"tagName"in this.canvas&&!oi(this.canvas,r,s,o,!0)){const g=Sm(p,a,this),_={type:t,property:d,args:g};n(this.canvas,_)}return h}});c.push(l)}catch{const l=Hc(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function pA(e,t,n,r,s,o){const i=[];return i.push(...cd(t.WebGLRenderingContext.prototype,Zn.WebGL,e,n,r,s,o,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...cd(t.WebGL2RenderingContext.prototype,Zn.WebGL2,e,n,r,s,o,t)),()=>{i.forEach(a=>a())}}const hA='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function mA(){const e=new Blob([hA]);return URL.createObjectURL(e)}class gA{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{enableManualSnapshot:n,sampling:r="all",win:s,recordCanvas:o,errorHandler:i}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,i&&aA(i),(o&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(s),!n&&Li(()=>{o&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),o&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:o,recordCanvas:i,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Li(()=>{if(i&&n==="all"&&this.initCanvasMutationObserver(t,r,s,o),i&&typeof n=="number"){const c=ad(t,r,s,o,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}nn(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){const t=new Worker(mA());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:o,type:i,width:a,height:c}=r;this.mutationCb({id:s,type:Zn["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:i}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const n=r=>{this.takeSnapshot(r,!1),t=nn(n)};t=nn(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,s){const o=ad(t,n,r,s,!1),i=dA(this.processMutation.bind(this),t,n,r,s),a=pA(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{o(),i(),a()})}getCanvasElements(t,n,r){const s=[],o=i=>{i.querySelectorAll("canvas").forEach(a=>{oi(a,t,n,r)||s.push(a)})};for(const i of this.windows){const a=i.deref();let c;try{c=a&&a.document}catch{}c&&o(c)}for(const i of this.shadowDoms){const a=i.deref();a&&o(a)}return s}takeSnapshot(t,n,r){const{sampling:s,blockClass:o,blockSelector:i,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(s==="all"?2:s||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(o,i,a)).forEach(h=>{const g=this.mirror.getId(h);if(!(!this.mirror.hasNode(h)||!h.width||!h.height||this.snapshotInProgressMap.get(g))){if(this.snapshotInProgressMap.set(g,!0),!n&&["webgl","webgl2"].includes(h.__context)){const _=h.getContext(h.__context);_?.getContextAttributes()?.preserveDrawingBuffer===!1&&_.clear(_.COLOR_BUFFER_BIT)}createImageBitmap(h).then(_=>{this.worker?.postMessage({id:g,bitmap:_,width:h.width,height:h.height,dataURLOptions:c,maxCanvasSize:u},[_])}).catch(_=>{Li(()=>{throw this.snapshotInProgressMap.delete(g),_})()})}}),!0)}startPendingCanvasMutationFlusher(){nn(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,nn(t)};nn(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),nn(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(i=>{const{type:a,...c}=i;return c}),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:s}),this.pendingCanvasMutations.delete(t)}}try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}sA();var ud;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(ud||(ud={}));const ld={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},_A="ReplayCanvas",vs=1280,yA=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,vs):vs,n?Math.min(n,vs):vs]};let s,o;const i=new Promise(a=>o=a);return{name:_A,getOptions(){const{quality:a,enableManualSnapshot:c,maxCanvasSize:u}=r;return{enableManualSnapshot:c,recordCanvas:!0,getCanvasManager:d=>{const l=new gA({...d,enableManualSnapshot:c,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return s=l,o(l),l},...ld[a]||ld.medium}},async snapshot(a,c){(s||await i).snapshot(a,c)}}}),SA=yA;function bA(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Em(e){try{return new URL(e,O.location.origin).href}catch{return}}function EA(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Tm(e){try{return new Headers(e)}catch{return}}const dd=new WeakMap,Pi=new Map,jc={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function vm(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...jc,...t},d=typeof o=="function"?o:h=>!0,l=h=>TA(h,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(g=>{if(g.op==="http.client"){const _=Pi.get(g.span_id);_&&(g.timestamp=_/1e3,Pi.delete(g.span_id))}}),h)),s&&NT(h=>{if(h.response){const g=dd.get(h.response);g&&h.endTimestamp&&Pi.set(g,h.endTimestamp)}}),cc(h=>{const g=lb(h,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&dd.set(h.response,h.fetchData.__span),g){const _=Em(h.fetchData.url),y=_?dn(_).host:void 0;g.setAttributes({"http.url":_?Wt(_):void 0,"server.address":y}),i&&fd(g),c?.(g,{headers:h.headers})}})),r&&Tc(h=>{const g=vA(h,d,l,f,p,u);g&&(i&&fd(g),c?.(g,{headers:Tm(h.xhr.__sentry_xhr_v3__?.request_headers)}))})}function fd(e){const{url:t}=j(e).data;if(!t||typeof t!="string")return;const n=En("resource",({entries:r})=>{r.forEach(s=>{EA(s)&&s.name.endsWith(t)&&(e.setAttributes(nh(s)),setTimeout(n))})})}function TA(e,t){const n=Tn();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const o=r.origin===s;return t?st(r.toString(),t)||o&&st(r.pathname,t):o}else{const r=!!e.match(/^\/(?!\/)/);return t?st(e,t):r}}function vA(e,t,n,r,s,o){const i=e.xhr,a=i?.[bt];if(!i||i.__sentry_own_request__||!a)return;const{url:c,method:u}=a,d=Xe()&&t(c);if(e.endTimestamp&&d){const y=i.__sentry_xhr_span_id__;if(!y)return;const b=r[y];b&&a.status_code!==void 0&&(Ar(b,a.status_code),b.end(),o?.(b,{headers:Tm(oh(i)),error:e.error}),delete r[y]);return}const l=Em(c),f=dn(l||c),p=Wt(Uf(c)),h=!!be(),g=d&&h?In({name:`${u} ${p}`,attributes:{url:Wt(c),type:"xhr","http.method":u,"http.url":l?Wt(l):void 0,"server.address":f?.host,[re]:"auto.http.browser",[ve]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new At;i.__sentry_xhr_span_id__=g.spanContext().spanId,r[i.__sentry_xhr_span_id__]=g,n(c)&&IA(i,Xe()&&h?g:void 0,s);const _=C();return _&&_.emit("beforeOutgoingRequestSpan",g,e),g}function IA(e,t,n){const{"sentry-trace":r,baggage:s,traceparent:o}=Ka({span:t,propagateTraceparent:n});r&&wA(e,r,s,o)}function wA(e,t,n,r){const s=e.__sentry_xhr_v3__?.request_headers;if(!(s?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!s?.traceparent&&e.setRequestHeader("traceparent",r),n){const o=s?.baggage;(!o||!bA(o))&&e.setRequestHeader("baggage",n)}}catch{}}function kA(){O.document?O.document.addEventListener("visibilitychange",()=>{const e=be();if(!e)return;const t=Se(e);if(O.document.hidden&&t){const n="cancelled",{op:r,status:s}=j(t);v&&m.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:Q,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):v&&m.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const CA=3600,Im="sentry_previous_trace",RA="sentry.previous_trace";function AA(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let s=r?NA():void 0;e.on("spanStart",i=>{if(Se(i)!==i)return;const a=z().getPropagationContext();s=MA(s,i,a),r&&xA(s)});let o=!0;n&&e.on("beforeSampling",i=>{if(!s)return;const a=z(),c=a.getPropagationContext();if(o&&c.parentSpanId){o=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(Ta(s.spanContext))},sampleRand:s.sampleRand}),i.parentSampled=Ta(s.spanContext),i.parentSampleRate=s.sampleRate,i.spanAttributes={...i.spanAttributes,[Fd]:s.sampleRate}})}function MA(e,t,n){const r=j(t);function s(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[Co])}catch{return 0}}const o={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return o;const i=e.spanContext;return i.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=CA&&(v&&m.log(`Adding previous_trace \`${JSON.stringify(i)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:i,attributes:{[vg]:"previous_trace"}}),t.setAttribute(RA,`${i.traceId}-${i.spanId}-${Ta(i)?1:0}`)),o)}function xA(e){try{O.sessionStorage.setItem(Im,JSON.stringify(e))}catch(t){v&&m.warn("Could not store previous trace in sessionStorage",t)}}function NA(){try{const e=O.sessionStorage?.getItem(Im);return JSON.parse(e)}catch{return}}function Ta(e){return e.traceFlags===1}const OA="BrowserTracing",LA={...Rs,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...jc},PA=((e={})=>{const t={name:void 0,source:void 0},n=O.document,{enableInp:r,enableElementTiming:s,enableLongTask:o,enableLongAnimationFrame:i,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:g,traceXHR:_,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:b,enableHTTPTimings:N,ignoreResourceSpans:R,ignorePerformanceApiSpans:$,instrumentPageLoad:L,instrumentNavigation:S,detectRedirects:A,linkPreviousTrace:F,consistentTraceSampling:E,enableReportPageLoaded:M,onRequestSpanStart:k,onRequestSpanEnd:x}={...LA,...e};let P,Z,Y;function te(T,W,I=!0){const G=W.op==="pageload",oe=W.name,ne=d?d(W):W,ye=ne.attributes||{};if(oe!==ne.name&&(ye[$e]="custom",ne.attributes=ye),!I){const xe=vn();In({...ne,startTime:xe}).end(xe);return}t.name=ne.name,t.source=ye[$e];const Me=ff(ne,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:G,beforeSpanEnd:xe=>{P?.(),nI(xe,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:R,ignorePerformanceApiSpans:$}),hd(T,void 0);const Pe=z(),ct=Pe.getPropagationContext();Pe.setPropagationContext({...ct,traceId:Me.spanContext().traceId,sampled:Zt(Me),dsc:it(xe)}),G&&(Y=void 0)},trimIdleSpanEndTimestamp:!M});G&&M&&(Y=Me),hd(T,Me);function Pt(){n&&["interactive","complete"].includes(n.readyState)&&T.emit("idleSpanEnableAutoFinish",Me)}G&&!M&&n&&(n.addEventListener("readystatechange",()=>{Pt()}),Pt())}return{name:OA,setup(T){if(nf(),P=Y0({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:T}),r&&RI(),s&&hI(),i&&D.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?X0():o&&K0(),a&&Q0(),A&&n){const I=()=>{Z=he()};addEventListener("click",I,{capture:!0}),addEventListener("keydown",I,{capture:!0,passive:!0})}function W(){const I=Dr(T);I&&!j(I).timestamp&&(v&&m.log(`[Tracing] Finishing current active span with op: ${j(I).op}`),I.setAttribute(Rr,"cancelled"),I.end())}T.on("startNavigationSpan",(I,G)=>{if(C()!==T)return;if(G?.isRedirect){v&&m.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),te(T,{op:"navigation.redirect",...I},!1);return}Z=void 0,W(),Ee().setPropagationContext({traceId:pt(),sampleRand:Math.random(),propagationSpanId:Xe()?void 0:It()});const oe=z();oe.setPropagationContext({traceId:pt(),sampleRand:Math.random(),propagationSpanId:Xe()?void 0:It()}),oe.setSDKProcessingMetadata({normalizedRequest:void 0}),te(T,{op:"navigation",...I,parentSpan:null,forceTransaction:!0})}),T.on("startPageLoadSpan",(I,G={})=>{if(C()!==T)return;W();const oe=G.sentryTrace||pd("sentry-trace"),ne=G.baggage||pd("baggage"),ye=Vd(oe,ne),Me=z();Me.setPropagationContext(ye),Xe()||(Me.getPropagationContext().propagationSpanId=It()),Me.setSDKProcessingMetadata({normalizedRequest:hc()}),te(T,{op:"pageload",...I})}),T.on("endPageloadSpan",()=>{M&&Y&&(Y.setAttribute(Rr,"reportPageLoaded"),Y.end())})},afterAllSetup(T){let W=Tn();if(F!=="off"&&AA(T,{linkPreviousTrace:F,consistentTraceSampling:E}),O.location){if(L){const I=Re();qc(T,{name:O.location.pathname,startTime:I?I/1e3:void 0,attributes:{[$e]:"url",[re]:"auto.pageload.browser"}})}S&&Ko(({to:I,from:G})=>{if(G===void 0&&W?.indexOf(I)!==-1){W=void 0;return}W=void 0;const oe=Ya(I),ne=Dr(T),ye=ne&&A&&FA(ne,Z);wm(T,{name:oe?.pathname||O.location.pathname,attributes:{[$e]:"url",[re]:"auto.navigation.browser"}},{url:I,isRedirect:ye})})}h&&kA(),a&&DA(T,l,f,p,t),r&&xI(),vm(T,{traceFetch:g,traceXHR:_,trackFetchStreamPerformance:y,tracePropagationTargets:T.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:N,onRequestSpanStart:k,onRequestSpanEnd:x})}}});function qc(e,t,n){e.emit("startPageLoadSpan",t,n),z().setTransactionName(t.name);const r=Dr(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function wm(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const o=z();return o.setTransactionName(t.name),r&&!s&&o.setSDKProcessingMetadata({normalizedRequest:{...hc(),url:r}}),Dr(e)}function pd(e){return O.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function DA(e,t,n,r,s){const o=O.document;let i;const a=()=>{const c="ui.action.click",u=Dr(e);if(u){const d=j(u).op;if(["navigation","pageload"].includes(d)){v&&m.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(Rr,"interactionInterrupted"),i.end(),i=void 0),!s.name){v&&m.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}i=ff({name:s.name,op:c,attributes:{[$e]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};o&&addEventListener("click",a,{capture:!0})}const km="_sentry_idleSpan";function Dr(e){return e[km]}function hd(e,t){Le(e,km,t)}const md=1.5;function FA(e,t){const n=j(e),r=vn(),s=n.start_timestamp;return!(r-s>md||t&&r-t<=md)}function $A(e=C()){e?.emit("endPageloadSpan")}function UA(e){const t=be();if(t===e)return;const n=z();e.end=new Proxy(e.end,{apply(r,s,o){return ht(n,t),Reflect.apply(r,s,o)}}),ht(n,e)}function er(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function BA(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=er(n);return s=>r.then(o=>s(o.transaction(t,"readwrite").objectStore(t)))}function zc(e){return er(e.getAllKeys())}function HA(e,t,n){return e(r=>zc(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),er(r.transaction)}))}function WA(e,t,n){return e(r=>zc(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),er(r.transaction)}))}function jA(e){return e(t=>zc(t).then(n=>{const r=n[0];if(r!=null)return er(t.get(r)).then(s=>(t.delete(r),er(t.transaction).then(()=>s)))}))}function qA(e){let t;function n(){return t==null&&(t=BA(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await Ks(r);await HA(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await Ks(r);await WA(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await jA(n());if(r)return s_(r)}catch{}}}}function zA(e){return t=>{const n=e({...t,createStore:qA});return O.addEventListener("online",async r=>{await n.flush()}),n}}function GA(e=Ic){return zA(Oy(e))}const gd=1e6,VA="window"in D&&D.window===D&&typeof importScripts>"u",zt=String(0),To=VA?"main":"worker",vo=O.navigator;let Cm="",Rm="",Am="",va=vo?.userAgent||"",Mm="";const JA=vo?.language||vo?.languages?.[0]||"";function YA(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const _d=vo?.userAgentData;YA(_d)&&_d.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(Cm=e.platform||"",Am=e.architecture||"",Mm=e.model||"",Rm=e.platformVersion||"",e.fullVersionList?.length){const t=e.fullVersionList[e.fullVersionList.length-1];va=`${t.brand} ${t.version}`}}).catch(e=>{});function KA(e){return!("thread_metadata"in e)}function XA(e){return KA(e)?rM(e):e}function QA(e){const t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&v&&m.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function ZA(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=QA(r),o=XA(n),i=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:he()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:he()*1e3;return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Ao,runtime:{name:"javascript",version:O.navigator.userAgent},os:{name:Cm,version:Rm,build_number:va},device:{locale:JA,model:Mm,manufacturer:va,architecture:Am,is_emulator:!1},debug_meta:{images:Nm(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||Ie(),trace_id:s,active_thread_id:zt,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function eM(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const r=nM(e),s=t.getOptions(),o=t.getSdkMetadata?.()?.sdk;return{chunk_id:Ie(),client_sdk:{name:o?.name??"sentry.javascript.browser",version:o?.version??"0.0.0"},profiler_id:n||Ie(),platform:"javascript",version:"2",release:s.release??"",environment:s.environment??"production",debug_meta:{images:Nm(e.resources)},profile:r}}function tM(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function nM(e){const t=[];for(let a=0;a<e.frames.length;a++){const c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}const n=[];for(let a=0;a<e.stacks.length;a++){const c=e.stacks[a];if(!c)continue;const u=[];let d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}const r=Re(),s=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,o=s-(r||s),i=[];for(let a=0;a<e.samples.length;a++){const c=e.samples[a];if(!c)continue;const u=(s+(c.timestamp-o))/1e3;i[a]={stack_id:c.stackId??0,thread_id:zt,timestamp:u}}return{frames:t,stacks:n,samples:i,thread_metadata:{[zt]:{name:To}}}}function xm(e){return j(e).op==="pageload"}function rM(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[zt]:{name:To}}},s=e.samples[0];if(!s)return r;const o=s.timestamp,i=Re(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-o)*gd).toFixed(0),stack_id:t,thread_id:zt};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-o)*gd).toFixed(0),stack_id:n,thread_id:zt};r.stacks[n]=f,r.samples[d]=p,n++}),r}function sM(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function oM(e){const t=[];return pn(e,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++)n[s]?.contexts?.profile?.profile_id&&t.push(n[s])}),t}function Nm(e){const r=C()?.getOptions()?.stackParser;return r?k_(r,e):[]}function Om(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(v&&m.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(v&&m.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function iM(e){return e.samples.length<2?(v&&m.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(v&&m.log("[Profiling] Discarding profile because it contains no frames"),!1)}let Gc=!1;const Lm=3e4;function aM(e){return typeof e=="function"}function Pm(){const e=O.Profiler;if(!aM(e)){v&&m.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(Lm/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{v&&(m.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),m.log("[Profiling] Disabling profiling for current user session.")),Gc=!0}}function yd(e){if(Gc)return v&&m.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return v&&m.log("[Profiling] Discarding profile because root span was not sampled."),!1;const n=C()?.getOptions();if(!n)return v&&m.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return Om(r)?r?(r===!0?!0:Math.random()<r)?!0:(v&&m.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(v&&m.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(v&&m.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function cM(e){if(Gc)return v&&m.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return v&&m.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return Om(t)?t?Math.random()<=t:(v&&m.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(v&&m.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function Is(e){return typeof e.profilesSampleRate<"u"}function uM(e,t,n,r){return iM(n)?ZA(e,t,n,r):null}const cn=new Map;function lM(){return cn.size}function dM(e){const t=cn.get(e);return t&&cn.delete(e),t}function fM(e,t){if(cn.set(e,t),cn.size>30){const n=cn.keys().next().value;n!==void 0&&cn.delete(n)}}function pM(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":zt,"thread.name":To}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":zt,"thread.name":To}})),e}function Sd(e){let t;xm(e)&&(t=he()*1e3);const n=Pm();if(!n)return;v&&m.log(`[Profiling] started profiling span: ${j(e).description}`);const r=Ie();let s=null;z().setContext("profile",{profile_id:r,start_timestamp:t});async function o(){if(e&&n){if(s){v&&m.log("[Profiling] profile for:",j(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(i&&(O.clearTimeout(i),i=void 0),v&&m.log(`[Profiling] stopped profiling of span: ${j(e).description}`),!u){v&&m.log(`[Profiling] profiler returned null profile for: ${j(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}s=u,fM(r,u)}).catch(u=>{v&&m.log("[Profiling] error while stopping profiler:",u)})}}let i=O.setTimeout(()=>{v&&m.log("[Profiling] max profile duration elapsed, stopping profiling for:",j(e).description),o()},Lm);const a=e.end.bind(e);function c(){return e?(o().then(()=>{a()},()=>{a()}),e):a()}e.end=c}const hM=6e4,mM=3e5;class gM{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const n=t.getOptions().profileLifecycle,r=cM(t.getOptions());v&&m.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||v&&m.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=Ie(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){v&&m.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){v&&m.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){v&&m.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){v&&m.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){v&&m.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);const r=this._activeRootSpanIds.size;r===1&&(v&&m.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,v&&m.log("[Profiling] Started profiling with profiler ID:",this._profilerId),Un().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){v&&m.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{v&&m.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&Un().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){v&&m.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==Se(n))return;if(!n.isRecording()){v&&m.log("[Profiling] Discarding profile because root span was not sampled.");return}const r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const s=this._activeRootSpanIds.size;s===1&&(v&&m.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${s}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;const r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);const s=this._activeRootSpanIds.size;v&&m.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${s}).`),s===0&&(this._collectCurrentChunk().catch(o=>{v&&m.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",o)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,Un().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const n=setTimeout(()=>this._onRootSpanTimeout(t),mM);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;const t=Pm();if(!t){v&&m.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{v&&m.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},hM))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(v&&m.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const n=await t.stop(),r=eM(n,this._client,this._profilerId),s=tM(r);if("reason"in s){v&&m.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",s.reason);return}this._sendProfileChunk(r),v&&m.log("[Profiling] Collected browser profile chunk.")}catch(n){v&&m.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){const n=this._client,r=Mo(n.getSdkMetadata?.()),s=n.getDsn(),o=n.getOptions().tunnel,i=at({event_id:Ie(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!o&&s&&{dsn:Nt(s)}},[[{type:"profile_chunk",platform:"javascript"},t]]);n.sendEnvelope(i).then(null,a=>{v&&m.error("Error while sending profile chunk envelope:",a)})}}const _M="BrowserProfiling",yM=(()=>({name:_M,setup(e){const t=e.getOptions(),n=new gM;if(!Is(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),Is(t)&&!t.profilesSampleRate){v&&m.log("[Profiling] Profiling disabled, no profiling options found.");return}const r=be(),s=r&&Se(r);if(Is(t)&&t.profileSessionSampleRate!==void 0&&v&&m.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),Is(t))s&&xm(s)&&yd(s)&&Sd(s),e.on("spanStart",o=>{o===Se(o)&&yd(o)&&Sd(o)}),e.on("beforeEnvelope",o=>{if(!lM())return;const i=oM(o);if(!i.length)return;const a=[];for(const c of i){const u=c?.contexts,d=u?.profile?.profile_id,l=u?.profile?.start_timestamp;if(typeof d!="string"){v&&m.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!d){v&&m.log("[Profiling] cannot find profile for a span without a profile context");continue}u?.profile&&delete u.profile;const f=dM(d);if(!f){v&&m.log(`[Profiling] Could not retrieve profile for span: ${d}`);continue}const p=uM(d,l,f,c);p&&a.push(p)}sM(o,a)});else{const o=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),o==="manual")n.initialize(e);else if(o==="trace"){if(!Xe(t)){v&&m.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),s&&n.notifyRootSpanActive(s),O.setTimeout(()=>{const i=be(),a=i&&Se(i);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return pM(e)}})),SM=yM,bM=()=>({name:"LaunchDarkly",processEvent(e,t,n){return ir(e)}});function EM(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{hn(e,t.value),mn(e,t.value)}}}const TM=()=>({name:"OpenFeature",processEvent(e,t,n){return ir(e)}});class vM{after(t,n){hn(n.flagKey,n.value),mn(n.flagKey,n.value)}error(t,n,r){hn(t.flagKey,t.defaultValue),mn(t.flagKey,t.defaultValue)}}const IM=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Ce(t,"isEnabled",wM)},processEvent(t,n,r){return ir(t)}});function wM(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(hn(n,r),mn(n,r)):v&&m.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const kM=(({growthbookClass:e})=>ib({growthbookClass:e})),CM=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{hn(n.gate.name,n.gate.value),mn(n.gate.name,n.gate.value)})},processEvent(t,n,r){return ir(t)}});async function RM(){const e=C();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";const r=e.getOptions().tunnel||"https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7";try{await uf(()=>fetch(r,{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const AM="WebWorker",MM=({worker:e})=>({name:AM,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>bd(t))},addWorker:t=>bd(t)});function bd(e){e.addEventListener("message",t=>{if(OM(t.data)){if(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(v&&m.log("Sentry debugId web worker message received",t.data),O._sentryDebugIds={...t.data._sentryDebugIds,...O._sentryDebugIds}),t.data._sentryModuleMetadata&&(v&&m.log("Sentry module metadata web worker message received",t.data),O._sentryModuleMetadata={...t.data._sentryModuleMetadata,...O._sentryModuleMetadata}),t.data._sentryWasmImages){v&&m.log("Sentry WASM images web worker message received",t.data);const n=O._sentryWasmImages||[],r=t.data._sentryWasmImages.filter(s=>Ge(s)&&typeof s.code_file=="string"&&!n.some(o=>o.code_file===s.code_file));O._sentryWasmImages=[...n,...r]}t.data._sentryWorkerError&&(v&&m.log("Sentry worker rejection message received",t.data._sentryWorkerError),xM(t.data._sentryWorkerError))}})}function xM(e){const t=C();if(!t)return;const n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,s=e.reason,o=Gt(s)?gh(s):Vo(n,s,void 0,r,!0);o.level="error",e.filename&&(o.contexts={...o.contexts,worker:{filename:e.filename}}),or(o,{originalException:s,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),v&&m.log("Captured worker unhandled rejection",s)}function NM({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0,_sentryModuleMetadata:e._sentryModuleMetadata??void 0}),e.addEventListener("unhandledrejection",t=>{const r={reason:mh(t),filename:e.location?.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),v&&m.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),v&&m.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function OM(e){if(!Ge(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,n="_sentryModuleMetadata"in e,r="_sentryWorkerError"in e,s="_sentryWasmImages"in e;return!(!t&&!n&&!r&&!s||t&&!(Ge(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!(Ge(e._sentryModuleMetadata)||e._sentryModuleMetadata===void 0)||r&&!Ge(e._sentryWorkerError)||s&&(!Array.isArray(e._sentryWasmImages)||!e._sentryWasmImages.every(o=>Ge(o)&&typeof o.code_file=="string")))}const LM=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function PM(e){return O.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function Vc(e={}){const t=PA({...e,instrumentPageLoad:!1});return{...t,afterAllSetup(n){if(t.afterAllSetup?.(n),O.location&&e.instrumentPageLoad!=!1){const r=Re(),{name:s,source:o}=DM();qc(n,{name:s,startTime:r?r/1e3:void 0,attributes:{[$e]:o,[re]:"auto.pageload.astro"}})}}}}function DM(){try{const e=PM("sentry-route-name");if(e){const t=decodeURIComponent(e);return LM&&m.log(`[Tracing] Using route name from Sentry HTML meta-tag: ${t}`),{name:t,source:"route"}}}catch{}return{name:O.location.pathname,source:"url"}}function Dm(e){const t={defaultIntegrations:FM(),...e};return Wf(t,"astro",["astro","browser"]),Bw(t)}function FM(e){return typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__?[...po(),Vc()]:po()}const $M=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:Hp,MULTIPLEXED_TRANSPORT_EXTRA_KEY:Ms,OpenFeatureIntegrationHook:vM,SDK_VERSION:Et,SEMANTIC_ATTRIBUTE_SENTRY_OP:ve,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:re,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Co,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:$e,Scope:ot,WINDOW:O,addBreadcrumb:mt,addEventProcessor:Sf,addIntegration:Vi,breadcrumbsIntegration:dh,browserApiErrorsIntegration:fh,browserProfilingIntegration:SM,browserSessionIntegration:ph,browserTracingIntegration:Vc,buildLaunchDarklyFlagUsedHandler:EM,captureConsoleIntegration:dS,captureEvent:or,captureException:me,captureFeedback:np,captureMessage:mf,captureSession:Gi,chromeStackLineParser:ih,close:Y_,consoleLoggingIntegration:Rb,contextLinesIntegration:lk,continueTrace:y_,createConsolaReporter:Lb,createLangChainCallbackHandler:bT,createTransport:xf,createUserFeedbackEnvelope:sw,dedupeIntegration:Kf,defaultRequestInstrumentationOptions:jc,defaultStackLineParsers:ch,defaultStackParser:uh,diagnoseSdkConnectivity:RM,endSession:Ha,eventFiltersIntegration:qf,eventFromException:Up,eventFromMessage:Bp,exceptionFromError:Go,extraErrorDataIntegration:bS,featureFlagsIntegration:ob,feedbackAsyncIntegration:s0,feedbackIntegration:El,feedbackSyncIntegration:El,flush:J_,forceLoad:Hw,functionToStringIntegration:jf,geckoStackLineParser:ah,getActiveSpan:be,getClient:C,getCurrentScope:z,getDefaultIntegrations:po,getFeedback:hv,getGlobalScope:Un,getIsolationScope:Ee,getReplay:eA,getRootSpan:Se,getSpanDescendants:Er,getSpanStatusFromHttpCode:$d,getTraceData:Ka,globalHandlersIntegration:hh,graphqlClientIntegration:yk,growthbookIntegration:kM,httpClientIntegration:Kw,httpContextIntegration:yh,inboundFiltersIntegration:zf,init:Dm,instrumentAnthropicAiClient:ZE,instrumentGoogleGenAIClient:fT,instrumentLangGraph:RT,instrumentOpenAiClient:OE,instrumentOutgoingRequests:vm,instrumentSupabaseClient:tp,isEnabled:yf,isInitialized:K_,lastEventId:_f,launchDarklyIntegration:bM,lazyLoadIntegration:Fp,linkedErrorsIntegration:Sh,logger:Tb,makeBrowserOfflineTransport:GA,makeFetchTransport:Ic,makeMultiplexedTransport:Dy,metrics:Nb,moduleMetadataIntegration:aS,onLoad:Ww,openFeatureIntegration:TM,opera10StackLineParser:ew,opera11StackLineParser:rw,parameterize:Hf,registerSpanErrorInstrumentation:nf,registerWebWorker:NM,replayCanvasIntegration:SA,replayIntegration:mm,reportPageLoaded:$A,reportingObserverIntegration:Vw,rewriteFramesIntegration:RS,sendFeedback:vp,setActiveSpanInBrowser:UA,setContext:gf,setCurrentClient:Ff,setExtra:q_,setExtras:j_,setHttpStatus:Ar,setMeasurement:cf,setTag:G_,setTags:z_,setUser:V_,showReportDialog:jw,spanToBaggageHeader:Yg,spanToJSON:j,spanToTraceHeader:Qd,spotlightBrowserIntegration:Dw,startBrowserTracingNavigationSpan:wm,startBrowserTracingPageLoadSpan:qc,startInactiveSpan:In,startNewTrace:lf,startSession:zi,startSpan:Ot,startSpanManual:St,statsigIntegration:CM,supabaseIntegration:HS,suppressTracing:uf,thirdPartyErrorFilterIntegration:XS,uiProfiler:PI,unleashIntegration:IM,updateSpanName:Gg,webWorkerIntegration:MM,winjsStackLineParser:XI,withActiveSpan:qr,withIsolationScope:bg,withScope:Ze,zodErrorsIntegration:KS},Symbol.toStringTag,{value:"Module"}));Dm({dsn:"https://2aca5fe97c71868bc3aa7fb48620dc39@o1.ingest.us.sentry.io/4510798755856384",sendDefaultPii:!0,integrations:[Vc(),mm()],enableLogs:!0,tracesSampleRate:1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,enabled:!0});window.Sentry=$M;const UM={},Fm=new Set,Io=new WeakSet;let Ia=!0,$m,Ed=!1;function BM(e){Ed||(Ed=!0,Ia??=!1,$m??="hover",HM(),WM(),jM(),zM())}function HM(){for(const e of["touchstart","mousedown"])document.addEventListener(e,t=>{Fr(t.target,"tap")&&ii(t.target.href,{ignoreSlowConnection:!0})},{passive:!0})}function WM(){let e;document.body.addEventListener("focusin",r=>{Fr(r.target,"hover")&&t(r)},{passive:!0}),document.body.addEventListener("focusout",n,{passive:!0}),Jc(()=>{for(const r of document.getElementsByTagName("a"))Io.has(r)||Fr(r,"hover")&&(Io.add(r),r.addEventListener("mouseenter",t,{passive:!0}),r.addEventListener("mouseleave",n,{passive:!0}))});function t(r){const s=r.target.href;e&&clearTimeout(e),e=setTimeout(()=>{ii(s)},80)}function n(){e&&(clearTimeout(e),e=0)}}function jM(){let e;Jc(()=>{for(const t of document.getElementsByTagName("a"))Io.has(t)||Fr(t,"viewport")&&(Io.add(t),e??=qM(),e.observe(t))})}function qM(){const e=new WeakMap;return new IntersectionObserver((t,n)=>{for(const r of t){const s=r.target,o=e.get(s);r.isIntersecting?(o&&clearTimeout(o),e.set(s,setTimeout(()=>{n.unobserve(s),e.delete(s),ii(s.href)},300))):o&&(clearTimeout(o),e.delete(s))}})}function zM(){Jc(()=>{for(const e of document.getElementsByTagName("a"))Fr(e,"load")&&ii(e.href)})}function ii(e,t){e=e.replace(/#.*/,"");const n=t?.ignoreSlowConnection??!1;if(GM(e,n))if(Fm.add(e),document.createElement("link").relList?.supports?.("prefetch")&&t?.with!=="fetch"){const r=document.createElement("link");r.rel="prefetch",r.setAttribute("href",e),document.head.append(r)}else{const r=new Headers;for(const[s,o]of Object.entries(UM))r.set(s,o);fetch(e,{priority:"low",headers:r})}}function GM(e,t){if(!navigator.onLine||!t&&Um())return!1;try{const n=new URL(e,location.href);return location.origin===n.origin&&(location.pathname!==n.pathname||location.search!==n.search)&&!Fm.has(e)}catch{}return!1}function Fr(e,t){if(e?.tagName!=="A")return!1;const n=e.dataset.astroPrefetch;return n==="false"?!1:t==="tap"&&(n!=null||Ia)&&Um()?!0:n==null&&Ia||n===""?t===$m:n===t}function Um(){if("connection"in navigator){const e=navigator.connection;return e.saveData||/2g/.test(e.effectiveType)}return!1}function Jc(e){e();let t=!1;document.addEventListener("astro:page-load",()=>{if(!t){t=!0;return}e()})}BM();
